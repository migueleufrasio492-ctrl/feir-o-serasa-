try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="1764098497929708c08cf4c"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3161,7062],{214:(e,t,r)=>{"use strict";r.d(t,{AE:()=>p,B1:()=>b,F0:()=>N,ON:()=>k,OX:()=>P,Um:()=>f,WW:()=>u,Ws:()=>g,Z8:()=>j,ZG:()=>x,ZS:()=>m,aR:()=>d,b0:()=>y,dO:()=>E,dm:()=>C,pk:()=>_,s0:()=>v,sC:()=>w,vD:()=>h,zJ:()=>c});var a=r(83220),s=r(92918),l=r(94087),n=r(15365),i=r(680),o=r(72632);let c=()=>(0,s.Tp)(i.x.ModelSelector),d=()=>(0,s.Tp)(i.x.InAppTeaching),u=()=>{let e=(0,n.WW)(),t=(0,s.Tp)(i.x.DownloadZip),r=(0,a.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:l}=(0,o.cb)(null==r?void 0:r.plan);return e||t||l},p=()=>(0,s.Tp)(i.x.Embed),m=()=>(0,s.Tp)(i.x.SetCreditLimit),h=()=>{let e=(0,s.Tp)(i.x.DashboardV2),t=(0,s.Tp)(i.x.LargePromptbox);return(0,l.Q)(i.G.DashboardV2Experiment,{control:!1,test:!0})||e||t},_=()=>(0,s.Tp)(i.x.ThemeSelectorTool),g=()=>(0,s.Tp)(i.x.ChatFullscreen),x=()=>(0,s.Tp)(i.x.ThemeSelectorTool),f=()=>(0,s.Tp)(i.x.DesignLibraries),v=()=>(0,s.Tp)(i.x.ShopifyExistingStores),j=()=>(0,s.Tp)(i.x.AppStore),w=()=>{var e;return null!=(e=(0,s.Tp)(i.x.ThemeSelectorTool))&&e},b=()=>(0,s.Tp)(i.x.DesignSystemLibraries),E=()=>(0,s.Tp)(i.x.Notifications),y=()=>{let e=(0,l.Q)(i.G.LargePromptboxExperiment,{control:"control",redesign:"redesign",pills:"pills",chat:"chat"},"control");return{isEnabled:"control"!==e,variant:e}},C=()=>(0,s.Tp)(i.x.ChatReferencing),N=()=>(0,s.Tp)(i.x.RandomTheme),k=()=>(0,s.Tp)(i.x.ProficiencyLevel),P=()=>(0,s.Tp)(i.x.DecemberAgiChatRelease)},2231:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var a=r(77145),s=r(49974),l=r(67539),n=r(72632),i=r(51573);function o(e){let{options:t,selectedOption:r,onSelect:o,disabled:c=!1,disabledText:d,showCreditDifference:u=!1,currentPlanLimit:p,priceInDropdown:m}=e,{getCurrencySymbol:h}=(0,s.et)(),_=h(),g=e=>{let t=(0,n.RL)(e);if(u&&void 0!==p){let r=t-p;if(e===i.VL.KTLO)return"5 daily credits";if(r>0)return"+".concat(r," additional credits");if(0===r)return"No additional credits"}return"".concat(t," credits / month")},x=()=>g(r);if(c){let e=d||x();return e?(0,a.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-muted px-3 py-2 text-sm text-muted-foreground",children:e}):null}return(0,a.jsxs)(l.l6,{value:r,onValueChange:o,disabled:c,children:[(0,a.jsx)(l.bq,{className:"justify-start bg-background",children:(0,a.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,a.jsx)("span",{className:"min-w-0 truncate",children:x()}),(null==m?void 0:m.show)&&(0,a.jsxs)("span",{className:"ml-auto shrink-0 whitespace-nowrap text-muted-foreground",children:[_,m.getDisplayPrice(r)," / month"]})]})}),(0,a.jsx)(l.gC,{children:t.map(e=>(0,a.jsx)(l.tJ,{value:e,label:g(e),endContent:(null==m?void 0:m.show)?(0,a.jsxs)("span",{className:"text-muted-foreground",children:[_,m.getDisplayPrice(e)," / month"]}):void 0,showIndicator:!1,variant:"twilight"},e))})]})}},3201:(e,t,r)=>{"use strict";r.d(t,{R:()=>ep,u:()=>eu});var a=r(77145),s=r(95661),l=r(49974),n=r(53384),i=r(26158),o=r(20247),c=r(72632),d=r(91169),u=r(51573),p=r(76058),m=function(e){return e.SUGGEST_LOWER_PLAN="SUGGEST_LOWER_PLAN",e.FEATURES_TO_TRY="FEATURES_TO_TRY",e.KTLO_OFFER="KTLO_OFFER",e.FEEDBACK="FEEDBACK",e.FINAL_CONFIRMATION="FINAL_CONFIRMATION",e}({});let h=(0,s.createContext)(void 0),_=e=>{let{children:t,targetPlan:r,onCancel:n,workspace:i}=e,o=i.plan!==p.G.KTLO&&r===u.VL.FREE,c=(0,s.useCallback)(()=>o?m.KTLO_OFFER:m.FEEDBACK,[o]),_=(0,s.useMemo)(()=>c(),[c]),[g,x]=(0,s.useState)(_),[f,v]=(0,s.useState)({reason:""}),[j,w]=(0,s.useState)(!1),b=(0,l.et)(),{toCheckout:E}=(0,d.R)(),y=async e=>{w(!0);try{let t=null!=e?e:r;(null==i?void 0:i.id)&&(t&&t!==u.VL.FREE?await E({plan:t,workspaceId:i.id,grandfatheredDiscount:!1,planType:b.planType,changeType:"downgrade"}):(await b.cancelSubscription(),n()))}finally{w(!1)}},C=async()=>{w(!0);try{(null==i?void 0:i.id)&&await E({plan:u.VL.KTLO,workspaceId:i.id,grandfatheredDiscount:!1,planType:"monthly",changeType:"downgrade"})}catch(e){w(!1)}},N={currentStep:g,feedback:f,currentPlan:i.plan,targetPlan:null!=r?r:u.VL.FREE,shouldShowKtloOffer:o,setCurrentStep:x,setFeedback:v,onCancel:n,onConfirm:y,onSwitchToKtlo:C,isLoading:j||b.isCancelSubscriptionLoading,getNextStepAfterSuggestLowerPlan:()=>m.FEATURES_TO_TRY,getNextStepAfterFeatures:c,getNextStepAfterKtlo:()=>m.FEEDBACK,getNextStepAfterFeedback:()=>m.FINAL_CONFIRMATION,getPreviousStepBeforeFeedback:()=>o?m.KTLO_OFFER:m.FEATURES_TO_TRY,getPreviousStepBeforeFinalConfirmation:()=>m.FEEDBACK};return(0,a.jsx)(h.Provider,{value:N,children:t})},g=()=>{let e=(0,s.useContext)(h);if(void 0===e)throw Error("useDowngrade must be used within a DowngradeProvider");return e};var x=r(92912),f=r(52811),v=r(6397),j=r(77563),w=r(26846),b=r(39528),E=r(56024);let y=[{value:"technical_issues",label:"I am having too many technical issues"},{value:"too_expensive",label:"It's too expensive"},{value:"not_using",label:"I'm not using Lovable enough"},{value:"missing_features",label:"It's missing features"},{value:"switched_to_competitor",label:"I switched to a competitor"},{value:"other",label:"Other reason"}],C=[{id:"custom-domains",name:"Custom domains",description:"Connect your own domain to your projects",icon:"link"},{id:"team-collab",name:"Team collaboration",description:"Invite team members to work together",icon:"people"},{id:"visual-editor",name:"Visual editor",description:"Edit the frontend of your project instantly",icon:"draw"},{id:"code-editor",name:"Code editor",description:"Edit the backend of your project in code",icon:"code"},{id:"chat-mode",name:"Chat mode",description:"Plan your next step with AI",icon:"message_text"},{id:"security-checks",name:"Security checks",description:"Run checks when publishing with Supabase to find and fix vulnerabilities",icon:"shield"}];var N=r(27458);let k=e=>{let{title:t,description:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(N.Fy,{className:"h-9"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(o.L3,{className:"text-2xl font-medium md:text-3xl",children:t}),r&&(0,a.jsx)(o.rr,{className:"text-base text-muted-foreground",children:r})]})]})},P=()=>{let e=g();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(k,{title:"Why are you downgrading?",description:"We use this information to improve our product."}),(0,a.jsx)(w.z,{value:e.feedback.reason,onValueChange:t=>e.setFeedback({...e.feedback,reason:t}),className:"flex flex-col gap-1",children:y.map(t=>(0,a.jsxs)("div",{className:(0,E.cn)("flex cursor-pointer items-center gap-3 rounded-lg px-4 py-3 transition-colors",e.feedback.reason===t.value?"bg-primary/5":"hover:bg-muted/50"),onClick:()=>e.setFeedback({...e.feedback,reason:t.value}),children:[(0,a.jsx)(w.C,{value:t.value,id:t.value}),(0,a.jsx)(j.Label,{htmlFor:t.value,className:"text-base font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.value))}),(0,a.jsx)(v.p,{placeholder:"Tell us more about your decision...",className:"h-12",maxLength:500,value:e.feedback.additionalNotes,onChange:t=>e.setFeedback({...e.feedback,additionalNotes:t.target.value})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[(0,a.jsx)(f.$,{variant:"affirmative",className:"w-full",onClick:()=>{x.Ay.capture(b.rz.FEEDBACK.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"}),(0,a.jsx)(f.$,{variant:"outline",className:"w-full",onClick:()=>{x.Ay.capture(b.rz.FEEDBACK.CONTINUE_CLICKED,{reason:e.feedback.reason}),e.setCurrentStep(e.getNextStepAfterFeedback())},children:"Downgrade plan"})]})]})})};var I=r(6698),D=r(31088),A=r(75222),S=r(65949),L=r(69730),T=r(63851),O=r(19620);let R=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,E.cn)("rounded-xl border bg-background p-5",r),children:t})},M=A.Ik({reason:A.Yj().optional(),additional_notes:A.Yj().max(500,"Additional notes must be less than 500 characters").optional()}),K=()=>{let e=g(),t=(0,T.P)(),r=(0,I.n)({mutationFn:async()=>{let r=M.parse({reason:e.feedback.reason,additional_notes:e.feedback.additionalNotes});await t.post("/user/cancellation",r),await e.onConfirm()},onSuccess:()=>{x.Ay.capture(b.rz.FINAL_CONFIRMATION.CONFIRM_CLICKED,{from_plan:e.currentPlan,to_plan:e.targetPlan})},onError:e=>{if(O.logging.error("Error submitting feedback:",e),e instanceof S.G){let t=e.errors[0];D.toast.error("Validation Error",{description:t.message})}else{var t;D.toast.error("Error",{description:(null==(t=e.data)?void 0:t.detail)||"Failed to submit feedback"})}}}),s=((e,t)=>{let r=(0,c.m6)(e),a=(0,c.m6)(t),s=(0,c.RL)(e),l=(0,c.RL)(t);if("pro"===r){if("pro"===a)return[{text:"Credit limit will decrease from ".concat(s," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(s," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}if("biz"===r){if("biz"===a)return[{text:"Credit limit will decrease from ".concat(s," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Business plan features",isPositive:!0}];if("pro"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"Credit limit will decrease from ".concat(s," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"All new projects will be public",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(s," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}return"ktlo"===a?[{text:"Credits will change from ".concat(s," per month to freemium (").concat(5," per day, up to 30 per month)"),isPositive:!1},{text:"No credit rollovers",isPositive:!1},{text:"You keep: Pro features: Private Projects, No Lovable Badge, Roles and Permissions, Custom Domains",isPositive:!0}]:[]})(e.currentPlan,e.targetPlan);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{title:"Continue downgrading?",description:"Keep your momentum. Finish your project. You can do it."}),(0,a.jsxs)(R,{children:[(0,a.jsx)("div",{className:"mb-4 text-lg font-medium",children:"Here is what will change if you downgrade:"}),(0,a.jsxs)("ul",{className:"flex flex-col gap-4",children:[0===s.length&&(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(L.A,{name:"x",className:"size-5"}),(0,a.jsx)("span",{children:"Features of your current plan"})]}),s.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(L.A,{name:e.isPositive?"check":"x",className:"size-5 ".concat(e.isPositive?"text-green-600":"text-muted-foreground")}),(0,a.jsx)("span",{children:e.text})]},t))]}),(0,a.jsx)(f.$,{variant:"outline",className:"mt-4 w-full",onClick:()=>{x.Ay.capture(b.rz.FINAL_CONFIRMATION.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"})]}),(0,a.jsx)(f.$,{variant:"destructive",className:"w-full",onClick:()=>r.mutate(),loading:r.isPending,children:"Confirm downgrade"})]})};var F=r(94087),U=r(680),W=r(68259);let B={control:u.VL.KTLO,variant1:u.VL.KTLO_1,variant2:u.VL.KTLO_2},V=()=>{let e=g(),{getCurrencySymbol:t,subscriptionCurrency:r,currentPlan:s}=(0,l.et)(),n=t(),{isPaidPlan:i}=(0,c.cb)(s.id),o=(0,W.Lu)(r,i),d=(0,F.Q)(U.G.LitePricing,B),p=(0,c.jL)({id:d,type:"monthly"},o),m=(0,c.jL)({id:u.VL.PRO_1,type:"monthly"},o),h=Math.round((m-p)/m*100),_=x.Ay.getFeatureFlag(U.G.LitePricing),v=async()=>{x.Ay.capture(b.rz.KTLO_OFFER.SWITCH_CLICKED,{plan_price:p,experiment_variant:_,experiment_name:U.G.LitePricing}),await e.onSwitchToKtlo()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{title:"Switch to Lite",description:"Try our new Lite plan and retain important features that keep your project going."}),(0,a.jsxs)(R,{children:[(0,a.jsx)("div",{className:"mb-2 text-lg font-medium",children:"Lite plan"}),(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:[n,p]}),(0,a.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"}),(0,a.jsxs)("span",{className:"rounded bg-success px-2 py-0.5 text-xs text-success-foreground",children:[h,"% off"]})]}),(0,a.jsx)("ul",{className:"mt-4 flex flex-col gap-3",children:["5 daily credits","Keep custom domains","No Lovable badge","Team settings stay in place"].map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{name:"check",className:"size-5"}),(0,a.jsx)("span",{children:e})]},t))}),(0,a.jsx)(f.$,{className:"mt-6 w-full",variant:"affirmative",onClick:v,loading:e.isLoading,children:"Switch to Lite"})]}),(0,a.jsx)(f.$,{variant:"outline",className:"w-full",onClick:()=>{x.Ay.capture(b.rz.KTLO_OFFER.CONTINUE_DOWNGRADE_CLICKED,{plan_price:p,experiment_variant:_,experiment_name:U.G.LitePricing}),e.setCurrentStep(e.getNextStepAfterKtlo())},children:"Downgrade plan"})]})},G=()=>{let e=g();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{title:"Have you tried these features?"}),(0,a.jsxs)(R,{children:[(0,a.jsx)("div",{className:"flex flex-col gap-1.5 md:gap-2",children:C.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg px-2 py-2 transition-colors md:gap-4 md:px-3",children:[(0,a.jsx)("span",{className:"mt-1.5 select-none text-base md:mt-2 md:text-lg",children:(0,a.jsx)(L.A,{name:e.icon,className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,a.jsx)(j.Label,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))}),(0,a.jsxs)(f.$,{variant:"affirmative",className:"mt-4 w-full",onClick:()=>{x.Ay.capture(b.rz.FEATURE_USAGE.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,c._R)(e.currentPlan||"unknown")]})]}),(0,a.jsx)(f.$,{variant:"outline",onClick:()=>{x.Ay.capture(b.rz.FEATURE_USAGE.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterFeatures())},children:"Downgrade plan"})]})};var q=r(83220),H=r(2231),Y=r(47226),z=r(53792);let Z=()=>{let e=g(),t=(0,l.et)(),r=(0,q.j4)(e=>e.currentWorkspace),{isEnterprisePlan:n}=(0,c.cb)(t.currentPlan.id),i=(0,s.useMemo)(()=>(0,c.e3)(e.currentPlan,e.currentPlan.startsWith(z.lV)?"biz":"pro"),[e.currentPlan]),o=(0,s.useMemo)(()=>(null==r?void 0:r.plan)&&i.length>0&&!i.some(e=>e===(null==r?void 0:r.plan))?i[0]:null,[i,null==r?void 0:r.plan]),[d,u]=(0,s.useState)(o);(0,s.useEffect)(()=>{t.setPlanType("monthly")},[t.setPlanType]),(0,s.useEffect)(()=>{(null==r?void 0:r.plan)&&!d&&e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},[null==r?void 0:r.plan,d,e]);let p=async()=>{d&&(x.Ay.capture(b.rz.SUGGEST_LOWER_PLAN.DOWNGRADE_CREDITS_CLICKED,{current_plan_id:e.currentPlan,target_plan_id:d,target_plan_type:t.planType,plan_price:t.getDisplayPrice(d)}),await e.onConfirm(d))};return d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{title:"Downgrade now",description:"Do you want to downgrade by changing your monthly credits?"}),(0,a.jsxs)(R,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Reduce monthly credits"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:[t.getCurrencySymbol(),t.getDisplayPrice(d)]}),(0,a.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"})]}),(0,a.jsx)(H.h,{options:i,selectedOption:d,disabled:t.shouldDisableWorkspaceAdminActions,onSelect:u})]}),(0,a.jsx)(f.$,{className:"mt-4 w-full",variant:"affirmative",disabled:d===e.currentPlan||n||t.shouldDisableWorkspaceAdminActions,onClick:p,loading:e.isLoading,children:"Downgrade credits"})]}),(0,a.jsx)(f.$,{variant:"outline",onClick:()=>{x.Ay.capture(b.rz.SUGGEST_LOWER_PLAN.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},children:"Downgrade plan"})]}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(Y.E,{className:"h-16 w-full"})})},$=()=>{let e=g();return(0,a.jsx)(a.Fragment,{children:(()=>{switch(e.currentStep){case m.SUGGEST_LOWER_PLAN:return(0,a.jsx)(Z,{});case m.FEATURES_TO_TRY:return(0,a.jsx)(G,{});case m.KTLO_OFFER:return(0,a.jsx)(V,{});case m.FEEDBACK:return(0,a.jsx)(P,{});case m.FINAL_CONFIRMATION:return(0,a.jsx)(K,{});default:return null}})()})};var Q=r(8974),J=r(63424),X=r(45456),ee=r(52873),et=r(69994),er=r(92763),ea=r(87252),es=r(30849),el=r(89931);let en=e=>{let{workspace:t}=e,r=(0,c._R)(t.plan),s=t.billing_period_end_date?(0,Q.GP)((0,el.ay)(t.billing_period_end_date),"MMM d, yyyy"):"";return(0,a.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,a.jsx)(es.default,{src:"/img/logo/lovable-logo-icon.svg",alt:"Lovable",width:36,height:36,className:"h-9 w-9"}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsxs)("p",{className:"text-base font-medium text-foreground",children:["You're on ",r," Plan"]}),(0,a.jsx)("p",{className:"text-base text-muted-foreground",children:t.plan_scheduled?"free"===t.plan_scheduled?"Cancels ".concat(s):"Updates ".concat(s):"Renews ".concat(s)})]})]})},ei=e=>{let{workspace:t,open:r,onOpenChange:s}=e,{createPortalSession:n,isCreatePortalSessionLoading:i,setFreePlanAsTarget:c,onDowngradeClick:d}=(0,l.et)(),u=async()=>{await n()},p=async()=>{await n()},m="free"===t.plan_scheduled;return(0,a.jsx)(o.lG,{open:r,onOpenChange:()=>{s(!1)},children:(0,a.jsxs)(o.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{children:"Manage Plan"}),(0,a.jsx)(o.rr,{children:"Subscription & Billing Settings"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-4 border-y py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-muted p-4",children:[(0,a.jsx)(en,{workspace:t}),m?(0,a.jsx)(f.$,{onClick:p,disabled:i,variant:"outline",children:i?"Opening...":"Cancel Downgrade"}):(0,a.jsx)(f.$,{variant:"outline",onClick:()=>{c(),d(),s(!1)},children:"Downgrade to Free"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.$,{variant:"secondary",onClick:u,disabled:i,className:"w-5/6",children:i?"Opening...":"View Invoices"}),(0,a.jsx)(f.$,{onClick:u,disabled:i,className:"w-full",children:i?"Opening...":"Payment Preferences"})]})]})})},eo=e=>{let{workspace:t,shouldDisableWorkspaceAdminActions:r}=e,{cancelSubscriptionChanges:s,isCancelSubscriptionChangesLoading:n}=(0,l.et)();if(!t.plan_scheduled)return null;let i=e=>{let t=(0,c._R)(e),r=(0,c.RL)(e);return r>0?"".concat(t," (").concat(r," credits)"):t},o=i(t.plan),d=i(t.plan_scheduled),u=t.billing_period_end_date?(0,Q.GP)((0,el.ay)(t.billing_period_end_date),"MMM d, yyyy"):"",p=async()=>{await s()};return(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("div",{className:"space-y-3 rounded-md bg-warning p-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(L.A,{name:"info_circle",size:"small",className:"mt-0.5 flex-shrink-0 text-warning-primary"}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-warning-primary",children:["Pending changes scheduled for ",u]}),(0,a.jsxs)("p",{className:"text-sm text-warning-primary",children:[o," â†’ ",d]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(f.$,{variant:"warning",size:"default",disabled:n||r,onClick:p,children:n?"Canceling...":"Cancel changes"})})]})]})})})},ec=e=>{let{workspace:t}=e,[r,n]=(0,s.useState)(!1),i=(0,X.X5)(),o=(0,et.D)(t),{currentPlan:d,shouldDisableWorkspaceAdminActions:u}=(0,l.et)(),{canTopUpCredits:p}=(0,er.S)(t),m=(0,J.x_)(o.currentlyConsuming,o.sources),h=(0,c._R)(d.id),{isPaidPlan:_,isLegacyPlan:g,isEnterprisePlan:v,isFreePlan:j,isLitePlan:w,isAmbassadorPlan:E}=(0,c.cb)(t.plan),y=j||w,C=()=>(!g&&!E&&!w||(null==t?void 0:t.billing_period_credits_limit)!==0&&(null==t?void 0:t.billing_period_credits_limit)!==void 0)&&!j&&!!t.billing_period_credits_limit&&!(t.billing_period_credits_limit<=0)&&!0,N=(()=>{if(y||"free"===t.plan_scheduled)return{text:"No credits will rollover",icon:"x"};if(!C())return null;let e="annual"===t.plan_type,r=t.billing_period_credits_limit;return{text:"Up to ".concat((0,ea.Q)(e?12*r:r)," credits rollover"),icon:"check"}})(),k=(()=>{if(y)return"Daily credits reset at midnight UTC";if(!C()||!o.creditsResetDate||(null==t?void 0:t.plan_scheduled)==="free")return null;let e=(e=>{let t=new Date(e);return t.setTime(t.getTime()+18e5),t})(o.creditsResetDate),r=(0,Q.GP)(e,"dd MMM 'at' h:mm a"),a=t.plan_scheduled?(0,c.RL)(t.plan_scheduled):null,s=null!=a?a:t.billing_period_credits_limit;return s?"".concat((0,ea.Q)(s)," credits reset on ").concat(r):"Monthly credits reset on ".concat(r)})();return((0,s.useEffect)(()=>{p&&x.Ay.capture(b.ZK.BILLING_PAGE.SECTION_VIEWED,{credits_remaining:o.totalRemaining,current_plan:t.plan})},[p,o.totalRemaining,t.plan]),_)?(0,a.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:[(0,a.jsx)(eo,{workspace:t,shouldDisableWorkspaceAdminActions:u}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-3",children:[(0,a.jsx)(ee.Zp,{className:"rounded-xl bg-muted p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex h-full flex-col justify-between gap-4",children:[(0,a.jsx)(en,{workspace:t}),!v&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)(f.$,{variant:"muted",size:"sm",disabled:u,onClick:()=>n(!0),children:"Manage"})})]})}),(0,a.jsx)(ee.Zp,{className:"col-span-2 rounded-xl bg-muted p-4 shadow-sm outline outline-1 outline-offset-[-1px] outline-border",children:(0,a.jsxs)("div",{className:"flex h-full flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-base font-medium text-foreground",children:"Credits remaining"}),(0,a.jsxs)("p",{className:"text-sm font-normal text-muted-foreground",children:[(0,ea.Q)(o.totalRemaining)," of"," ",(0,ea.Q)(o.totalAllocation)]})]}),(0,a.jsx)(J.bY,{progressData:o}),(o.currentlyConsuming||0===o.totalRemaining)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:relative sm:min-h-14",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:order-2",children:[(0,a.jsx)("div",{className:"ml-1 mr-0.5 h-2 w-2 rounded-full ".concat(m)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,J.bT)(o.currentlyConsuming)})]}),(N||k||o.topUpCreditsExpireDate)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:order-1",children:[N&&(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(L.A,{name:N.icon,size:"small",className:"mt-0.5 text-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:N.text})]}),k&&(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(L.A,{name:"check",size:"small",className:"mt-0.5 text-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:k})]}),o.topUpCreditsExpireDate&&(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(L.A,{name:"check",size:"small",className:"mt-0.5 text-foreground"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Top up credits expire on"," ",(0,Q.GP)(o.topUpCreditsExpireDate,"dd MMM yyyy")]})]})]})]}),p&&(0,a.jsx)("div",{className:"flex justify-end sm:absolute sm:bottom-0 sm:right-0",children:(0,a.jsx)(f.$,{variant:"muted",size:"sm",disabled:u,onClick:()=>{x.Ay.capture(b.ZK.BILLING_PAGE.BUTTON_CLICKED,{credits_remaining:o.totalRemaining,current_plan:t.plan}),i({preSelectedOption:"topup"})},children:"Top up credits"})})]})]})})]}),!v&&(0,a.jsx)(ei,{workspace:t,open:r,onOpenChange:n})]}):"inactive"!==t.plan?(0,a.jsx)(ee.Zp,{className:"flex w-full flex-col gap-4 bg-muted p-4",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["You're currently on plan: ",(0,a.jsx)("span",{className:"font-medium capitalize",children:h}),". "]})," ",(0,a.jsx)(ed,{workspace:t,children:"Manage your payment preferences and view past invoices"}),", or change your plan below."]})}):void 0},ed=e=>{let{workspace:t,children:r}=e,{createPortalSession:s,isCreatePortalSessionLoading:l}=(0,d.R)();return(0,a.jsx)("span",{role:"button",tabIndex:0,onClick:()=>{l||s({workspaceId:t.id})},onKeyDown:e=>{l||("Enter"===e.key||" "===e.key)&&s({workspaceId:t.id})},className:"inline cursor-pointer underline disabled:opacity-50","aria-disabled":l,children:r})},eu=e=>{let{workspace:t,onClose:r}=e,{targetDowngradePlan:s,setTargetDowngradePlan:n}=(0,l.et)();return(0,a.jsx)(o.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:(0,a.jsx)(_,{targetPlan:null!=s?s:void 0,onCancel:()=>{n(null),r()},workspace:t,children:(0,a.jsx)($,{})})})},ep=e=>{let{workspace:t}=e,{setPricingScenario:r}=(0,l.et)(),o="inactive"===t.plan,d=(0,c.cb)(t.plan).isEnterprisePlan;return(0,s.useEffect)(()=>{r("billing")},[r]),(0,a.jsxs)(i.Pt,{title:"Plans & credits",value:"billing",docsLink:"https://docs.lovable.dev/user-guides/messaging-limits",children:[o?(0,a.jsxs)("span",{children:["Your subscription is currently ",(0,a.jsx)("span",{className:"font-medium",children:"inactive"}),". You can select a new plan below to restore full functionality to your workspace."]}):null,(0,a.jsx)(ec,{workspace:t}),!d&&(0,a.jsx)(n.s,{showStudentDiscountCard:!0})]})}},6971:(e,t,r)=>{"use strict";r.d(t,{Y:()=>o});var a=r(53789),s=r(36119),l=r(63851),n=r(19620),i=r(69850);let o={workspace:e=>{let{workspaceId:t,userData:r}=e;return(0,a.j)({queryKey:i.a$.workspace(t),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/user/workspaces/".concat(t))).workspace},enabled:!!r&&!!t})},experimentalFeatures:e=>{let{user:t}=e;return(0,a.j)({queryKey:i.a$.experimentalFeatures(),enabled:!!t&&!!t.idToken&&(0,s.H)(t),refetchOnWindowFocus:!1,queryFn:async()=>{let e=(0,l.P)();try{return await e.get("/users/".concat(null==t?void 0:t.uid,"/experimental-features"))}catch(e){return n.logging.error("Failed to fetch experimental features",{error:e}),null}}})},contributions:e=>{let{userId:t}=e;return(0,a.j)({queryKey:i.a$.contributions(t),queryFn:async()=>t?(0,l.P)().get("/users/".concat(t,"/contributions")):{},enabled:!!t})},publicProfile:e=>{let{username:t}=e;return(0,a.j)({queryKey:i.a$.profile(t),queryFn:()=>(0,l.g)().get("/profile/".concat(t)),enabled:!!t,staleTime:36e5,retry:!1})},studentDomains:()=>(0,a.j)({queryKey:i.a$.studentDomains(),queryFn:async()=>(0,l.P)().get("/user/student/domains")}),toolApprovalPreferences:()=>(0,a.j)({queryKey:i.a$.toolApprovalPreferences(),queryFn:async()=>(0,l.P)().get("/user/preferences/tool-preferences"),staleTime:6e5})}},7204:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});var a=r(40074);let s=async e=>{let{projectId:t,deploymentId:r}=e;if(!t)throw Error("Project ID is required");let s=a.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",l=new URL("".concat(s,"://deployments.").concat("lovable.app"));(l=new URL("https://proxy-worker.lovable.run")).pathname="/__l5e/proxy/new-deployment";let n=await fetch(l.toString(),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({project_id:t,deployment_id:r})});if(!n.ok)throw Error("Failed to update deployment ID: ".concat(n.status));return n}},8904:(e,t,r)=>{"use strict";r.d(t,{U:()=>c});var a=r(18502),s=r(61374),l=r(82149),n=r(63851),i=r(69850),o=r(74507);let c=e=>{let t=(0,l.mb)(e=>e.projectId),{permitted:r}=(0,s.J)(o.eZ.ManageProjectSettings),{data:c,isLoading:d}=(0,a.I)({queryKey:i.gO.integration(null!=e?e:"","supabase"),queryFn:async()=>{let t=await (0,n.P)().get("/projects/".concat(e,"/integrations/supabase"));return""===t.supabase_project_id?null:t},enabled:!!e&&t===e&&r});return{supabaseIntegrationData:c,isSupabaseIntegrationDataLoading:d}}},21016:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,f:()=>l});var a=r(95661),s=r(32738);let l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},n=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let t=(0,s.A)(),r=(0,a.useMemo)(()=>"number"==typeof e?e:l[e],[e]);return(0,a.useMemo)(()=>void 0!==t.width&&t.width<r,[t.width,r])}},21227:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var a=r(54436);let s=()=>{let e={},t=(0,a.R)("_fbc");t&&(e.fbc=t);let r=(0,a.R)("_fbp");r&&(e.fbp=r);let s=(0,a.R)("_ttp");s&&(e.ttp=s);let l=(0,a.R)("ttclid");return l&&(e.ttclid=l),e}},21789:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,k:()=>i});var a=r(77145),s=r(95661);let l=(0,s.createContext)(null),n=()=>(0,s.useContext)(l),i=e=>{let{children:t,searchParams:r}=e;return(0,a.jsx)(l.Provider,{value:r,children:t})}},24092:(e,t,r)=>{"use strict";r.d(t,{E:()=>u});var a=r(77145),s=r(36137),l=r(96373),n=r(95661),i=r(52811),o=r(69730),c=r(27458),d=r(56024);let u=e=>{let{title:t,description:r,children:u,open:p,onOpenChange:m,className:h}=e;return(0,n.useEffect)(()=>(p?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[p]),(0,a.jsx)(s.lG,{open:p,onOpenChange:m,children:(0,a.jsx)(s.ZJ,{children:(0,a.jsxs)(s.Cf,{className:"fixed inset-0 z-[10000] flex items-center justify-center overflow-y-auto bg-background",onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,a.jsxs)(l.s6,{children:[(0,a.jsx)(s.L3,{children:t}),(0,a.jsx)(s.rr,{children:r})]}),(0,a.jsxs)("div",{className:(0,d.cn)("flex max-h-full w-full max-w-96 flex-col gap-6 px-4 py-4 md:px-1",h),children:[(0,a.jsx)(c.Fy,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h2",{className:"mr-auto text-2xl md:text-3xl",children:t}),(0,a.jsx)("p",{className:"w-full",children:r})]}),u]}),(0,a.jsx)("div",{className:"absolute right-2 top-2 md:right-8 md:top-8",children:(0,a.jsx)(s.HM,{asChild:!0,children:(0,a.jsx)(i.$,{className:"hover:bg-transparent hover:opacity-75",variant:"ghost",children:(0,a.jsx)(o.A,{name:"x",size:"small"})})})})]})})})}},25080:(e,t,r)=>{"use strict";r.d(t,{Ft:()=>u,K4:()=>c,_A:()=>o,yj:()=>d});var a=r(95661),s=r(40911),l=r(99989),n=r(74507),i=r(61850);function o(e){let{workspaceId:t}=e,[r,o]=(0,a.useState)({query:"",status:"all",limit:i.m,offset:0}),{data:c,isLoading:d,error:u}=(0,s.I)({...l.y.searchWorkspaceMemberships({workspaceId:t,params:r}),permission:n.eZ.ViewWorkspaceMembers}),p=(0,a.useCallback)(e=>{o(t=>{let r={...t,...e};return(void 0!==e.query||void 0!==e.status||void 0!==e.roles)&&(r.offset=0),r})},[]),m=(0,a.useCallback)(()=>{(null==c?void 0:c.has_more)&&o(e=>({...e,offset:(e.offset||0)+i.m}))},[null==c?void 0:c.has_more]);return{members:(null==c?void 0:c.members)||[],total:(null==c?void 0:c.total)||0,hasMore:(null==c?void 0:c.has_more)||!1,isLoading:d,error:u,search:p,loadMore:m,searchParams:r}}function c(e){let{workspaceId:t}=e,{data:r,isLoading:a,error:i}=(0,s.I)({...l.y.searchWorkspaceMemberships({workspaceId:t,params:{query:"",status:"active",roles:["owner"],limit:1}}),permission:n.eZ.ViewWorkspaceMembers});return{owner:(null==r?void 0:r.members[0])||null,isLoading:a,error:i}}function d(e){let{workspaceId:t,status:r="active",enabled:a=!0}=e,{data:i}=(0,s.I)({...l.y.searchWorkspaceMemberships({workspaceId:t,params:{query:"",status:r,limit:1}}),permission:n.eZ.ViewWorkspaceMembers,enabled:a&&!!t});return{memberCount:(null==i?void 0:i.total)||0}}function u(e){let{workspaceId:t}=e,{data:r,isLoading:a}=(0,s.I)({...l.y.builderCount({workspaceId:t}),permission:n.eZ.ViewWorkspaceMembers,enabled:!!t});return{builderCount:r||0,isLoading:a}}},26158:(e,t,r)=>{"use strict";r.d(t,{G1:()=>_,Jz:()=>m,Pt:()=>h,WQ:()=>p,cY:()=>d,mm:()=>u});var a=r(77145),s=r(34400),l=r(47679),n=r(69730),i=r(21016),o=r(56024),c=r(39055);let d=e=>{let{href:t,className:r}=e;return(0,a.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:(0,o.cn)("flex items-center gap-1 text-sm text-muted-foreground duration-150 ease-in-out hover:text-muted-foreground/80",r),children:[(0,a.jsx)(n.A,{name:"question_circle",size:"small"}),"Docs"]})},u=e=>{let{children:t,className:r,...l}=e;return(0,a.jsx)(s.tU,{className:(0,o.cn)("mt-0 flex w-full flex-1 flex-col items-start overflow-hidden md:flex-row",r),orientation:"vertical",...l,children:t})},p=e=>{let{children:t,className:r,hasActiveTab:l,...n}=e;return(0,a.jsxs)(s.j7,{className:(0,o.cn)("mt-[22px] flex h-full w-full flex-col gap-0.5 overflow-y-auto px-4 py-6 md:mt-0 md:w-[240px] md:flex-nowrap md:border-r",r,l?"hidden md:flex":"flex"),...n,children:[(0,a.jsx)(g,{hideBackButton:!0,className:"mt-[22px]",children:"Settings"}),t]})},m=e=>{let{children:t,className:r,...l}=e;return(0,a.jsx)(s.Xi,{className:(0,o.cn)("flex min-h-10 w-full items-center justify-start gap-3 rounded-md px-2.5 py-2 text-start text-base data-[state=active]:bg-muted hover:bg-muted-hover md:min-h-8 md:w-auto md:gap-2 md:text-sm [&>svg]:size-5 md:[&>svg]:size-4",r),...l,children:t})},h=e=>{let{children:t,className:r,title:l,description:n,docsLink:i,descriptionAction:u,badge:p,customBadge:m,...h}=e;return(0,a.jsxs)(s.av,{className:(0,o.cn)("flex max-h-full w-full flex-1 flex-col gap-6 overflow-y-auto px-6 pb-6 pt-20 data-[state=inactive]:hidden focus:outline-none md:px-10 md:pt-6",r),...h,children:[l&&(0,a.jsxs)("div",{className:"hidden w-full flex-col gap-2 border-b pb-3 md:flex",children:[(0,a.jsxs)("h4",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,a.jsx)("span",{"data-testid":"settings-tab-title",children:l}),p&&(0,a.jsx)(c.x,{badge:p}),m]}),n&&(0,a.jsxs)("div",{className:(0,o.cn)("flex items-start justify-between gap-2 text-sm text-muted-foreground"),children:[(0,a.jsx)("div",{className:"",children:n}),i&&(0,a.jsx)(d,{href:i}),u&&u]})]}),(0,a.jsx)(g,{descriptionAction:u,children:l}),t]})},_=e=>{let{title:t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("mb-1 mt-6 px-3 text-sm font-medium text-muted-foreground first:mt-0 md:text-xs"),children:t})},g=e=>{let{children:t,className:r,hideBackButton:s=!1,descriptionAction:c,...d}=e,{openSettings:u}=(0,l.t)();return(0,i.A)("md")?(0,a.jsxs)("div",{className:(0,o.cn)("absolute inset-x-0 top-0 z-20 flex min-h-8 items-center justify-between border-b bg-background px-2 py-3 md:hidden",r),...d,children:[(0,a.jsx)("div",{className:"flex items-baseline",children:!s&&(0,a.jsxs)("button",{className:(0,o.cn)("flex items-center gap-1 text-base md:text-sm"),onClick:()=>u("settings"),"aria-label":"Back to settings menu",children:[(0,a.jsx)(n.A,{name:"chevron_left",size:"default"})," Settings"]})}),(0,a.jsx)("div",{className:"absolute left-1/2 flex -translate-x-1/2 items-baseline justify-center text-center text-lg font-medium","data-testid":"settings-tab-mobile-title",children:t}),(0,a.jsx)("div",{className:"flex min-h-7 items-baseline pr-0.5",children:c})]}):null}},27458:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>F,I_:()=>W,Qn:()=>U,Wu:()=>K,gu:()=>M});var a=r(77145),s=r(71855),l=r(72035),n=r(67336),i=r(43646),o=r(85796),c=r(55950),d=r(88281),u=r(34975),p=r(9516),m=r(91111),h=r(50551),_=r(19993),g=r(83696),x=r(82341),f=r(91638),v=r(24098),j=r(61424),w=r(2479),b=r(83649),E=r(92976),y=r(8369),C=r(13870),N=r(58219),k=r(75962),P=r(57550),I=r(51854),D=r(31740),A=r(5423),S=r(94634),L=r(78181),T=r(68686),O=r(18229);let R={Anthropic:p.default,Apple:N.default,BuilderIO:s.default,Discord:c.default,Figma:n.default,FigmaColor:l.default,GitHub:k.default,Google:d.default,ImagiLogotype:u.default,Linkedin:f.default,Lovable:w.default,LovableMonotone:i.default,LovableWithTextDark:v.default,LovableWithTextLight:j.default,OpenAILogomark:m.default,OpenAILogotype:o.default,Outlook:P.default,PayPal:b.default,ReactLogo:I.default,Reddit:E.default,Resend:h.default,ShadcnLogo:D.default,ShopifyLogomark:y.default,ShopifyLogotype:C.default,Stripe:_.default,Supabase:g.default,TailwindLogo:A.default,ThreeJS:x.default,TypescriptLogo:S.default,Vite:L.default,X:T.default,Youtube:O.default},M=e=>{let{name:t,...r}=e,s=R[t];return(0,a.jsx)(s,{fill:"currentColor",...r})},K=e=>(0,a.jsx)(M,{...e,name:"Supabase"}),F=e=>(0,a.jsx)(M,{...e,name:"Lovable"}),U=e=>(0,a.jsx)(M,{...e,name:"LovableWithTextLight"}),W=e=>(0,a.jsx)(M,{...e,name:"LovableWithTextDark"})},27623:(e,t,r)=>{"use strict";r.d(t,{KU:()=>g,BK:()=>v});var a=r(95661),s=r(92912),l=r(51762),n=r(39528),i=r(77145),o=r(49974),c=r(51433),d=r(54557),u=r(72632),p=r(20247),m=r(52811),h=r(27458);function _(e){let{title:t,subtitle:r}=e;return(0,i.jsxs)(p.Cf,{className:"max-h-[90vh] max-w-[425px] overflow-y-auto",children:[(0,i.jsxs)(p.c7,{className:"space-y-4",children:[(0,i.jsx)(h.Fy,{className:"size-9 shrink-0"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p.L3,{className:"mb-2 text-3xl font-medium",children:t}),(0,i.jsx)("p",{className:"text-sm text-foreground",children:r})]})]}),(0,i.jsxs)(p.Es,{className:"pt-4",children:[(0,i.jsx)(p.HM,{asChild:!0,children:(0,i.jsx)(m.$,{variant:"decline",className:"flex-1",children:"Cancel"})}),(0,i.jsx)(m.$,{className:"flex-1",variant:"default",onClick:()=>{window.open("https://enterpriseform.lovable.app/","_blank, no","noopener,noreferrer")},children:"Contact Sales"})]})]})}var g=function(e){return e.BIZ_TEMPLATES="BIZ_TEMPLATES",e.BIZ_PERSONAL_PROJECT="BIZ_PERSONAL_PROJECT",e.BIZ_SSO="BIZ_SSO",e.BIZ_WEBSITE_ACCESS="BIZ_WEBSITE_ACCESS",e.BIZ_DATA_OPT_OUT="BIZ_DATA_OPT_OUT",e.ENTERPRISE_RESTRICT_INVITATIONS="ENTERPRISE_RESTRICT_INVITATIONS",e.ENTERPRISE_PUBLISH_PERMISSION_LEVEL="ENTERPRISE_PUBLISH_PERMISSION_LEVEL",e.PRO_SUPPORT="PRO_SUPPORT",e.PRO_VIEWER_INVITE_LINK="PRO_VIEWER_INVITE_LINK",e.PRO_SEND_ADMIN_INVITE="PRO_SEND_ADMIN_INVITE",e.PRO_SEND_VIEWER_INVITE="PRO_SEND_VIEWER_INVITE",e.PRO_CHANGE_VIEWER_ROLE="PRO_CHANGE_VIEWER_ROLE",e.PRO_CHANGE_ADMIN_ROLE="PRO_CHANGE_ADMIN_ROLE",e.PRO_DOMAIN_CONNECT="PRO_DOMAIN_CONNECT",e.PRO_HIDE_BADGE="PRO_HIDE_BADGE",e.PRO_CHANGE_CLOUD_INSTANCE_SIZE="PRO_CHANGE_CLOUD_INSTANCE_SIZE",e.PRO_SEND_ADMIN_COLLABORATOR="PRO_SEND_ADMIN_COLLABORATOR",e.PRO_SEND_VIEWER_COLLABORATOR="PRO_SEND_VIEWER_COLLABORATOR",e.PRO_CHANGE_COLLABORATOR_TO_ADMIN="PRO_CHANGE_COLLABORATOR_TO_ADMIN",e.PRO_CHANGE_COLLABORATOR_TO_VIEWER="PRO_CHANGE_COLLABORATOR_TO_VIEWER",e}({});let x={BIZ_TEMPLATES:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to use templates.",targetPlanCategory:"biz"},BIZ_PERSONAL_PROJECT:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to make a project personal.",targetPlanCategory:"biz"},BIZ_SSO:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to add SSO providers.",targetPlanCategory:"biz"},BIZ_WEBSITE_ACCESS:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to make published websites accessible only to logged in workspace members.",targetPlanCategory:"biz"},ENTERPRISE_PUBLISH_PERMISSION_LEVEL:{title:"Upgrade to Enterprise",subtitle:"Configuring who can publish projects externally is only available on Enterprise plans.",targetPlanCategory:"enterprise"},BIZ_DATA_OPT_OUT:{title:"Upgrade to Business",subtitle:"Data collection opt-out is only available on Business plan and above.",targetPlanCategory:"biz"},ENTERPRISE_RESTRICT_INVITATIONS:{title:"Upgrade to Enterprise",subtitle:"Restricting workspace invitations is only available on Enterprise plans.",targetPlanCategory:"enterprise"},PRO_SUPPORT:{title:"Upgrade to Pro",subtitle:"You need to be on a paid plan to access direct support.",targetPlanCategory:"pro"},PRO_VIEWER_INVITE_LINK:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to create a viewer invite link.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewers.",targetPlanCategory:"pro"},PRO_SEND_ADMIN_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite admins.",targetPlanCategory:"pro"},PRO_CHANGE_ADMIN_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to admin.",targetPlanCategory:"pro"},PRO_CHANGE_VIEWER_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to viewer.",targetPlanCategory:"pro"},PRO_DOMAIN_CONNECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to connect a domain.",targetPlanCategory:"pro"},PRO_HIDE_BADGE:{title:"Upgrade to Pro",subtitle:'You need to be on a pro plan to hide the "Edit with Lovable" badge.',targetPlanCategory:"pro"},PRO_CHANGE_CLOUD_INSTANCE_SIZE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the cloud instance size.",targetPlanCategory:"pro"},PRO_SEND_ADMIN_COLLABORATOR:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite admin collaborators.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_COLLABORATOR:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewer collaborators.",targetPlanCategory:"pro"},PRO_CHANGE_COLLABORATOR_TO_ADMIN:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change a collaborator's role to admin.",targetPlanCategory:"pro"},PRO_CHANGE_COLLABORATOR_TO_VIEWER:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change a collaborator's role to viewer.",targetPlanCategory:"pro"}},f=e=>{let{scenario:t}=e,r=x[t],{currentPlan:a,planType:l,getDisplayPrice:p}=(0,o.et)(),m=(0,d.Y)({currentPlan:a,targetPlanCategory:r.targetPlanCategory});return 0===m.length&&"enterprise"===r.targetPlanCategory?(0,i.jsx)(_,{title:r.title,subtitle:r.subtitle}):(0,i.jsx)(c.n,{targetPlan:m[0],availablePlans:m,title:r.title,subtitle:r.subtitle,showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!0,showPlanDropdown:!1,handleConfirm:(e,r)=>{t&&r&&s.Ay.capture(n.t3.UPGRADE_CLICKED,{scenario:t,current_plan_id:a.id,current_plan_type:a.type,target_plan_id:r,target_plan_type:l,plan_type:(0,u.m6)(r),plan_price:p(r)})}})},v=()=>{let e=(0,l.f)(f);return(0,a.useCallback)(t=>{s.Ay.capture(n.t3.DIALOG_SHOWN,{scenario:t}),e({childProps:{onClose:()=>e(!1),scenario:t}})},[e])}},27835:(e,t,r)=>{"use strict";r.d(t,{WorkspacePaymentFailedDialog:()=>f,Yv:()=>x,a_:()=>_,cK:()=>h,wB:()=>g});var a=r(77145),s=r(13410),l=r(92912),n=r(95661),i=r(31088),o=r(83220),c=r(45456),d=r(91169),u=r(52811),p=r(24092),m=r(39528);let h="payment_status",_="plan_id",g="change_type",x="failed",f=()=>{let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(),[c,d]=(0,n.useState)(),u=(0,s.useSearchParams)(),f=(0,s.useRouter)(),j=(0,s.usePathname)(),w=(0,o.j4)(e=>e.currentWorkspace),b=(0,n.useCallback)(()=>{let e=new URLSearchParams(u.toString());e.delete(h),e.delete(_),e.delete(g);let t=j+"?"+e.toString();f.replace(t,{scroll:!1})},[f,u,j]);return(0,n.useEffect)(()=>{i(u.get(_));let e=u.get(g);d(e),u.get(h)===x&&("topup"===e&&w&&l.Ay.capture(m.ZK.PURCHASE.FAILED,{current_plan:w.plan}),t(!0))},[u,w]),(0,a.jsx)(p.E,{title:"topup"===c?"Top-up cancelled":"Payment failed",description:"topup"===c?"Your credit top-up couldn't be completed":"Payment couldn't complete or has lapsed on this workspace.",open:e,onOpenChange:e=>{t(e),!e&&(u.has(h)||u.has(_)||u.has(g))&&b()},children:(0,a.jsx)(v,{closeDialog:()=>{t(!1),b()},currentWorkspace:w,planId:r,changeType:c})})},v=e=>{let{closeDialog:t,currentWorkspace:r,planId:s,changeType:l}=e,{createPortalSession:n,isCreatePortalSessionLoading:i,checkoutLoading:o,toCheckout:p}=(0,d.R)(),m=(0,c.X5)(),h=async()=>{r&&s&&"topup"!==l&&await p({plan:s,workspaceId:r.id,changeType:l})},_="topup"===l?{text:"Retry Top-up",onClick:()=>{t(),m({preSelectedOption:"topup"})},loading:!1,disabled:!1}:{text:"Retry payment",onClick:h,loading:o===s,disabled:!s||!!o||i};return(0,a.jsxs)("div",{className:"mt-2 flex w-full gap-6",children:[(0,a.jsx)(u.$,{className:"flex-1",variant:"secondary",onClick:t,children:"Go Back"}),(0,a.jsx)(u.$,{onClick:_.onClick,className:"flex-1",loading:_.loading,disabled:_.disabled,children:_.text})]})}},32738:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(95661);let s=()=>{let[e,t]=(0,a.useState)({width:void 0,height:void 0});return(0,a.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},33817:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>o,Hj:()=>c,XI:()=>n,nA:()=>u,nd:()=>d});var a=r(77145),s=r(95661),l=r(56024);let n=s.forwardRef((e,t)=>{let{className:r,containerClassName:s,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("relative max-h-full w-full overflow-auto",s),children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...n})})});n.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},33895:(e,t,r)=>{"use strict";r.d(t,{I7:()=>n,Pf:()=>l,y:()=>i});var a=r(69850),s=r(99989);async function l(e,t){let r=s.y.workspaceMemberships({workspaceId:t});await e.cancelQueries({queryKey:r.queryKey})}function n(e,t,r,a,l,n){var i,o;let c=s.y.workspaceMemberships({workspaceId:t}),d=e.getQueryData(c.queryKey);if(d&&e.setQueryData(c.queryKey,{...d,members:a(d.members),total:n?n(d.total):d.total,limit:d.limit,offset:null!=(i=d.offset)?i:0,has_more:d.has_more}),r){let i=s.y.searchWorkspaceMemberships({workspaceId:t,params:r}),c=e.getQueryData(i.queryKey);if(c){let t=l?l(c.members):a(c.members);e.setQueryData(i.queryKey,{...c,members:t,total:n?n(c.total):c.total,limit:c.limit,offset:null!=(o=c.offset)?o:0,has_more:c.has_more})}}}function i(e,t,r,l){let n={refetchType:(null==l?void 0:l.refetch)?"active":"none"};if(null==l?void 0:l.invalidateAll){e.invalidateQueries({queryKey:[...a.workspaceKeys.detail(t),"memberships"],...n}),e.invalidateQueries({queryKey:a.workspaceKeys.detail(t),...n});return}e.invalidateQueries({queryKey:s.y.workspaceMemberships({workspaceId:t}).queryKey,...n}),r&&e.invalidateQueries({queryKey:s.y.searchWorkspaceMemberships({workspaceId:t,params:r}).queryKey,...n})}},36119:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});let a=e=>e.email_verified||"password"!==e.source_sign_in_provider},36704:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var a=r(87299),s=r(6698),l=r(31088),n=r(83473),i=r(63851),o=r(69850);let c=()=>{let e=(0,a.jE)(),{mutateAsync:t,isPending:r}=(0,s.n)({mutationFn:async e=>{let{projectId:t,accessLevel:r,message:a}=e;return(0,i.P)().post("/projects/".concat(t,"/access-requests"),{access_level:r,message:a||""})},onSuccess:()=>{l.toast.success("Access request sent",{description:"The project owner will be notified of your request."})},onError:e=>{(0,n.Ni)(e)}}),{mutateAsync:c,isPending:d}=(0,s.n)({mutationFn:async e=>(0,i.P)().get("/projects/".concat(e,"/access-requests/me")),onError:e=>{(0,n.Ni)(e)}}),{mutate:u,isPending:p}=(0,s.n)({mutationFn:async e=>{let{projectId:t,requestId:r}=e;return(0,i.P)().patch("/projects/".concat(t,"/access-requests/").concat(r),{status:"accepted"})},onSuccess:(t,r)=>{l.toast.success("Access request approved"),e.invalidateQueries({queryKey:o.gO.accessRequests(r.projectId)}),e.invalidateQueries({queryKey:o.gO.collaborators(r.projectId)}),r.workspaceId&&e.invalidateQueries({queryKey:o.workspaceKeys.projectAccessRequests(r.workspaceId)})},onError:e=>{(0,n.Ni)(e)}}),{mutate:m,isPending:h}=(0,s.n)({mutationFn:async e=>{let{projectId:t,requestId:r}=e,a=(0,i.P)();await a.patch("/projects/".concat(t,"/access-requests/").concat(r),{status:"rejected"})},onSuccess:(t,r)=>{l.toast.info("Access request declined"),e.invalidateQueries({queryKey:o.gO.accessRequests(r.projectId)}),r.workspaceId&&e.invalidateQueries({queryKey:o.workspaceKeys.projectAccessRequests(r.workspaceId)})},onError:e=>{(0,n.Ni)(e)}});return{getCurrentUserAccessRequestAsync:c,isGettingCurrentUserAccessRequest:d,createRequestAsync:t,acceptRequest:u,declineRequest:m,isCreating:r,isAccepting:p,isDeclining:h}}},39055:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var a=r(77145),s=r(67844),l=r(56024);let n={pro:"brand-twilight",business:"brand-twilight",enterprise:"brand-twilight",admin:"brand-saffron",labs:"brand-twilight",internal:"secondary",soon:"brand-saffron"},i={pro:"pro",business:"business",enterprise:"enterprise",admin:"admin",labs:"labs",internal:"internal",soon:"Coming Soon"},o=e=>{let{badge:t,className:r}=e;return(0,a.jsx)(s.E,{variant:n[t],className:(0,l.cn)("capitalize",r),children:i[t]})}},39528:(e,t,r)=>{"use strict";r.d(t,{$6:()=>a,AC:()=>v,LT:()=>_,Ue:()=>s,ZK:()=>d,aw:()=>i,fF:()=>h,h6:()=>u,iK:()=>m,lX:()=>j,lY:()=>c,mb:()=>f,nA:()=>n,qE:()=>g,rz:()=>l,t3:()=>o,yD:()=>p,yx:()=>x});let a={FIRST_INTERACT_AFTER_GEN:"project:first_interact_after_gen",TABS:{CHAT_OPENED:"project:tabs:chat_opened",HISTORY_OPENED:"project:tabs:history_opened"},HEADER:{SETTINGS_OPENED:"project:header:settings_opened",SIDEBAR_TOGGLED:"project:header:sidebar_toggled",CHAT_FULLSCREEN_TOGGLED:"project:header:chat_fullscreen_toggled"},SETTINGS:{AGENT_MODE_DISABLED:"project:settings:agent_mode_disabled"},CREATION:{DONE_AND_RETAINED_VIEW:"project:creation:done_and_retained_view",API_KEY_DETECTED:"project:creation:api_key_detected",API_KEY_WARNING_DISMISSED:"project:creation:api_key_warning_dismissed"},HISTORY:{CARD_SELECTED:"project:history:card_selected"},BOOKMARK:{ADDED:"project:bookmark:added",REMOVED:"project:bookmark:removed"},CODE_CARD:{VIEW_CODE_CLICKED:"project:code_card:view_code_clicked",RESTORE_CLICKED:"project:code_card:restore_clicked",PREVIEW_CLICKED:"project:code_card:preview_clicked"},MERMAID:{DIAGRAM_OPENED:"project:mermaid:diagram_opened"},ELLIPSIS:{RESTORE_CLICKED:"project:ellipsis:restore_clicked",PREVIEW_CLICKED:"project:ellipsis:preview_clicked",COPY_LINK_CLICKED:"project:ellipsis:copy_link_clicked"},CONSOLE:{EXITED_VIA_CARD:"project:console:exited_via_card",EXITED_VIA_BUTTON:"project:console:exited_via_button",DIFF_COPIED:"project:console:diff_copied",GITHUB_LINK_CLICKED:"project:console:github_link_clicked",RESTORE_VERSION_CLICKED:"project:console:restore_version_clicked"},PREVIEW:{DEVICE_CHANGED:"project:preview:device_changed"},KNOWLEDGE:{SAVED:"project:knowledge:saved"},CODE_EDITOR:{SAVED:"project:code_editor:saved",DISCARDED:"project:code_editor:discarded",DEV_MODE_TOGGLE_PRESSED:"project:code_editor:dev_mode_toggle_pressed"},CHAT:{MESSAGE_SENT:"chat_message_sent",API_KEY_DETECTED:"project:chat:api_key_detected",API_KEY_WARNING_DISMISSED:"project:chat:api_key_warning_dismissed",IMAGE_COPIED:"project:chat:image_copied",IMAGE_ADDED_TO_INPUT:"project:chat:image_added_to_input",VOICE_INPUT_STOPPED:"project:chat:voice_input_stopped",SCREENSHOT_CAPTURED:"project:chat:screenshot_captured",NOTIFICATIONS_ENABLED:"project:chat:notifications_enabled",SUGGESTIONS_SHOWN:"project:chat:suggestions_shown",SUGGESTION_CLICKED:"project:chat:suggestion_clicked",CHAT_REFERENCE_SELECTED:"project:chat:chat_reference_selected",ENABLE_CLOUD_SHOWN:"project:chat:enable_cloud_shown",ENABLE_CLOUD_ALLOW:"project:chat:enable_cloud_allow",ENABLE_CLOUD_DECLINE:"project:chat:enable_cloud_decline"},CHAT_ACTIONS:{MCP_CONNECT_CLICKED:"project:chat:actions:mcp_connect_clicked"},INPUT_ACTION_MENU:{MANAGE_INTEGRATIONS_CLICKED:"project:input_action_menu:integrations:manage_clicked",MCP_SERVER_CLICKED:"project:input_action_menu:integrations:mcp_server_clicked"},ONBOARDING_TOUR:{STEP_VIEWED_ONBOARDING_START:"project:onboarding_tour:step_viewed:onboarding-start",STEP_VIEWED_VISUAL_EDITOR_TOGGLE:"project:onboarding_tour:step_viewed:visual-editor-toggle",STEP_VIEWED_MAIN_MENU:"project:onboarding_tour:step_viewed:main-menu",STEP_VIEWED_PREVIEW_URL_BAR:"project:onboarding_tour:step_viewed:preview-url-bar",STEP_VIEWED_SUPABASE_DROPDOWN:"project:onboarding_tour:step_viewed:supabase-dropdown",STEP_VIEWED_SHARE_MENU:"project:onboarding_tour:step_viewed:share-menu",COMPLETED:"project:onboarding_tour:completed",SKIPPED:"project:onboarding_tour:skipped"},COMMUNITY:{PROJECT_CLICKED:"project:community:project_clicked",PROJECT_DWELL_TIME:"project:community:project_dwell_time",FILTER_CHANGED:"project:community:filter_changed",CATEGORY_CHANGED:"project:community:category_changed",SHOW_MORE_CLICKED:"project:community:show_more_clicked"},VISUAL_EDITS:{TOGGLED:"visual_editor_toggled"},EMBED:{CODE_COPIED:"project:embed:code_copied",SUCCESS_DIALOG_CLICKED:"project:embed:success_dialog_clicked"},COLLABORATION:{DROPDOWN_OPENED:"project:collaboration:dropdown_opened",COLLABORATOR_INVITED:"project:collaboration:collaborator_invited",COLLABORATOR_ROLE_CHANGED:"project:collaboration:collaborator_role_changed",COLLABORATOR_REMOVE_INITIATED:"project:collaboration:collaborator_remove_initiated",REMOVE_DIALOG_CONFIRMED:"project:collaboration:remove_dialog_confirmed",REMOVE_DIALOG_CANCELLED:"project:collaboration:remove_dialog_cancelled",SECRET_LINK_CREATED:"project:collaboration:secret_link_created",SECRET_LINK_COPIED:"project:collaboration:secret_link_copied",SECRET_LINK_REMOVED:"project:collaboration:secret_link_removed",PREVIEW_LINK_COPIED:"project:collaboration:preview_link_copied",PREVIEW_BUTTON_CLICKED:"project:collaboration:preview_button_clicked",PUBLISH_BUTTON_CLICKED:"project:collaboration:publish_button_clicked",PROJECT_ACCESS_REQUEST_CLICKED:"project:collaboration:project_access_request_clicked",PROJECT_ACCESS_REQUEST_CREATED:"project:collaboration:project_access_request_created",PROJECT_ACCESS_REQUEST_ACCEPTED:"project:collaboration:project_access_request_accepted",PROJECT_ACCESS_REQUEST_REJECTED:"project:collaboration:project_access_request_rejected",PROJECT_ACCESS_REQUEST_ALREADY_SENT:"project:collaboration:project_access_request_already_sent"},SECURITY:{NUDGE_REVIEW_CLICKED:"project:security:nudge:review_clicked",PUBLISH_SCAN_CLICKED:"project:security:publish:scan_clicked",PUBLISH_REVIEW_CLICKED:"project:security:publish:review_clicked",PUBLISH_CLICKED:"project:security:publish:clicked",VIEW_REVIEW_CLICKED:"project:security:view:review_clicked",VIEW_TRY_FIX_CLICKED:"project:security:view:try_fix_clicked"},CUSTOM_DOMAIN:{CLICKED:"project:custom_domain:clicked",PUBLISH_CANCELLED:"project:custom_domain:publish_cancelled",ENTRI_MODAL_SHOWN:"project:custom_domain:entri_modal_shown",ENTRI_MODAL_CANCELLED:"project:custom_domain:entri_modal_cancelled",ENTRI_MODAL_SUCCEEDED:"project:custom_domain:entri_modal_succeeded",DELETE_CLICKED:"project:custom_domain:delete_clicked",RETRY_CLICKED:"project:custom_domain:retry_clicked",COMPLETE_SETUP_CLICKED:"project:custom_domain:complete_setup_clicked",SET_PRIMARY_CLICKED:"project:custom_domain:set_primary_clicked",UNSET_PRIMARY_CLICKED:"project:custom_domain:unset_primary_clicked"},QUESTIONS_TOOL:{SHOWN:"project:questions_tool:shown",SUBMITTED:"project:questions_tool:submitted",SKIPPED_ALL:"project:questions_tool:skipped_all",QUESTION_SKIPPED:"project:questions_tool:question_skipped",QUESTION_ANSWERED:"project:questions_tool:question_answered",NAVIGATION_CHANGED:"project:questions_tool:navigation_changed"}},s={DIALOG:{VIEWED:"segmentation:dialog_viewed",SUBMITTED:"segmentation:dialog_submitted",SKIPPED:"segmentation:dialog_skipped",PARTIAL_SUBMIT:"segmentation:dialog_partial_submit"},STEP_VIEWED:{INVITE_STEP:"segmentation:step_viewed:invite_step"},STEP_SKIPPED:{INVITE_STEP:"segmentation:step_skipped:invite_step"},INVITE_FINISHED:"segmentation:invite_finished",BUTTON_CLICKED:{BUILD_GOAL:"segmentation:button_clicked_build_goal",PRIMARY_USE_CASE:"segmentation:button_clicked_primary_use_case",ROLE:"segmentation:button_clicked_role",HEARD_FROM:"segmentation:button_clicked_heard_from",BACK:"segmentation:button_clicked_back",SUBMIT:"segmentation:button_clicked_submit",SKIP:"segmentation:button_clicked_skip",CONTINUE_NAME_STEP:"segmentation:button_clicked_continue_name_step",CONTINUE:"segmentation:button_clicked_continue",THEME:"segmentation:button_clicked_theme"}},l={SUGGEST_LOWER_PLAN:{CONTINUE_CLICKED:"downgrade:suggest_lower_plan:continue_clicked",DOWNGRADE_CREDITS_CLICKED:"downgrade:suggest_lower_plan:downgrade_credits_clicked"},FEATURE_USAGE:{CONTINUE_CLICKED:"downgrade:feature_usage:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feature_usage:keep_plan_clicked"},FEEDBACK:{CONTINUE_CLICKED:"downgrade:feedback:continue_clicked",KEEP_PLAN_CLICKED:"downgrade:feedback:keep_plan_clicked"},KTLO_OFFER:{SWITCH_CLICKED:"downgrade:ktlo_offer:switch_clicked",CONTINUE_DOWNGRADE_CLICKED:"downgrade:ktlo_offer:continue_downgrade_clicked"},FINAL_CONFIRMATION:{CONFIRM_CLICKED:"downgrade:final_confirmation:confirm_clicked",KEEP_PLAN_CLICKED:"downgrade:final_confirmation:keep_plan_clicked"}},n={CREDIT_PLAN_CHECKOUT_CLICKED:"workspace:subscriptions:checkout_button_clicked"},i={PLAN_VIEWED:"pricing:plan:viewed",PLAN_UPGRADE_CLICKED:"pricing:plan:upgrade_clicked",PLAN_DOWNGRADE_CLICKED:"pricing:plan:downgrade_clicked",PLAN_DROPDOWN_CHANGED:"pricing:plan:dropdown_changed",GET_STARTED_CLICKED:"pricing:plan:get_started_clicked",CONTACT_US_CLICKED:"pricing:plan:contact_us_clicked",NOTIFY_ME_CLICKED:"pricing:plan:notify_me_clicked",PLAN_TYPE_CHANGED:"pricing:plan:type_changed"},o={DIALOG_SHOWN:"feature_gate:dialog_shown",UPGRADE_CLICKED:"feature_gate:upgrade_clicked"},c={UPGRADE:{SHOW:{IN_CHAT:"chat:upgrade:show:in_chat",IN_DROPDOWN:"chat:upgrade:show:in_dropdown"},BUTTON_CLICKED:{CHAT:"chat:upgrade:button_clicked:chat",NAV_BAR:"chat:upgrade:button_clicked:nav_bar",ACCOUNT_DROPDOWN:"chat:upgrade:button_clicked:account_dropdown"},CONTEXT:{OUT_OF_CREDITS:"outOfCredits",BILLING:"billing"}},OUT_OF_CREDITS_DIALOG:{DISMISS_CLICKED:"workspace:out_of_credits_dialog:dismiss_clicked",SEND_PING_CLICKED:"workspace:out_of_credits_dialog:send_ping_clicked"}},d={WORKSPACE_MODAL:{BUTTON_CLICKED:"build_credit_top_up:workspace_modal:button_clicked",PROMPT_SHOWN:"build_credit_top_up:workspace_modal:prompt_shown"},CHAT:{PROMPT_SHOWN:"build_credit_top_up:chat:prompt_shown",BUTTON_CLICKED:"build_credit_top_up:chat:button_clicked",DISMISSED:"build_credit_top_up:chat:dismissed"},BILLING_PAGE:{BUTTON_CLICKED:"build_credit_top_up:billing_page:button_clicked",SECTION_VIEWED:"build_credit_top_up:billing_page:section_viewed"},MODAL:{OPENED:"build_credit_top_up:modal:opened",CONFIRM_CLICKED:"build_credit_top_up:modal:confirm_clicked",CANCEL_CLICKED:"build_credit_top_up:modal:cancel_clicked",CLOSED:"build_credit_top_up:modal:closed"},PURCHASE:{COMPLETED:"build_credit_top_up:purchase:completed",FAILED:"build_credit_top_up:purchase:failed"}},u={OPENED_DIALOG:"referral:advocate:opened_dialog",COPIED_LINK:"referral:advocate:copied_link",LINK_CLICKED:"referral:invitee:link_clicked"},p={EXAMPLE_PROMPT:{CLICKED:"launchpad:example_prompt:clicked"},CREATE_FORM:{ATTACH_CLICKED:"launchpad:create_form:attach_clicked",ATTACH_ADD_IMAGES_CLICKED:"launchpad:create_form:attach_add_images_clicked",ATTACH_DISMISSED:"launchpad:create_form:attach_dismissed_clicked",DROPDOWN_CLICKED:"launchpad:create_form:dropdown_clicked",DROPDOWN_ATTACH_CLICKED:"launchpad:create_form:dropdown_attach_clicked",SCREENSHOT_CAPTURED:"launchpad:create_form:screenshot_captured",CLONE_CLICKED:"launchpad:create_form:clone_clicked",CLONE_ADD_IMAGES_CLICKED:"launchpad:create_form:clone_add_images_clicked",CLONE_SCREENSHOT_CAPTURED:"launchpad:create_form:clone_screenshot_captured",SUBMIT:"launchpad:create_form:submit"}},m={OPEN_TOP_MENU:"project:page_speed:open:top_menu",OPEN_PUBLISH:"project:page_speed:open:publish",REGENERATE:"project:page_speed:regenerate",STRATEGY_SELECTED:"project:page_speed:strategy_selected",CATEGORY_SELECTED:"project:page_speed:category_selected",TRY_FIX:"project:page_speed:try_fix"},h={SETTINGS_UPDATED:"account:settings:updated",SETTINGS_CANCELLED:"account:settings:cancelled",DELETE_ACCOUNT:{DIALOG_OPENED:"account:delete_account:dialog_opened",DIALOG_CLOSED:"account:delete_account:dialog_closed",CONTINUE_FROM_WORKSPACES:"account:delete_account:continue_from_workspaces",CONTINUE_FROM_EMAIL:"account:delete_account:continue_from_email",DELETION_CONFIRMED:"account:delete_account:deletion_confirmed",DELETION_SCHEDULED:"account:delete_account:deletion_scheduled",DELETION_CANCELLED:"account:delete_account:deletion_cancelled"}},_={VERIFICATION_SUCCESS:"student:verification:success",REVIEW_REQUESTED:"student:verification:review_requested"},g={MCP:{CARD_CONNECT_CLICKED:"integrations:mcp:card_connect_clicked",CARD_MANAGE_CLICKED:"integrations:mcp:card_manage_clicked",CONNECT_CLICKED:"integrations:mcp:connect_clicked",CONNECT_SUCCESS:"integrations:mcp:connect_success",CONNECT_FAILED:"integrations:mcp:connect_failed",DISCONNECT_CLICKED:"integrations:mcp:disconnect_clicked"},SHOPIFY:{ENABLE_CLICKED:"shopify:enable:clicked",ENABLE_APPROVED:"shopify:enable:approved",CREATE_NEW_CLICKED:"shopify:create_new:clicked",CLAIM_CLICKED:"shopify:claim:clicked",CLAIM_SUCCESS:"shopify:claim:success",CONNECT_CLICKED:"shopify:connect:clicked",CONNECT_SUCCESS:"shopify:connect:success"}},x={REWARD:{VIEWED:"campaign:reward:viewed",REDEEM_CLICKED:"campaign:reward:redeem_clicked",REDEEMED:"campaign:reward:redeemed",REDEEM_FAILED:"campaign:reward:redeem_failed"}},f={EDIT_FORM:{CLOSED:"project_profile:edit_form:closed",SAVE_CLICKED:"project_profile:edit_form:save_clicked",SAVED:"project_profile:edit_form:saved",FAILED:"project_profile:edit_form:failed"},CREATE_FORM:{CLOSED:"project_profile:create_form:closed",CONTINUE_FROM_INTRO_CLICKED:"project_profile:create_form:continue_from_intro_clicked",CONTINUE_FROM_DETAILS_CLICKED:"project_profile:create_form:continue_from_details_clicked",CONTINUE_FROM_MEDIA_CLICKED:"project_profile:create_form:continue_from_media_clicked",ATTACH_IMAGE_CLICKED:"project_profile:create_form:attach_image_clicked",REMOVE_IMAGE_CLICKED:"project_profile:create_form:remove_image_clicked",BACK_CLICKED:"project_profile:create_form:back_clicked",CREATE_CLICKED:"project_profile:create_form:create_clicked",CREATED:"project_profile:create_form:created",FAILED:"project_profile:create_form:failed"},PROFILE_PAGE:{VIEWED:"project_profile:profile_page:viewed",LIKE_CLICKED:"project_profile:profile_page:like_clicked",SHARE_CLICKED:"project_profile:profile_page:share_clicked",COPY_PROJECT_LINK_CLICKED:"project_profile:profile_page:copy_project_link_clicked",SHARE_X_CLICKED:"project_profile:profile_page:share_x_clicked",SHARE_LINKEDIN_CLICKED:"project_profile:profile_page:share_linkedin_clicked",SHARE_REDDIT_CLICKED:"project_profile:profile_page:share_reddit_clicked",SHARE_EMAIL_CLICKED:"project_profile:profile_page:share_email_clicked",SHARE_COPY_PROJECT_URL_CLICKED:"project_profile:profile_page:share_copy_project_url_clicked",SHARE_COPY_PAGE_URL_CLICKED:"project_profile:profile_page:share_copy_page_url_clicked",SHARE_NATIVE_CLICKED:"project_profile:profile_page:share_native_clicked",REMIX_CLICKED:"project_profile:profile_page:remix_clicked",OPEN_PROJECT_CLICKED:"project_profile:profile_page:open_clicked",EDIT_CLICKED:"project_profile:profile_page:edit_clicked",PREVIEW_CLICKED:"project_profile:profile_page:preview_clicked",BREADCRUMBS_CLICKED:"project_profile:profile_page:breadcrumbs_clicked",BACK_BUTTON_CLICKED:"project_profile:profile_page:back_button_clicked"},MAIN_MENU_CREATE_CLICKED:"project_profile:main_menu:create_clicked",MAIN_MENU_OPEN_CLICKED:"project_profile:main_menu:open_clicked",HOME_PAGE_CREATE_CLICKED:"project_profile:home_page:create_clicked",HOME_PAGE_CREATE_CLOSED:"project_profile:home_page:create_closed",HOME_PAGE_OPEN_CLICKED:"project_profile:home_page:open_clicked",AFTER_SHIP_CREATE_CLICKED:"project_profile:after_ship:create_clicked",PROJECT_CARD_VIEW_CLICKED:"project_profile:project_card:view_clicked"},v={CLICK:"navigation_click"},j={PROJECT_CLICKED:"discover:project_clicked"}},40488:(e,t,r)=>{"use strict";r.d(t,{nZ:()=>b,ZL:()=>w,lF:()=>E});var a=r(77145),s=r(92912),l=r(49974),n=r(64482),i=r(98805),o=r(81635),c=r(39528);let d=e=>{let{selectedPlan:t,isScheduled:r}=e,{planType:n,setPlanType:i}=(0,l.et)(),d="annual"===n;return r&&(d="annual"===r),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.d,{checked:d,disabled:!!r,onCheckedChange:e=>{i(e?"annual":"monthly"),s.Ay.capture(c.aw.PLAN_TYPE_CHANGED,{plan_id:t,plan_type:e?"annual":"monthly"})},className:"data-[state=checked]:bg-brand-twilight-primary",thumbClassName:"bg-[hsl(45_40_98%)]"}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Annual"})})]})})};var u=r(83022),p=r(95290),m=r(2231),h=r(73726),_=r(19620),g=r(53792),x=r(72632),f=r(51573),v=r(76058),j=r(56024);let w=e=>{let{children:t,className:r,suffix:s}=e,{pricingScenario:n}=(0,l.et)();return(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsxs)("div",{className:"flex w-fit flex-col justify-center gap-6",children:[(0,a.jsx)("div",{className:(0,j.cn)("grid w-fit grid-cols-1 gap-4","sm:grid-cols-2 lg:gap-6","lg:flex lg:justify-center","lg:max-w-none",r,{"max-w-[600px]":"billing"!==n}),children:t}),s]})})},b=e=>{let{children:t}=e,r=(0,l.et)();return(0,a.jsx)("div",{className:(0,j.cn)("flex flex-col gap-4",r.isLoggedOut?"min-h-72":"min-h-[350px]"),children:t})},E=()=>{let e=(0,l.et)(),t=(0,x.RL)(e.selectedProPlan),r=(0,n.f)();return(0,a.jsx)(p.kp,{label:"All features in Free, plus:",features:[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:[t," monthly credits",(0,a.jsx)(h.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:[t," credits per month + 5 daily credits that reset each day"]})})]},"num-credits"),"5 daily credits (up to 150/month)",...r?[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:["Usage-based Cloud + AI",(0,a.jsx)(h.V,{name:"info",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:["Free $25 Cloud + $1 AI usage included. This offer lasts until the end of 2025."," ",(0,a.jsx)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"underline transition-colors hover:text-muted",children:"Read more"})]})}),(0,a.jsx)(i.y,{children:"New"})]},"lovable-cloud")]:[],(0,a.jsxs)("span",{className:"flex items-start gap-1",children:["Credit rollovers",(0,a.jsx)(h.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsx)("p",{children:"Credits roll over for 1 month on monthly plans, or until the end of your annual plan."})})]},"credit-rollovers"),"Unlimited lovable.app domains","Custom domains","Remove the Lovable badge","User roles & permissions"]})},y=e=>{var t,r;let{scheduledPlan:n}=e,i=(0,l.et)(),{isBizPlan:o,isEnterprisePlan:h}=(0,x.cb)(i.currentPlan.id),_="newWorkspace"===i.pricingScenario;if(!_&&!i.showProPlan)return null;let f=(()=>{let e=i.selectedProPlan,t=e===i.currentPlan.id&&i.planType==i.currentPlan.type,r=i.isPlanDowngrade(e);return i.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{s.Ay.capture(c.aw.GET_STARTED_CLICKED,{plan_type:"pro",plan_id:e,plan_price:i.getDisplayPrice(e),user_status:"logged_out"}),i.handleLoggedOutUpgrade(e)}}:_?i.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{i.setNewWorkspaceSelectedPlan(e)},loading:!1}:n?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&i.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{i.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:i.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:h?{type:"button",text:i.getButtonText(e),variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:i.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{s.Ay.capture(c.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:i.currentPlan.id,current_plan_type:i.currentPlan.type,target_plan_id:e,target_plan_type:i.planType,plan_type:"pro",plan_price:i.getDisplayPrice(e)}),i.setTargetDowngradePlan(e),i.onDowngradeClick()}}:{type:"button",text:i.getButtonText(e),variant:o?"outline":"twilight",disabled:!1,loading:!1,testId:"pro-plan-button",onClick:async()=>{await i.handleUpgradeClicked(e)}}})(),v=n&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,j=i.getSavingsAmount(v);return(0,a.jsx)(p.Mt,{name:"Pro",title:"Designed for fast-moving teams building together in real time.",plan:null!=(t=null==n?void 0:n.id)?t:i.selectedProPlan,planType:null!=(r=null==n?void 0:n.type)?r:i.planType,description:(0,a.jsx)(d,{selectedPlan:v,isScheduled:null==n?void 0:n.type}),isPopular:!o&&!n,savingsAmount:j,isScheduled:_||null==n?void 0:n.type,highlighted:_&&i.newWorkspaceSelectedPlan===i.selectedProPlan,priceSubtitle:"shared across unlimited users",children:(0,a.jsxs)(b,{children:[(0,a.jsxs)(p.vi,{children:[(0,a.jsx)(u.O,{...f}),_?(0,a.jsx)(m.h,{options:g.pB,selectedOption:i.selectedProPlan,onSelect:e=>{i.setNewWorkspaceSelectedPlan(e),i.setSelectedProPlan(e)}}):(0,a.jsx)(m.h,{options:g.pB,selectedOption:n&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,disabled:!!n||i.shouldDisableWorkspaceAdminActions,onSelect:i.setSelectedProPlan})]}),(0,a.jsx)(E,{})]})})},C=e=>{var t,r;let{scheduledPlan:n}=e,o=(0,l.et)(),{isBizPlan:_,isEnterprisePlan:f}=(0,x.cb)(o.currentPlan.id),v="newWorkspace"===o.pricingScenario,j=(0,x.RL)(o.selectedBizPlan);if(!v&&!o.showBizPlan)return null;let w=(()=>{let e=o.selectedBizPlan,t=e==o.currentPlan.id&&o.planType==o.currentPlan.type,r=o.isPlanDowngrade(e);return o.isLoggedOut?{type:"link",text:"Get Started",variant:"outline",href:"/signup",disabled:!1,onClick:()=>{s.Ay.capture(c.aw.GET_STARTED_CLICKED,{plan_type:"business",plan_id:e,plan_price:o.getDisplayPrice(e),user_status:"logged_out"})}}:v?o.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{o.setNewWorkspaceSelectedPlan(e)},loading:!1}:n?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&o.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{o.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:o.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:_?"twilight":"twilight-muted",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:f?{type:"button",text:o.getButtonText(e),variant:"twilight-muted",disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:o.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{s.Ay.capture(c.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:o.currentPlan.id,current_plan_type:o.currentPlan.type,target_plan_id:e,target_plan_type:o.planType,plan_type:"business",plan_price:o.getDisplayPrice(e)}),o.setTargetDowngradePlan(e),o.onDowngradeClick()}}:{type:"button",text:o.getButtonText(e),variant:_?"twilight":"outline",disabled:!1,loading:!1,onClick:async()=>{await o.handleUpgradeClicked(e)}}})(),E=n&&o.scheduledPlan?o.scheduledPlan.id:o.selectedBizPlan,y=o.getSavingsAmount(E);return(0,a.jsx)(p.Mt,{name:"Business",title:"Advanced controls and power features for growing departments",plan:null!=(t=null==n?void 0:n.id)?t:o.selectedBizPlan,planType:null!=(r=null==n?void 0:n.type)?r:o.planType,highlighted:v&&o.newWorkspaceSelectedPlan===o.selectedBizPlan,description:(0,a.jsx)(d,{selectedPlan:E,isScheduled:null==n?void 0:n.type}),savingsAmount:y,isPopular:_&&!n,isScheduled:null==n?void 0:n.type,priceSubtitle:"shared across unlimited users",children:(0,a.jsxs)(b,{children:[(0,a.jsxs)(p.vi,{children:[(0,a.jsx)(u.O,{...w}),v?(0,a.jsx)(m.h,{options:g.mR,selectedOption:o.selectedBizPlan,onSelect:e=>{o.setNewWorkspaceSelectedPlan(e),o.setSelectedBizPlan(e)}}):(0,a.jsx)(m.h,{options:g.mR,selectedOption:E,disabled:!!n||o.shouldDisableWorkspaceAdminActions,onSelect:o.setSelectedBizPlan})]}),(0,a.jsx)(p.kp,{label:"All features in Pro, plus:",features:[(0,a.jsxs)("span",{className:"flex items-start gap-1",children:[j," monthly credits",(0,a.jsx)(h.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsxs)("p",{children:[j," credits per month + 5 daily credits that reset each day"]})})]},"num-credits"),(0,a.jsxs)("span",{className:"flex items-start gap-1",children:["Internal publish",(0,a.jsx)(h.V,{name:"info_circle",delay:300,tooltipContentClassName:"max-w-[25ch]",className:"mt-0.5 h-4 w-4 text-muted-foreground",children:(0,a.jsx)("p",{children:"Publish websites that are only accessible to logged in workspace members."})}),(0,a.jsx)(i.y,{children:"New"})]},"internal-publishing"),"SSO","Personal Projects","Opt out of data training","Design templates"]})]})})};w.Free=()=>{let e=(0,l.et)(),{isFreePlan:t,isInactivePlan:r,isEnterprisePlan:o}=(0,x.cb)(e.currentPlan.id),d=(0,n.f)();if(!e.showFreePlan)return null;let m=(()=>{var a;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"outline",href:"/signup",disabled:!1,onClick:()=>{s.Ay.capture(c.aw.GET_STARTED_CLICKED,{plan_type:"free",plan_id:"free",plan_price:0,user_status:"logged_out"})}}:(null==(a=e.scheduledPlan)?void 0:a.id)==="free"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:r?{type:"button",text:"Only for first workspace",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:o?{type:"button",text:"Downgrade (Contact us)",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Downgrade",variant:e.freePlanButtonVariant,disabled:!1,loading:e.isCreatePortalSessionLoading,onClick:()=>{s.Ay.capture(c.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"free",plan_type:"free"}),e.setFreePlanAsTarget(),e.onDowngradeClick()}}})();return(0,a.jsx)(p.Mt,{name:"Free",title:"Discover what Lovable can do for you",description:"Free forever",plan:f.VL.FREE,planType:"monthly",priceSubtitle:"No credit card needed",children:(0,a.jsxs)(b,{children:[(0,a.jsx)(p.vi,{children:(0,a.jsx)(u.O,{...m})}),(0,a.jsx)(p.kp,{label:"Free for everyone",features:["5 daily credits (up to 30/month)","Public projects","Unlimited collaborators","5 lovable.app domains",...d?[(0,a.jsxs)("span",{className:"flex items-start gap-2",children:["Cloud",(0,a.jsx)(i.y,{children:"New"})]},"lovable-cloud")]:[]]})]})})},w.Ktlo=()=>{let e=(0,l.et)();if(!e.showKtloPlan)return null;let t=(()=>{let t=e.isLitePlan;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{s.Ay.capture(c.aw.GET_STARTED_CLICKED,{plan_type:"ktlo",plan_price:15,user_status:"logged_out"})}}:t&&e.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{e.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:e.isScheduledLitePlan?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:"twilight",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Switch to KTLO",variant:"twilight",disabled:!1,loading:!1,onClick:async()=>{var t;if(!(null==(t=v.y4[v.G.KTLO])?void 0:t.PRODUCT_ID))return void _.logging.error("KTLO product ID not found");s.Ay.capture(c.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"ktlo",plan_type:"ktlo",plan_price:15}),await e.handleUpgradeConfirmed(f.VL.KTLO)}}})();return(0,a.jsx)(p.Mt,{name:"Lite",title:"Keep your projects running with essential features",plan:e.selectedLitePlan,planType:"monthly",description:"Monthly",children:(0,a.jsxs)(b,{children:[(0,a.jsx)(p.vi,{children:(0,a.jsx)(u.O,{...t})}),(0,a.jsx)(p.kp,{label:"Everything in Free, plus:",features:["5 daily credits (up to 150/month)","User roles & permissions","Custom domains","Remove the Lovable badge"]})]})})},w.Scheduled=()=>{let{scheduledPlan:e}=(0,l.et)(),{isProPlan:t,isBizPlan:r}=(0,x.cb)(null==e?void 0:e.id);return e&&t?(0,a.jsx)(y,{scheduledPlan:e}):e&&r?(0,a.jsx)(C,{scheduledPlan:e}):void 0},w.Pro=y,w.Biz=C,w.Enterprise=()=>{let e=(0,l.et)(),{isEnterprisePlan:t}=(0,x.cb)(e.currentPlan.id);if(!e.showEnterprisePlan)return null;let r=t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:{type:"link",text:"Book a demo",variant:"outline",href:"https://enterpriseform.lovable.app/",disabled:!1,isExternal:!0,onClick:()=>{s.Ay.capture(c.aw.CONTACT_US_CLICKED,{plan_type:"enterprise",current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,user_status:e.isLoggedOut?"logged_out":"logged_in"})}};return(0,a.jsx)(p.Mt,{name:"Enterprise",title:"Built for large orgs needing flexibility, scale, and governance.",plan:f.VL.ENTERPRISE,planType:e.planType,description:"Flexible plans",hidePrice:!1,customPriceLabel:(0,a.jsx)("span",{className:"flex items-start gap-1 pb-3 pt-7 text-xl text-muted-foreground",children:"Custom"}),children:(0,a.jsxs)(b,{children:[(0,a.jsx)(p.vi,{children:(0,a.jsx)(u.O,{...r})}),(0,a.jsx)(p.kp,{label:"All features in Business, plus:",features:["Dedicated support","Onboarding services","Custom connections","Group-based access control","Custom design systems"]})]})})}},40911:(e,t,r)=>{"use strict";r.d(t,{I:()=>c,d:()=>d});var a=r(18502),s=r(87299),l=r(95661),n=r(40702),i=r(61374),o=r(15365);function c(e){var t;let{permission:r,...s}=e,{isAuthenticated:l}=(0,n.Z2)(),c=(0,o.WW)(),{permissions:d,isLoading:u}=(0,i.S)(),p=d.includes(r),m=u&&0===d.length,h=(null==(t=s.enabled)||t)&&!m&&l&&(p||c);return(0,a.I)({...s,enabled:h})}function d(){let e=(0,s.jE)(),{isAuthenticated:t}=(0,n.Z2)(),r=(0,o.WW)(),{permissions:a,isLoading:c}=(0,i.S)();return(0,l.useCallback)(s=>{let{permission:l,enabled:n,...i}=s;if(c)return;let o=a.includes(l);t&&(o||r)&&(null==n||n)&&e.prefetchQuery(i)},[e,t,r,a,c])}},43610:(e,t,r)=>{"use strict";r.d(t,{$:()=>p});var a=r(18502),s=r(48184),l=r(95661),n=r(40702),i=r(61374),o=r(63851),c=r(69850),d=r(89931),u=r(74507);let p=e=>{var t,r,p,h,_,g,x,f,v,j,w,b,E,y,C,N;let{isAuthenticated:k,authUser:P}=(0,n.Z2)(),{permitted:I}=(0,i.J)(u.eZ.ViewWorkspaceUsage),{data:D}=(0,a.I)({queryKey:[...c.workspaceKeys.detail(null!=(t=null==e?void 0:e.id)?t:""),"users",null!=(r=null==P?void 0:P.uid)?r:"","monthly-usage"],queryFn:async()=>{if(!(null==e?void 0:e.id)||!(null==P?void 0:P.uid))return{user_monthly_usage:0,max_usage:null};try{let t=(0,o.P)();return await t.get("/workspaces/".concat(null==e?void 0:e.id,"/user-monthly-usage"))}catch(e){return console.error("Error fetching user monthly usage:",e),{user_monthly_usage:0,max_usage:null}}},enabled:!!(null==e?void 0:e.id)&&!!(null==P?void 0:P.uid)&&I}),A=(0,l.useMemo)(()=>{var t,r,a;if(e&&k)return!!((null!=(t=e.credits_granted)?t:0)-e.credits_used>0)||!!((null!=(r=e.topup_credits_used)?r:0)<(null!=(a=e.topup_credits_limit)?a:0))||!!(e.daily_credits_used<e.daily_credits_limit)||!!((e.billing_period_credits_used||0)<e.billing_period_credits_limit)},[e,k]),S=null!=(p=null==e?void 0:e.daily_credits_limit)?p:0,L=null!=(h=null==e?void 0:e.daily_credits_used)?h:0,T=null!=(_=null==e?void 0:e.billing_period_credits_limit)?_:0,O=null!=(g=null==e?void 0:e.billing_period_credits_used)?g:0,R=null!=(x=null==e?void 0:e.topup_credits_used)?x:0,M=null!=(f=null==e?void 0:e.topup_credits_limit)?f:0,K=(null==e?void 0:e.topup_credits_purchased_at)?(0,s.e)((0,d.ay)(e.topup_credits_purchased_at),1):null,F=null!=(v=null==e?void 0:e.rollover_credits_used)?v:0,U=null!=(j=null==e?void 0:e.rollover_credits_limit)?j:0,W=null!=(w=null==e?void 0:e.credits_granted)?w:0,B=null!=(b=null==e?void 0:e.credits_used)?b:0,V=null!=(E=null==e?void 0:e.total_credits_used_in_billing_period)?E:0,G=null!=(y=null==D?void 0:D.max_usage)?y:null;return{dailyCreditLimit:S,dailyCreditsUsed:L,billingPeriodCreditLimit:T,billingPeriodCreditsUsed:O,rolloverCreditsLimit:U,rolloverCreditsUsed:F,topUpCredits:M-R,topUpCreditsExpireDate:K,bonusCredits:W-B,totalCreditsUsedInBillingPeriod:V,areCreditsAvailable:A,billingPeriodEndDate:m(null==e?void 0:e.billing_period_end_date),userMonthlyUsage:null!=(C=null==D?void 0:D.user_monthly_usage)?C:0,maxUserMonthlyUsage:G,hasCreditLimit:null!==G&&G>0,workspaceDefaultLimit:null!=(N=null==e?void 0:e.default_monthly_member_credit_limit)?N:void 0}},m=e=>e?"string"==typeof e?new Date(e):e.toDate():null},43987:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var a=r(77145);r(95661);var s=r(72632),l=r(56024),n=r(27458),i=r(58295);let o=e=>{let{workspace:t,requiredPlanCategory:r,className:o,...c}=e,d=(0,s.TP)(r),u=(0,s._R)(t.plan),p=(0,s.m6)(t.plan),m=!(0,s.my)(p,r);return(0,a.jsxs)(i.m_,{children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,l.cn)("flex h-5 cursor-pointer items-center gap-1 rounded-sm bg-brand-twilight px-2 py-px text-xs font-medium text-brand-twilight-foreground hover:bg-brand-twilight/80",o),...c,children:[(0,a.jsx)(n.gu,{name:"LovableMonotone",className:"h-3 w-3"}),(0,a.jsx)("p",{className:(0,l.cn)("flex",{hidden:!m}),children:d})]})}),(0,a.jsx)(i.ZI,{children:m?(0,a.jsxs)("p",{children:["Upgrade to ",d," to access this feature."]}):(0,a.jsxs)("p",{children:["Included in ",u]})})]})}},45456:(e,t,r)=>{"use strict";r.d(t,{Cb:()=>Q,X5:()=>et});var a=r(92912),s=r(95661),l=r(51762),n=r(39528),i=r(77145),o=r(40702),c=r(83220),d=r(61374),u=r(49974),p=r(28717),m=r(98805),h=r(54401),_=r(52811),g=r(20247),x=r(69730),f=r(27458),v=r(6698),j=r(31088),w=r(27835),b=r(83473),E=r(63851),y=r(68259),C=r(72632);let N={pro:"build_credit_pro",biz:"build_credit_business"},k={pro:{[y.Sj.USD]:.25,[y.Sj.EUR]:.25,[y.Sj.GBP]:.22},biz:{[y.Sj.USD]:.5,[y.Sj.EUR]:.5,[y.Sj.GBP]:.44}},P=(e,t)=>{let r=(0,C.m6)(e);if("pro"!==r&&"biz"!==r)throw Error("Invalid plan to buy build credit: ".concat(e));let a=null==t?void 0:t.subscription_currency,s=(0,C.cb)(null==t?void 0:t.plan).isPaidPlan,l=(0,y.Lu)(a,s),n=N[r];return l!==y.Sj.USD&&(n="".concat(n,"_").concat(l.toLowerCase())),{lookupKey:n,pricePerCredit:k[r][l]}},I=Array.from({length:20},(e,t)=>50+50*t);var D=r(67539);let A=e=>{let{selectedCredits:t,setSelectedCredits:r,workspace:a}=e,{getCurrencySymbol:s}=(0,u.et)(),l=s(),n=P(a.plan,a).pricePerCredit,o=(t*n).toFixed(2);return(0,i.jsxs)(D.l6,{value:t.toString(),onValueChange:e=>r(Number(e)),children:[(0,i.jsx)(D.bq,{className:"w-full justify-start bg-background",children:(0,i.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,i.jsxs)("span",{className:"min-w-0 truncate",children:["+",t," additional credits"]}),(0,i.jsxs)("span",{className:"ml-auto shrink-0 whitespace-nowrap text-muted-foreground",children:[l,o]})]})}),(0,i.jsx)(D.gC,{children:I.map(e=>{let t=(e*n).toFixed(2);return(0,i.jsx)(D.tJ,{value:e.toString(),label:"+".concat(e," additional credits"),endContent:(0,i.jsxs)("span",{className:"text-muted-foreground",children:[l,t]}),showIndicator:!1,variant:"twilight"},e)})})]})};var S=r(56024);let L=e=>{let{selected:t,onClick:r,children:a}=e;return(0,i.jsxs)("div",{role:"radio","aria-checked":t,tabIndex:0,onClick:r,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),r())},className:(0,S.cn)("relative cursor-pointer rounded-lg p-3 transition-all sm:p-4",t?"bg-muted ring-2 ring-primary":"ring-2 ring-muted"),children:[(0,i.jsx)("div",{className:"absolute right-3 top-3 sm:right-4 sm:top-4",children:(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:(0,S.cn)("h-5 w-5 rounded-full border-2 transition-colors",t?"border-primary bg-primary":"border-muted-foreground/30"),children:t&&(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,i.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary-foreground"})})})})}),(0,i.jsx)("div",{children:a})]})},T=e=>{let{workspace:t,preSelectedOption:r,onClose:a,targetPlan:l,availablePlans:n,handleCancel:o,handleConfirm:d}=e,{handleUpgradeConfirmed:p}=(0,u.et)(),y=(0,c.j4)(e=>e.currentWorkspace),[N,k]=(0,s.useState)(r),[D,S]=(0,s.useState)(I[0]),[T,O]=(0,s.useState)(!1),[R,M]=(0,s.useState)(l),{handleTopUp:K,isLoading:F}=(e=>{let{workspace:t,creditAmount:r=50,onSuccess:a}=e,[l,n]=(0,s.useState)(!1),i=(0,E.P)(),o=(0,v.n)({mutationFn:async()=>{let e=new URL(window.location.href),a=(e=>{let t=new URL("".concat(window.location.origin).concat("/topup-success")),r=new URL(e);return t.searchParams.set("redirect",r.toString()),t.toString()})(e),s=(e=>{let t=new URL(e);return t.searchParams.set(w.cK,w.Yv),t.searchParams.set(w.wB,"topup"),t.toString()})(e),l=P(t.plan,t);return i.post("/workspaces/".concat(t.id,"/credits/topup"),{credit_amount:r,price_lookup_key:l.lookupKey,success_url:a,cancel_url:s})},onSuccess:async e=>{e.checkout_url?(n(!0),null==a||a(),window.location.assign(e.checkout_url)):j.toast.error("Failed to create checkout session. Please try again.")},onError:e=>{(0,b.Ni)(e)}}),c=o.isPending||l;return{handleTopUp:o.mutate,isLoading:c,isRedirecting:l}})({workspace:t,creditAmount:D}),U=(0,C.bn)(null==y?void 0:y.billing_period_end_date),W=async()=>{d(N,R,D),"upgrade"===N?(O(!0),await p(R)):K()},B="upgrade"===N?T:F,V="upgrade"===N&&R===t.plan,G=B||V;return(0,i.jsxs)(g.Cf,{className:"sm:max-w-[425px]",children:[(0,i.jsxs)("div",{className:"flex max-w-full flex-col gap-4 overflow-hidden pb-4",children:[(0,i.jsxs)(g.c7,{children:[(0,i.jsx)("div",{className:"flex py-4",children:(0,i.jsx)(f.Fy,{className:"h-12 w-12"})}),(0,i.jsx)(g.L3,{className:"text-2xl",children:"Add more credits"}),(0,i.jsx)(g.rr,{children:"Here's how you can add more credits"})]}),(0,i.jsxs)("div",{role:"radiogroup","aria-label":"Credit options",className:"flex flex-col gap-4 p-0.5",children:[(0,i.jsxs)(L,{selected:"upgrade"===N,onClick:()=>k("upgrade"),children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Upgrade your plan"}),(0,i.jsxs)("p",{className:"mt-1 text-sm text-muted-foreground",children:["Next billing cycle (",U,")"]}),(0,i.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(h.D,{selectedPlan:R,setSelectedPlan:M,availablePlans:n,showCreditDifference:!0,showPlanDropdown:!0,showPriceInDropdown:!0})})]}),(0,i.jsxs)(L,{selected:"topup"===N,onClick:()=>k("topup"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h3",{className:"text-lg",children:"Or top up credits"}),(0,i.jsx)(m.y,{children:"Beta"})]}),(0,i.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Purchase credits on demand"}),(0,i.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(A,{selectedCredits:D,setSelectedCredits:S,workspace:t})})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(_.$,{variant:"outline",onClick:()=>{o(N),a()},disabled:B,className:"flex-1",children:"Cancel"}),(0,i.jsx)(_.$,{onClick:W,disabled:G,className:"flex-1",children:B?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{name:"progress_activity",className:"animate-spin",size:"small"}),"Processing..."]}):"Continue"})]})]})};var O=r(51433),R=r(47226),M=r(92763),K=r(54557),F=r(74507),U=r(46753),W=r.n(U),B=r(85062);let V=()=>(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"We couldn't load the data needed to upgrade your workspace."}),(0,i.jsxs)("p",{children:["Please refresh the page and try again. If the problem continues, contact our"," ",(0,i.jsx)(W(),{href:"/support",className:"underline",children:"Support"}),"."]})]}),G=e=>{let{hasFetchedWorkspace:t}=e;return(0,i.jsx)(g.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,i.jsxs)(g.c7,{children:[(0,i.jsx)(g.L3,{className:"text-start text-3xl font-medium",children:"Building something big?"}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.rr,{className:"text-sm text-muted-foreground",children:"Out of credits."}),(0,i.jsx)(B.O,{})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.rr,{className:"text-sm text-muted-foreground",children:"Loading..."}),(0,i.jsx)(V,{})]})]})})};var q=r(51385),H=r(67844);let Y=e=>{let{id:t,displayName:r,avatarClassName:a,actionComponent:s,email:l,isCurrentUser:n=!1,isInvited:o=!1,showBadge:c=!0}=e;return(0,i.jsxs)("div",{className:"flex items-center justify-start gap-3 py-1 md:flex-nowrap",children:[(0,i.jsx)(q.H,{user:{id:t,username:null!=r?r:l},className:(0,S.cn)(a,o&&"opacity-60","h-8 w-8"),isInteractive:!1}),(0,i.jsx)("div",{className:"flex min-w-0 flex-shrink items-center gap-4 ".concat(o&&"opacity-60"),children:(0,i.jsxs)("div",{className:"flex min-w-0 flex-col gap-0",children:[(0,i.jsxs)("div",{className:"flex-shrink truncate text-sm font-medium leading-tight",children:[r," ",n&&(0,i.jsx)("span",{className:"font-normal",children:"(you)"})]}),(0,i.jsx)("span",{className:"max-w-[150px] flex-shrink truncate text-xs text-muted-foreground",children:l})]})}),o&&c&&(0,i.jsx)(H.E,{variant:"outline",className:"hidden gap-1 bg-muted text-xs font-medium text-muted-foreground md:flex",children:"Invite sent"}),s&&(0,i.jsx)("div",{className:"ml-auto flex-shrink-0",children:s})]})};var z=r(25080);let Z=e=>{let{workspace:t,myWorkspaceRole:r,onSendPing:s,onDismiss:l,isSendingPing:o,canViewWorkspaceMembers:c}=e,d=async()=>{a.Ay.capture(n.lY.OUT_OF_CREDITS_DIALOG.SEND_PING_CLICKED,{workspace_id:t.id,workspace_plan:t.plan,workspace_plan_type:t.plan_type,user_role:r}),await s(),j.toast.success("Ping sent!",{description:"The workspace owner has been notified about the credit shortage."})},{owner:u}=(0,z.K4)({workspaceId:t.id,canViewWorkspaceMembers:c});return(0,i.jsxs)(g.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:[(0,i.jsx)(g.c7,{className:"flex flex-col gap-4",children:(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,i.jsx)(f.Fy,{className:"size-9"}),(0,i.jsx)(g.L3,{className:"text-start text-3xl font-medium",children:"Workspace out of credits"}),(0,i.jsx)(g.rr,{className:"text-start text-sm text-muted-foreground",children:"Only the workspace owner can upgrade and add more credits. Send a ping and continue building."})]})}),(0,i.jsx)("div",{className:"rounded-lg p-3",children:(0,i.jsx)(Y,{id:(null==u?void 0:u.user_id)||t.owner_id,displayName:null==u?void 0:u.display_name,email:(null==u?void 0:u.email)||"",avatarClassName:"h-8 w-8",actionComponent:(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:"Owner"}),showBadge:!1})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(_.$,{variant:"outline",className:"flex-1",onClick:()=>{a.Ay.capture(n.lY.OUT_OF_CREDITS_DIALOG.DISMISS_CLICKED,{workspace_id:t.id,workspace_plan:t.plan,workspace_plan_type:t.plan_type,user_role:r}),l()},children:"Dismiss"}),(0,i.jsx)(_.$,{className:"h-8 flex-1",onClick:d,disabled:o,children:o?"Sending...":"Send a ping"})]})]})};var $=r(53792),Q=function(e){return e.INACTIVE_WORKSPACE="INACTIVE_WORKSPACE",e.FREE_DAILY_LIMIT="FREE_DAILY_LIMIT",e.FREE_MONTHLY_LIMIT="FREE_MONTHLY_LIMIT",e.LEGACY_DAILY_LIMIT="LEGACY_DAILY_LIMIT",e.PAID_MONTHLY_LIMIT="PAID_MONTHLY_LIMIT",e}({});let J={INACTIVE_WORKSPACE:{title:"Reactivate your workspace",subtitle:"Your workspace is inactive. Upgrade to continue building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"You've used today's free credits. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_MONTHLY_LIMIT:{title:"Monthly limit reached",subtitle:"You've used all your free credits this month. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},LEGACY_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"Your plan has daily limits. Upgrade to a modern plan with monthly credits.",showCreditDifference:!1,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PAID_MONTHLY_LIMIT:{title:"Need more credits?",subtitle:"You've used your monthly credits. Add more to continue this month.",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}};function X(e){let{workspace:t,membership:r,hasFetchedWorkspace:l,onClose:c,scenario:m,preSelectedOption:h}=e,{isAuthenticated:_,authUser:x}=(0,o.Z2)(),{userData:f}=(0,p.ur)(),{setPricingScenario:j,selectedProPlan:w,selectedBizPlan:y,currentPlan:N}=(0,u.et)(),{sendCreditsPing:k,isSendingPing:P}=function(e){let{workspaceId:t}=e,{mutateAsync:r,isPending:a}=(0,v.n)({mutationFn:async()=>(0,E.P)().post("/workspaces/".concat(t,"/credits-ping")),onError:e=>{(0,b.Ni)(e)}});return{sendCreditsPing:r,isSendingPing:a}}({workspaceId:(null==t?void 0:t.id)||""}),{permitted:I}=(0,d.J)(F.eZ.ViewWorkspaceMembers),{canTopUpCredits:D}=(0,M.S)(t);(0,s.useEffect)(()=>{j("outOfCredits")},[j]),(0,s.useEffect)(()=>{t&&a.Ay.capture(n.ZK.MODAL.OPENED,{current_plan:t.plan,pre_selected_option:h||"upgrade"})},[t,h]);let A=e=>{a.Ay.capture(n.ZK.MODAL.CANCEL_CLICKED,{current_plan:null==t?void 0:t.plan,selected_option:e}),null==c||c()},S=(e,r,s)=>{a.Ay.capture(n.ZK.MODAL.CONFIRM_CLICKED,{selected_option:e,current_plan:null==t?void 0:t.plan,selected_credits:"topup"===e?s:void 0,selected_plan:"upgrade"===e?r:void 0})},L=(0,s.useMemo)(()=>"biz"===(0,C.m6)(N.id)?y:w,[N.id,w,y]),U=J[(0,s.useMemo)(()=>m||(t?function(e){var t,r;let a=e.plan,{isFreePlan:s,isInactivePlan:l,isAmbassadorPlan:n,isPaidPlan:i,isLegacyPlan:o}=(0,C.cb)(a),c=(null!=(t=e.billing_period_credits_limit)?t:0)>0,d=s&&(null!=(r=e.total_credits_used_in_billing_period)?r:0)>=$.le;return l?"INACTIVE_WORKSPACE":s&&!d?"FREE_DAILY_LIMIT":s&&d?"FREE_MONTHLY_LIMIT":(o||n)&&!c?"LEGACY_DAILY_LIMIT":"PAID_MONTHLY_LIMIT"}(t):Q.FREE_DAILY_LIMIT),[m,t])],W=(0,s.useMemo)(()=>t?(0,K.Y)({currentPlan:N,targetPlanCategory:(0,C.m6)(L)}):[],[t,N,L]);if(!t)return(0,i.jsx)(G,{hasFetchedWorkspace:l});if(!_||!f)return(0,i.jsx)(g.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,i.jsx)(R.E,{className:"h-[400px] w-full"})});let B=null==r?void 0:r.role;return(null==x?void 0:x.uid)!==t.owner_id?(0,i.jsx)(Z,{workspace:t,myWorkspaceRole:B,onSendPing:async()=>{await k()},onDismiss:()=>{null==c||c()},isSendingPing:P,canViewWorkspaceMembers:I}):D?(0,i.jsx)(T,{workspace:t,preSelectedOption:h,onClose:()=>null==c?void 0:c(),targetPlan:L,availablePlans:W,handleCancel:A,handleConfirm:S}):(0,i.jsx)(O.n,{targetPlan:L,availablePlans:W,title:U.title,subtitle:U.subtitle,showCreditDifference:U.showCreditDifference,showWhatsChanging:U.showWhatsChanging,showPlanFeatures:U.showPlanFeatures,showNextBillingCycle:U.showNextBillingCycle,showPlanDropdown:U.showPlanDropdown,handleCancel:A,handleConfirm:S})}let ee=function(){let{onClose:e,scenario:t,preSelectedOption:r="upgrade"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{currentWorkspace:a,hasFetchedCurrentWorkspace:s,membership:l}=(0,c.j4)(e=>e);return(0,i.jsx)(X,{workspace:a,membership:l,hasFetchedWorkspace:s,onClose:e,scenario:t,preSelectedOption:r})},et=()=>{let e=(0,l.f)(ee);return(0,s.useCallback)(function(){let{scenario:t,preSelectedOption:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e({childProps:{onClose:()=>e(!1),scenario:t,preSelectedOption:r},dialogProps:{onOpenChange:e=>{e||a.Ay.capture(n.ZK.MODAL.CLOSED,{pre_selected_option:r})}}})},[e])}},45756:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var a=function(e){return e.SUBMITTED="submitted",e.SKIPPED="skipped",e.NOT_SHOWN="not_shown",e}({})},45830:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(95661);function s(e,t){let[r,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},47226:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(77145),s=r(56024);function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},47679:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,t:()=>o});var a=r(77145),s=r(13410),l=r(95661);let n=(0,l.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,l.useState)(null),o=(0,s.useSearchParams)(),c=(0,s.usePathname)(),d=(0,s.useRouter)(),u=(0,l.useCallback)(e=>{i(null!=e?e:null)},[]),p=(0,l.useCallback)(()=>{let e=new URLSearchParams(o);e.delete("settings");let t=e.toString(),r=t?"".concat(c,"?").concat(t):c;d.replace(r),i(null)},[o,c,d]),m=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=o.get("settings");null!=e?u(e):c!==m.current&&i(null),m.current=c},[o,u,c]);let h=(0,l.useMemo)(()=>({activeTab:r,openSettings:u,closeSettings:p}),[r,u,p]);return(0,a.jsx)(n.Provider,{value:h,children:t})},o=()=>{let e=(0,l.useContext)(n);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},49493:(e,t,r)=>{"use strict";r.d(t,{$M:()=>u,Mu:()=>m,k9:()=>p});var a=r(77145),s=r(18502),l=r(95661),n=r(84510),i=r(40702),o=r(99989),c=r(36119);let d=(0,l.createContext)(null);function u(e){let{children:t}=e,r=(0,l.useRef)((0,n.vt)(e=>({workspaces:[],error:null,isLoading:!0,showCreateWorkspaceDialog:!1,setShowCreateWorkspaceDialog:t=>{e({showCreateWorkspaceDialog:t})}}))),{authUser:u}=(0,i.Z2)(),{data:p,error:m,isFetching:h}=(0,s.I)(o.y.workspaces({userId:null==u?void 0:u.uid,disabled:!u||!(0,c.H)(u)}));return(0,l.useEffect)(()=>{(null==p?void 0:p.workspaces)&&r.current.setState({workspaces:p.workspaces}),r.current.setState({isLoading:h})},[p,h]),(0,l.useEffect)(()=>{m&&r.current.setState({error:m})},[m]),(0,a.jsx)(d.Provider,{value:{store:r.current},children:t})}function p(){let e=(0,l.useContext)(d);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function m(e){let{store:t}=p();if(!t)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return t(e)}},49974:(e,t,r)=>{"use strict";r.d(t,{LS:()=>y,ET:()=>N,et:()=>k});var a=r(77145),s=r(87299),l=r(92912),n=r(95661),i=r(31088),o=r(51762),c=r(51433),d=r(54557),u=r(72632);let p={PRO_TO_PRO_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PRO_TO_BIZ_UPGRADE:{title:"Upgrade to Business",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},BIZ_TO_BIZ_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}},m=e=>{let{targetPlan:t,scenario:r}=e,{currentPlan:s}=k(),l=p[r],n=(0,d.Y)({currentPlan:s,targetPlanCategory:(0,u.m6)(t)});return(0,a.jsx)(c.n,{targetPlan:t,availablePlans:n,title:l.title,subtitle:l.subtitle,showCreditDifference:l.showCreditDifference,showWhatsChanging:l.showWhatsChanging,showPlanFeatures:l.showPlanFeatures,showNextBillingCycle:l.showNextBillingCycle,showPlanDropdown:l.showPlanDropdown})};var h=r(3201),_=r(91169),g=r(21016),x=r(39528),f=r(53792),v=r(51573),j=r(68259),w=r(69850),b=r(40702),E=r(83220);let y="pendingPlanSelection",C=(0,n.createContext)(void 0),N=e=>{let{children:t,pricingScenario:r}=e,c=(0,s.jE)(),d=(0,E.j4)(e=>e.currentWorkspace),p=(0,E.j4)(e=>{var t;return null==(t=e.membership)?void 0:t.role}),N=(0,E.Dx)(),{authUser:k}=(0,b.Z2)(),{toCheckout:P,createPortalSession:I,checkoutLoading:D,isCreatePortalSessionLoading:A,cancelSubscription:S,isCancelSubscriptionLoading:L,cancelSubscriptionChanges:T,isCancelSubscriptionChangesLoading:O}=(0,_.R)(),[R,M]=(0,n.useState)(null!=r?r:"billing"),K="newWorkspace"===r?null:(0,u.uR)(null==d?void 0:d.subscription_currency,null==d?void 0:d.plan),F="newWorkspace"!==r&&(0,u.cb)(null==d?void 0:d.plan).isPaidPlan,U=(0,n.useCallback)(async()=>{(null==d?void 0:d.id)?await I({workspaceId:d.id}):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[I,null==d?void 0:d.id]),W=(0,n.useCallback)(async(e,t)=>{(null==d?void 0:d.id)?(await e({workspaceId:d.id}),(null==N?void 0:N.store)&&N.store.setState({currentWorkspace:{...d,...t(d)}}),await new Promise(e=>setTimeout(async()=>{await c.invalidateQueries({queryKey:w.workspaceKeys.all}),e(void 0)},1e3))):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[d,null==N?void 0:N.store,c]),B=(0,n.useCallback)(()=>W(S,()=>({plan_scheduled:v.VL.FREE,plan_type_scheduled:void 0})),[W,S]),V=(0,n.useCallback)(()=>W(T,()=>({plan_scheduled:void 0,plan_type_scheduled:void 0})),[W,T]),G=(0,n.useMemo)(()=>{var e,t;return{id:null!=(e=null==d?void 0:d.plan)?e:v.VL.FREE,type:null!=(t=null==d?void 0:d.plan_type)?t:"monthly"}},[d]),q=(0,n.useMemo)(()=>{if(null==d?void 0:d.plan_scheduled){var e,t;return{id:null!=(e=null==d?void 0:d.plan_scheduled)?e:v.VL.FREE,type:null!=(t=null==d?void 0:d.plan_type_scheduled)?t:"monthly"}}},[d]),H="loggedOut"===R,{isFreePlan:Y,isLitePlan:z,isLegacyPlan:Z}=(0,u.cb)(G.id),{isLitePlan:$}=(0,u.cb)(null==q?void 0:q.id),Q=!!(!H&&k&&d&&k.uid===d.owner_id),J=!H&&"member"===p,X=!H&&(!!p||Q),ee=!H&&!X&&!Q,et=.2*!!Z,[er,ea]=(0,n.useState)(G.type),es=(0,n.useMemo)(()=>(0,u.yw)(G),[G]),el=(0,n.useMemo)(()=>(0,u.LL)(G),[G]),[en,ei]=(0,n.useState)(es),[eo,ec]=(0,n.useState)(el),ed=(0,n.useMemo)(()=>z?G.id:$&&q?q.id:v.VL.KTLO,[z,$,G.id,q]),[eu,ep]=(0,n.useState)(null),[em,eh]=(0,n.useState)(f.pB[0]);(0,n.useEffect)(()=>{ei(es),ec(el),ep(null),ea(G.type)},[es,el,R,G]);let e_=(0,n.useCallback)(e=>{let t=(0,j.Lu)(K,F);return(0,u.jL)({id:e,type:er},t)},[er,K,F]),eg=(0,n.useCallback)(()=>(0,j.N3)(K,F),[K,F]),ex="loggedOut"===R||(null==q?void 0:q.id)==="free",ef=z||$,ev=!q&&!ef,ej=(0,n.useCallback)(e=>{if("monthly"===G.type&&"annual"===er&&e===G.id)return!1;let t=(0,u.jL)({...G,type:"monthly"}),r=(0,u.jL)({id:e,type:er,type:"monthly"}),a=(0,u.RL)(G.id),s=(0,u.RL)(e),l=(0,u.m6)(G.id),n=(0,u.m6)(e);return"biz"==l?"biz"==n?r<t:s<=a:"biz"==n?s<a:r<t},[G,er]),ew=(0,n.useCallback)(e=>e===G.id&&er===G.type?"current":Y||(0,u.jL)(G)===e_(e)?"upgrade":"enterprise"===G.id?"downgrade":e===G.id&&"annual"===er&&"monthly"===G.type?"switchToAnnual":ej(e)?"downgrade":"upgrade",[G,Y,e_,er,ej]),eb=(0,n.useCallback)(e=>{let t=ew(e);if("current"===t)return"Your current plan";if("switchToAnnual"===t)return"Switch to annual";let{isProPlan:r,isBizPlan:a}=(0,u.cb)(G.id),{isProPlan:s,isBizPlan:l}=(0,u.cb)(e);return"upgrade"===t?r&&s||a&&l?"Upgrade current plan":"Upgrade":"enterprise"===G.id?"Downgrade (Contact us)":"Downgrade"},[ew,G]),eE=(0,n.useMemo)(()=>{var e,t,r;return(null==k?void 0:k.email)||(null==k||null==(r=k.firebase)||null==(t=r.identities)||null==(e=t.email)?void 0:e[0])||"xxxxx"},[k]),ey=(0,g.A)("sm"),eC=(0,n.useMemo)(()=>ey?1:[ex,ef,!0,!0,ev].filter(Boolean).length,[ey,ex,ef,!0,!0,ev]),eN=(0,n.useCallback)(e=>{let t=ew(e);return"upgrade"===t||"switchToAnnual"===t?"twilight":"link"},[ew]),ek=eN(en),eP=eN(eo),eI=(0,n.useCallback)(e=>{if("free"===e){window.location.href="/signup";return}let t={planId:e,planType:"pro",timestamp:Date.now(),price:e_(e),limit:(0,u.RL)(e)};localStorage.setItem(y,JSON.stringify(t)),window.location.href="/signup"},[e_]),eD=(()=>{let e=(0,o.f)(m);return t=>{let{targetPlan:r,scenario:a}=t;e({childProps:{targetPlan:r,scenario:a,onClose:()=>e(!1)}})}})(),eA=(0,n.useCallback)(async e=>{(null==d?void 0:d.id)&&await P({plan:e,workspaceId:d.id,grandfatheredDiscount:Z,planType:er,changeType:"upgrade",useStudentDiscount:"studentDiscount"==R})},[d,P,Z,er,R]),eS=(0,n.useCallback)(async e=>{l.Ay.capture(x.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:G.id,current_plan_type:G.type,target_plan_id:e,target_plan_type:er,plan_type:(0,u.m6)(e),plan_price:e_(e)});let t=function(e,t,r){if("annual"===r||"annual"===e.type)return null;let a=(0,u.m6)(e.id),s=(0,u.m6)(t);return"biz"===a&&"pro"===s?null:"pro"===a&&"biz"===s?"PRO_TO_BIZ_UPGRADE":"pro"===a&&"pro"===s?"PRO_TO_PRO_UPGRADE":"biz"===a&&"biz"===s?"BIZ_TO_BIZ_UPGRADE":null}(G,e,er);t?eD({targetPlan:e,scenario:t}):await eA(e)},[G,er,e_,eA,eD]),eL=(0,n.useCallback)(()=>{ep(v.VL.FREE)},[]),eT=(0,n.useCallback)(e=>{if("annual"===er)return 2*(0,u.jL)({id:e,type:"monthly"})},[er]),eO=(0,o.f)(h.u),eR=(0,n.useCallback)(()=>{d&&eO({childProps:{workspace:d,onClose:()=>eO(!1)},dialogProps:{onOpenChange:e=>{e||ep(null)}}})},[eO,d]);return(0,a.jsx)(C.Provider,{value:{isLitePlan:z,isScheduledLitePlan:$,currentPlan:G,selectedProPlan:en,setSelectedProPlan:ei,selectedBizPlan:eo,setSelectedBizPlan:ec,selectedLitePlan:ed,planType:er,setPlanType:ea,pricingScenario:R,setPricingScenario:M,getDisplayPrice:e_,subscriptionCurrency:K||null,getCurrencySymbol:eg,showFreePlan:ex,showKtloPlan:ef,showProPlan:!0,showBizPlan:!0,showEnterprisePlan:ev,showProDropdown:!H,showBizDropdown:!H,isLoggedOut:H,isOwner:Q,isEditor:J,isMemberOfWorkspace:X,shouldDisableWorkspaceAdminActions:!H&&(J||ee||!H&&"viewer"===p||!H&&"collaborator"===p),userEmail:eE,scheduledPlan:q,discountPercent:et,getSavingsAmount:eT,handleUpgradeClicked:eS,handleUpgradeConfirmed:eA,handleLoggedOutUpgrade:eI,getButtonVariant:eN,getButtonText:eb,getPlanComparisonStatus:ew,createPortalSession:U,isCreatePortalSessionLoading:A,cancelSubscription:B,isCancelSubscriptionLoading:L,cancelSubscriptionChanges:V,isCancelSubscriptionChangesLoading:O,checkoutLoading:D,numberOfPlansShown:eC,freePlanButtonVariant:H?"twilight":"link",proPlanButtonVariant:ek,bizPlanButtonVariant:eP,isPlanDowngrade:ej,targetDowngradePlan:eu,setTargetDowngradePlan:ep,setFreePlanAsTarget:eL,newWorkspaceSelectedPlan:em,setNewWorkspaceSelectedPlan:eh,onDowngradeClick:eR},children:t})},k=()=>{let e=(0,n.useContext)(C);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},51328:(e,t,r)=>{"use strict";r.d(t,{s:()=>d});var a=r(87299),s=r(6698),l=r(83473),n=r(63851),i=r(99989),o=r(21789),c=r(33895);function d(e){let{workspaceId:t}=e,r=(0,a.jE)(),d=(0,o.H)(),{mutateAsync:u,isPending:p}=(0,s.n)({mutationFn:async e=>{let{email:r,role:a="member"}=e;return(0,n.P)().post("/workspaces/".concat(t,"/memberships"),{email:r,role:a})},onSuccess:async e=>{if(e){let s=i.y.workspaceMemberships({workspaceId:t}),l=r.getQueryData(s.queryKey);if(l&&!l.members.some(t=>t.user_id===e.user_id)){var a;r.setQueryData(s.queryKey,{...l,members:[...l.members,e],total:l.total+1,limit:l.limit,offset:null!=(a=l.offset)?a:0,has_more:l.has_more})}if(d&&(!d.query||""===d.query.trim())){let a=i.y.searchWorkspaceMemberships({workspaceId:t,params:d}),s=r.getQueryData(a.queryKey);s&&(s.members.some(t=>t.user_id===e.user_id)||r.setQueryData(a.queryKey,{...s,members:[...s.members,e],total:s.total+1,limit:s.limit,offset:s.offset,has_more:s.has_more}))}}(0,c.y)(r,t,d,{invalidateAll:!0})},onError:e=>{(0,l.Ni)(e)}});return{inviteWorkspaceMember:u,isInvitingMember:p}}},51385:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var a=r(77145),s=r(18502),l=r(59142),n=r(90249),i=r(6971);let o=e=>{var t,r;let{isInteractive:o=!1,className:c,user:d,zIndex:u,...p}=e,m=(0,n.Q)(d.id),h=(null==(t=d.attributes)?void 0:t.display_name)||(d.username&&d.username!==d.id?d.username:d.id),{data:_}=(0,s.I)({...i.Y.publicProfile({username:d.id}),enabled:!!d.id}),g=null!=(r=null==_?void 0:_.avatar_url)?r:void 0;return(0,a.jsx)(l._,{name:h,isInteractive:o,photoSrc:g,userColor:m,className:c,zIndex:u,...p})}},51433:(e,t,r)=>{"use strict";r.d(t,{n:()=>x});var a=r(77145),s=r(95661),l=r(83220),n=r(49974),i=r(54401),o=r(52811),c=r(20247),d=r(69730),u=r(27458),p=r(72632);let m=["User roles & permissions","Custom domains","Remove the Lovable badge"],h=["SSO","Personal Projects","Opt out of data training","Design templates"],_=["Downgrade anytime","Credits rollover"],g=e=>{let{features:t}=e;return(0,a.jsx)("div",{className:"mt-3 space-y-3",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-[6px]",children:[(0,a.jsx)(d.A,{name:"check",weight:"medium",size:"small",className:"relative top-0.5"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},t))})},x=e=>{let{targetPlan:t,availablePlans:r,title:d,subtitle:x,showCreditDifference:f=!0,showWhatsChanging:v=!0,showPlanFeatures:j=!0,showNextBillingCycle:w=!0,showPlanDropdown:b=!0,handleCancel:E,handleConfirm:y}=e,{getDisplayPrice:C,handleUpgradeConfirmed:N,currentPlan:k,checkoutLoading:P,getCurrencySymbol:I}=(0,n.et)(),D=I(),A=(0,p.RL)(k.id),S=(0,p.m6)(t),[L,T]=(0,s.useState)(t),O=(0,p.RL)(L),R=(0,l.j4)(e=>e.currentWorkspace),M=w&&!j,K=(0,p.bn)(null==R?void 0:R.billing_period_end_date),F=(0,p.jL)(k),U=C(L),W=O-A,B=C(L),V=async()=>{null==y||y("upgrade",L),await N(L)};return(0,a.jsxs)(c.Cf,{className:"max-h-[90vh] max-w-[425px] overflow-y-auto",children:[(0,a.jsxs)(c.c7,{className:"space-y-4",children:[(0,a.jsx)(u.Fy,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.L3,{className:"mb-2 text-3xl font-medium",children:d}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:x})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"rounded-lg border-2 border-muted-border p-4",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Upgrade Fee"}),(0,a.jsx)(i.D,{selectedPlan:L,setSelectedPlan:T,availablePlans:r,showCreditDifference:f,showPlanDropdown:b})]}),v&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"What's changing?"}),(0,a.jsxs)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:["You are unlocking all business features"," ",W?"and receiving ".concat(W," credits today"):"but your credits will stay the same"]})]}),j&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"You will unlock:"}),(0,a.jsx)(g,{features:[..."biz"===S?h:m,...M?[]:_]})]}),w&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Next billing cycle (",K,")"]}),(0,a.jsx)(g,{features:["Your plan will update to ".concat(D).concat(B," / month for ").concat((0,p.RL)(L)," credits"),...M?_:[]]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 border-t pt-4",children:[(0,a.jsx)(c.HM,{asChild:!0,children:(0,a.jsx)(o.$,{variant:"decline",className:"flex-1",onClick:()=>{null==E||E("upgrade")},children:"Cancel"})}),(0,a.jsx)(o.$,{className:"flex-1",variant:"default",onClick:V,loading:!!P,"data-testid":"pricing-summary-upgrade",children:U>F?"Upgrade":"Confirm"})]})]})}},51762:(e,t,r)=>{"use strict";r.d(t,{RootDialog:()=>c,f:()=>o});var a=r(77145),s=r(95661),l=r(84510),n=r(20247);let i=(0,l.vt)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function o(e){let t=i(e=>e.setOpenDialog);return(0,s.useCallback)(r=>{r?t({component:e,...r}):t(null)},[e,t])}let c=()=>{let e=i(e=>e.openDialog),t=i(e=>e.setOpenDialog);if((0,s.useEffect)(()=>{if(e){var t,r;null==(r=e.dialogProps)||null==(t=r.onOpen)||t.call(r)}},[e]),!e)return null;let{component:r,dialogProps:l,childProps:o}=e;return(0,a.jsx)(n.lG,{...l,open:!!e,onOpenChange:e=>{var r;e||t(null),null==l||null==(r=l.onOpenChange)||r.call(l,e)},children:(0,a.jsx)(r,{...o})})}},53384:(e,t,r)=>{"use strict";r.d(t,{s:()=>g});var a=r(77145),s=r(92912),l=r(49974),n=r(40488),i=r(39528),o=r(30849),c=r(46753),d=r.n(c),u=r(52811),p=r(52873),m=r(56024);let h=()=>(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(p.Zp,{className:(0,m.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent p-6 sm:max-w-none"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)(p.ZB,{className:"text-lg font-medium",children:"Security and Compliance"}),(0,a.jsx)(p.BT,{className:"text-sm",children:"Enterprise-grade security and compliance certifications"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center sm:justify-start",children:(0,a.jsx)("div",{className:"flex h-[100px] items-center justify-center overflow-hidden",children:(0,a.jsx)(o.default,{src:"/img/security/industry-recognized-security.png",alt:"Security certifications: ISO 27001, GDPR, SOC 2 Type II",width:300,height:75,className:"h-auto w-full max-w-[240px]"})})})]}),(0,a.jsx)(u.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,a.jsx)(d(),{href:"https://lovable.dev/security",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})})]})})}),_=()=>(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(p.Zp,{className:(0,m.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent sm:max-w-none"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)(p.ZB,{className:"text-lg font-medium",children:"Student discount"}),(0,a.jsx)(p.BT,{className:"text-sm",children:"Verify student status and get access to up to 50% off Lovable Pro."})]}),(0,a.jsx)(u.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,a.jsx)(d(),{href:"/students",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})})]})})}),g=e=>{let{className:t,showStudentDiscountCard:r}=e,{pricingScenario:o}=(0,l.et)();return s.Ay.capture(i.aw.PLAN_VIEWED,{plan_context:o}),(0,a.jsxs)(n.ZL,{className:t,suffix:(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(_,{}),(0,a.jsx)(h,{})]}),children:[(0,a.jsx)(n.ZL.Free,{}),(0,a.jsx)(n.ZL.Ktlo,{}),(0,a.jsx)(n.ZL.Scheduled,{}),(0,a.jsx)(n.ZL.Pro,{}),(0,a.jsx)(n.ZL.Biz,{}),(0,a.jsx)(n.ZL.Enterprise,{})]})}},54401:(e,t,r)=>{"use strict";r.d(t,{D:()=>c});var a=r(77145),s=r(49974),l=r(2231),n=r(68259),i=r(72632),o=r(56024);let c=e=>{let{selectedPlan:t,setSelectedPlan:r,availablePlans:c,showCreditDifference:d=!0,showPlanDropdown:u=!0,showPriceInDropdown:p=!1}=e,{getDisplayPrice:m,currentPlan:h,getCurrencySymbol:_,subscriptionCurrency:g}=(0,s.et)(),x=(0,i.RL)(h.id),f=(0,i.cb)(h.id).isPaidPlan,v=(0,n.Lu)(g,f),j=(0,i.jL)(h,v),w=m(t),b=Math.max(0,w-j),E=_();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center",{"mb-3":u}),children:[(0,a.jsxs)("span",{className:"text-4xl font-medium",children:[E,d?b:w]}),(0,a.jsx)("span",{className:"ml-2 text-base text-foreground",children:d?"due today":"per month"})]}),u&&(0,a.jsx)(l.h,{options:c,selectedOption:t,onSelect:r,showCreditDifference:d,currentPlanLimit:x,priceInDropdown:{show:p,getDisplayPrice:m}})]})}},54557:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var a=r(72632);function s(e){let{currentPlan:t,targetPlanCategory:r}=e,s=(0,a.m6)(t.id)===r;if("pro"!==r&&"biz"!==r&&"enterprise"!==r)throw Error("Target plan category must be pro or biz");return"enterprise"===r?[]:s?(0,a.yQ)(t.id,r):(0,a.Bq)(t.id,r)}},58058:(e,t,r)=>{"use strict";r.d(t,{M:()=>a,P:()=>s});var a=function(e){return e.OWNER="owner",e.ADMIN="admin",e.WRITE="write",e.READ="read",e.NONE="none",e}({});let s={owner:"Owner",admin:"Admin",write:"Editor",read:"Viewer",none:"None"}},59142:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var a=r(77145),s=r(95661),l=r(86652),n=r(58295),i=r(56024);let o=e=>{let{name:t,isInteractive:r,className:o,photoSrc:c,userColor:d,isWorkspace:u=!1,tooltipContent:p=t,zIndex:m,...h}=e,_=t?t.charAt(0).toUpperCase():"",[g,x]=(0,s.useState)(!1);return(0,a.jsxs)(n.m_,{open:!!r&&!!t&&g,onOpenChange:x,children:[(0,a.jsx)(n.k$,{asChild:!0,children:(0,a.jsxs)(l.eu,{className:(0,i.cn)("h-[26px] w-[26px] shrink-0 items-center border border-transparent text-xs",{["hover:bg-".concat(d)]:!c&&!u&&r,"cursor-pointer":r,["hover:border-".concat(d)]:r,["group-[.avatars]:hover:border-".concat(d)]:r,"group-[.avatars]:border-background":!0,"rounded-[8px] hover:border-transparent":u},o),style:{zIndex:m},...h,children:[(0,a.jsx)(l.BK,{className:"aspect-auto object-cover",src:c}),(0,a.jsx)(l.q5,{className:(0,i.cn)("items-center border-none font-medium text-white","bg-".concat(d),u&&"rounded-lg"),children:_})]})}),(0,a.jsx)(n.ZI,{children:p})]})}},60607:(e,t,r)=>{"use strict";function a(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}r.d(t,{Q:()=>a})},61374:(e,t,r)=>{"use strict";r.d(t,{J:()=>h,S:()=>m});var a=r(18502),s=r(95661),l=r(53789),n=r(72490),i=r(63851),o=r(69850);let c={permissions:e=>{let{workspaceId:t,projectId:r}=e;return(0,l.j)({queryKey:o.QO.get(t,r),queryFn:async()=>{if(!r&&!t)return[];let e=(0,i.P)(),a=new URLSearchParams;return r?a.append("projectId",r):t&&a.append("workspaceId",t),e.get("/permissions?".concat(a.toString()))},refetchOnMount:!0,refetchOnWindowFocus:!1,staleTime:3e5,retry:3,placeholderData:n.rX})}};var d=r(82149),u=r(40702),p=r(83220);function m(){let e=(0,d.mb)(e=>e.projectId),t=(0,p.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:r}=(0,u.Z2)(),{data:l,isLoading:n}=(0,a.I)({...c.permissions({workspaceId:t,projectId:e}),enabled:r});return{permissions:(0,s.useMemo)(()=>r&&Array.isArray(l)?l:[],[r,l]),isLoading:n}}function h(e,t){let r=(0,d.mb)(e=>e.projectId),l=(0,p.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),{isAuthenticated:n}=(0,u.Z2)(),{data:i,isLoading:o}=(0,a.I)({...c.permissions({workspaceId:l,projectId:null!=t?t:r}),enabled:n});return{permitted:(0,s.useMemo)(()=>n&&Array.isArray(i)&&i.includes(e),[n,i,e]),isLoading:o}}},61850:(e,t,r)=>{"use strict";r.d(t,{m:()=>eh,$:()=>e_});var a=r(77145),s=r(46753),l=r.n(s),n=r(26158),i=r(40911),o=r(63851),c=r(74507),d=r(18502),u=r(95661),p=r(31088),m=r(61374),h=r(55966),_=r(52811),g=r(8711),x=r(69730),f=r(51747),v=r(5379),j=r(43987);let w=e=>{var t,r;let{selectedRole:s,onRoleChange:l,roleOptions:n,disabled:i=!1,workspace:o}=e,[c,d]=(0,u.useState)(!1);return i?(0,a.jsx)(_.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",disabled:!0,children:null==(r=n.find(e=>e.value===s))?void 0:r.label}):(0,a.jsxs)(g.rI,{open:c,onOpenChange:d,children:[(0,a.jsx)(g.ty,{asChild:!0,children:(0,a.jsxs)(_.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",children:[null==(t=n.find(e=>e.value===s))?void 0:t.label,(0,a.jsx)(x.A,{name:"chevron_down",size:"small"})]})}),(0,a.jsx)(g.SQ,{children:(0,a.jsx)(g.Hr,{value:s,onValueChange:e=>{l(e),d(!1)},children:n.map(e=>(0,a.jsxs)(g.Ht,{value:e.value,className:"hover:bg-accent",children:[e.label,("read"===e.value||"viewer"===e.value||"admin"===e.value)&&o&&(0,a.jsx)(j.M,{workspace:o,requiredPlanCategory:"pro"})]},e.value))})})]})},b=e=>{let{onInvite:t,isInviting:r,roleOptions:s,defaultRole:l,placeholder:n="Add emails",completelyDisabled:i=!1,onInputChange:o,workspace:c}=e,[d,m]=(0,u.useState)([]),[g,x]=(0,u.useState)(""),[j,b]=(0,u.useState)(l),E=d.length>0||""!==g.trim(),y=async()=>{let e=[...d],r=g.trim();if(""===r||d.includes(r)||(e.push(r),m(e),x("")),0===e.length)return;if(e.length>0&&!e.every(e=>(0,f.xf)(e)))return void(1===e.length?p.toast.error("Invalid email address",{description:"Please check the email address and try again."}):p.toast.error("Invalid email address",{description:"One or more email addresses are invalid. Please check and try again."}));let{success:a}=await t({emails:e,role:j});a&&(m([]),x(""),null==o||o(""))};(0,h.vC)("mod+enter",e=>{e.preventDefault(),r||y()},{enableOnFormTags:!0});let C=""===g.trim()&&0===d.length;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.u,{tags:d,setTags:m,inputValue:g,setInputValue:e=>{x(e),null==o||o(e)},placeholder:n,disabled:i,className:"min-w-0 flex-1",validateItem:e=>(0,f.xf)(e)?null:"This is not a valid email."}),E&&(0,a.jsx)(w,{selectedRole:j,onRoleChange:b,roleOptions:s,workspace:c}),(0,a.jsx)(_.$,{onClick:y,variant:"affirmative",className:"flex-shrink-0",disabled:r||C||i,loading:r,children:"Invite"})]})};var E=r(27623),y=r(91604),C=r(6397),N=r(58295),k=r(45830),P=r(72632),I=r(99989),D=r(86912),A=r(53861),S=r(51328),L=r(79306),T=r(24072),O=r(51385),R=r(33817),M=r(36704),K=r(39528),F=r(58058);let U=e=>{let{requests:t}=e,{acceptRequest:r,declineRequest:s,isAccepting:n,isDeclining:i}=(0,M.L)(),o=(0,T.sf)();return(0,a.jsxs)(R.XI,{children:[(0,a.jsx)(R.A0,{children:(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nd,{className:"w-[250px]",children:"User"}),(0,a.jsx)(R.nd,{children:"Project"}),(0,a.jsx)(R.nd,{children:"Role"}),(0,a.jsx)(R.nd,{children:"Requested"}),(0,a.jsx)(R.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(R.BF,{children:t.map(e=>(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(O.H,{user:{id:e.user_id,username:e.user_name||e.user_id},className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.user_name||e.user_email}),e.user_email&&e.user_name&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.user_email})]})]})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)(l(),{href:"/projects/".concat(e.project_id),className:"text-sm underline underline-offset-4",children:e.project_name||e.project_id})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("span",{className:"text-sm capitalize",children:F.P[e.access_level]})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,L.m)(new Date(e.created_at),{addSuffix:!0})})}),(0,a.jsx)(R.nA,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(_.$,{size:"sm",variant:"outline",onClick:()=>(e=>{s({projectId:e.project_id,requestId:e.id,workspaceId:e.workspace_id}),o.capture(K.$6.COLLABORATION.PROJECT_ACCESS_REQUEST_REJECTED,{project_id:e.project_id,request_id:e.id,workspace_id:e.workspace_id,component:"access_requests_table"})})(e),disabled:n||i,children:"Deny"}),(0,a.jsx)(_.$,{size:"sm",onClick:()=>(e=>{r({projectId:e.project_id,requestId:e.id,workspaceId:e.workspace_id}),o.capture(K.$6.COLLABORATION.PROJECT_ACCESS_REQUEST_ACCEPTED,{project_id:e.project_id,request_id:e.id,workspace_id:e.workspace_id,component:"access_requests_table"})})(e),disabled:n||i,children:"Approve"})]})})]},"".concat(e.user_id,"-").concat(e.project_id)))})]})};var W=r(8974),B=r(40702),V=r(51762),G=r(20247);let q=e=>{let{memberName:t,memberRole:r,onConfirm:s,onCancel:l}=e,[n,i]=(0,u.useState)(!1),o=async()=>{i(!0);try{await s()}finally{i(!1)}},d=r===c.j6.COLLABORATOR;return(0,a.jsxs)(G.Cf,{size:"sm",children:[(0,a.jsxs)(G.c7,{children:[(0,a.jsx)(G.L3,{children:"Remove workspace member"}),(0,a.jsxs)(G.rr,{children:["Are you sure you want to remove ",t," from this workspace?"," ",!d&&"They will no longer have access to any workspace projects or resources."]})]}),d&&(0,a.jsxs)("div",{className:"flex gap-3 rounded-md border border-warning-primary/30 bg-warning-primary/10 p-4",children:[(0,a.jsx)(x.A,{name:"warning",className:"h-5 w-5 shrink-0 text-warning-primary"}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Warning:"})," Since this user is a collaborator, removing them will remove their project-specific access to ALL projects they collaborate on in this workspace."]})]}),(0,a.jsxs)(G.Es,{className:"gap-2 sm:justify-end",children:[(0,a.jsx)(_.$,{variant:"outline",onClick:l,disabled:n,children:"Cancel"}),(0,a.jsx)(_.$,{variant:"destructive",onClick:o,disabled:n,loading:n,children:n?"Removing...":"Remove"})]})]})};var H=r(67844),Y=r(56024);let z=e=>{let{label:t,isSelected:r,onClick:s,disabled:l,className:n,destructive:i,tooltip:o,rightElement:c}=e,[d,p]=(0,u.useState)(!1);return(0,a.jsxs)(N.m_,{open:void 0!==o&&d,onOpenChange:p,children:[(0,a.jsx)(N.k$,{asChild:!0,children:(0,a.jsxs)(g._2,{onClick:s,disabled:l,className:(0,Y.cn)("flex items-center justify-between",{"bg-muted":r,"cursor-default":l,"text-destructive-primary focus:bg-destructive focus:text-destructive-foreground":i},n),children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[t,c]}),r&&(0,a.jsx)(x.A,{name:"check",size:"small"})]})}),(0,a.jsx)(N.ZI,{side:"right",className:"max-w-[30ch]",children:o})]})};var Z=r(83473),$=r(214),Q=r(60607),J=r(87299),X=r(6698),ee=r(82149),et=r(69850),er=r(21789),ea=r(33895);let es={owner:"Owner",admin:"Admin",member:"Editor",viewer:"Viewer",collaborator:"Collaborator"},el={owner:"Owners can manage all collaborators, projects, and connections.",admin:"Admins can manage editors, projects, and connections.",member:"Editors can only create and edit projects.",viewer:"Viewers can only view projects.",collaborator:"Collaborators only have access to projects they have been invited to."},en=e=>{var t;let{currentMembership:r,workspaceId:s,workspace:l,permissions:n,currentMonthUsage:i,totalUsage:d,dateJoined:p}=e,[m,h]=(0,u.useState)(null!=(t=r.monthly_credit_limit)?t:void 0),[f,v]=(0,u.useState)(!1),w=(0,u.useRef)(null),{authUser:b}=(0,B.Z2)(),y=r.user_id===(null==b?void 0:b.uid),k=(0,V.f)(q),I=!r.joined_at||""===r.joined_at,{isPaidPlan:D}=(0,P.cb)(l.plan),A=(0,E.BK)(),S=c.ss.some(e=>n.includes(e)),L=n.includes(c.eZ.AddWorkspaceCollaborators),T=n.includes(c.eZ.AddWorkspaceViewers),M=n.includes(c.eZ.AddWorkspaceEditors),K=n.includes(c.eZ.AddWorkspaceAdmins),F=n.includes(c.eZ.AddWorkspaceOwners),U=(0,c.mk)(r.role,y,n),G=n.includes(c.eZ.UpdateWorkspaceCreditLimit),{updateWorkspaceMemberRole:Y}=function(e){let{workspaceId:t}=e,r=(0,J.jE)(),a=(0,er.H)(),{mutateAsync:s}=(0,X.n)({mutationFn:async e=>{let{userId:r,role:a}=e,s=(0,o.P)();return await s.put("/workspaces/".concat(t,"/memberships/").concat(r),{role:a})},onMutate:async e=>{await (0,ea.Pf)(r,t),(0,ea.I7)(r,t,a,t=>t.map(t=>t.user_id===e.userId?{...t,role:e.role}:t))},onSuccess:async e=>{e&&(0,ea.I7)(r,t,a,t=>t.map(t=>t.user_id===e.user_id?e:t)),await r.invalidateQueries({queryKey:[...et.workspaceKeys.detail(t),"memberships"],refetchType:"all"}),await r.invalidateQueries({queryKey:et.workspaceKeys.detail(t),refetchType:"all"})},onError:()=>{(0,ea.y)(r,t,a,{refetch:!0})}});return{updateWorkspaceMemberRole:s}}({workspaceId:s}),{updateWorkspaceMemberCreditLimit:en}=function(e){let{workspaceId:t}=e,r=(0,J.jE)(),a=(0,er.H)(),{mutateAsync:s}=(0,X.n)({mutationFn:async e=>{let{userId:r,monthlyCreditLimit:a}=e,s=(0,o.P)();await s.put("/user/workspaces/".concat(t,"/memberships/").concat(r),{monthly_credit_limit:null!=a?a:-1})},onMutate:async e=>{await (0,ea.Pf)(r,t),(0,ea.I7)(r,t,a,t=>t.map(t=>t.user_id===e.userId?{...t,monthly_credit_limit:-1===e.monthlyCreditLimit?null:e.monthlyCreditLimit}:t))},onError:e=>{(0,Z.Ni)(e)},onSettled:()=>{(0,ea.y)(r,t,a)}});return{updateWorkspaceMemberCreditLimit:s}}({workspaceId:s}),{removeWorkspaceMember:ei}=function(e){let{workspaceId:t}=e,r=(0,J.jE)(),a=(0,er.H)(),s=(0,ee.mb)(e=>{var t;return null==(t=e.project)?void 0:t.id}),{mutateAsync:l}=(0,X.n)({mutationFn:async e=>{let{userId:r}=e,a=(0,o.P)();await a.delete("/workspaces/".concat(t,"/memberships/").concat(r))},onMutate:async e=>{await (0,ea.Pf)(r,t),(0,ea.I7)(r,t,a,t=>t.filter(t=>t.user_id!==e.userId),void 0,e=>Math.max(0,e-1))},onError:e=>{(0,Z.Ni)(e)},onSettled:()=>{(0,ea.y)(r,t,a,{refetch:!0,invalidateAll:!0}),s&&r.invalidateQueries({queryKey:et.gO.collaborators(s),refetchType:"active"})}});return{removeWorkspaceMember:l}}({workspaceId:s}),eo=(0,u.useCallback)(async e=>{I||await en({userId:r.user_id,monthlyCreditLimit:isNaN(null!=e?e:0)?-1:e})},[r.user_id,I,en]);(0,u.useEffect)(()=>{let e=e=>{f&&w.current&&!w.current.contains(e.target)&&eo(m).then(()=>{v(!1)})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f,m,en,eo]);let ec=async e=>{if(!I){if("admin"===e&&!D)return void A(E.KU.PRO_CHANGE_ADMIN_ROLE);if("viewer"===e&&!D)return void A(E.KU.PRO_CHANGE_VIEWER_ROLE);try{await Y({userId:r.user_id,role:e})}catch(e){(0,Z.Ni)(e)}}},ed=()=>{k({childProps:{memberName:r.display_name||r.email||r.username,memberRole:r.role,onConfirm:async()=>{await ei({userId:r.user_id}),k(!1)},onCancel:()=>k(!1)}})},eu=(0,$.ZS)();return(0,a.jsxs)(R.Hj,{className:I?"opacity-60":"",children:[(0,a.jsx)(R.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(O.H,{user:{id:r.user_id,username:r.display_name||r.email}}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("span",{className:"font-medium",children:[r.display_name||r.email,y&&(0,a.jsx)("span",{className:"font-normal",children:" (you)"})]})})]})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("span",{className:"text-sm",children:r.email})}),(0,a.jsx)(R.nA,{children:(0,a.jsxs)(g.rI,{children:[(0,a.jsxs)(N.m_,{children:[(0,a.jsx)(N.k$,{asChild:!0,children:(0,a.jsx)(g.ty,{asChild:!0,disabled:!U||!S,children:(0,a.jsxs)(_.$,{"aria-haspopup":"true",variant:"ghost",size:"sm",className:"h-auto px-2 py-1 font-normal",children:[es[r.role],U&&S&&(0,a.jsx)(x.A,{name:"chevron_down",size:"small",className:"ml-1 h-4 w-4 opacity-50"})]})})}),(0,a.jsx)(N.ZI,{className:"max-w-[30ch]",children:I?"This user has been invited to join as ".concat(es[r.role]):el[r.role]})]}),(0,a.jsx)(g.SQ,{align:"end",children:I?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(z,{label:"Remove",destructive:!0,onClick:ed,disabled:!U})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z,{label:es.owner,isSelected:"owner"===r.role,onClick:()=>ec("owner"),disabled:!F||!U,tooltip:el.owner}),(0,a.jsx)(z,{label:es.admin,isSelected:"admin"===r.role,onClick:()=>ec("admin"),disabled:(!K||!U)&&D,tooltip:el.admin,rightElement:(0,a.jsx)(j.M,{workspace:l,requiredPlanCategory:"pro"})}),(0,a.jsx)(z,{label:es.member,isSelected:"member"===r.role,onClick:()=>ec("member"),disabled:!M||!U,tooltip:el.member}),(0,a.jsx)(z,{label:es.viewer,isSelected:"viewer"===r.role,onClick:()=>ec("viewer"),disabled:(!T||!U)&&D,tooltip:D?el.viewer:"Viewer role requires a Pro plan. Click to upgrade.",rightElement:(0,a.jsx)(j.M,{workspace:l,requiredPlanCategory:"pro"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(z,{label:es.collaborator,isSelected:"collaborator"===r.role,onClick:()=>ec("collaborator"),disabled:!L||!U||"collaborator"!==r.role,tooltip:"collaborator"===r.role?el.collaborator:void 0}),"collaborator"!==r.role&&(0,a.jsxs)(N.m_,{delayDuration:0,disableHoverableContent:!1,children:[(0,a.jsx)(N.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute right-4 top-1/2 z-10 -translate-y-1/2 cursor-default select-none rounded p-0.5 hover:bg-accent",onPointerDown:e=>{e.stopPropagation(),e.preventDefault()},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,a.jsx)(x.A,{name:"info",size:"xsmall",className:"opacity-60 hover:opacity-100"})})}),(0,a.jsx)(N.ZI,{className:"max-w-[280px]",side:"right",onPointerDownOutside:e=>e.preventDefault(),onClick:e=>e.preventDefault(),children:"You can only add collaborators by inviting them to individual projects. Existing workspace members cannot be changed to collaborators."})]})]}),(0,a.jsx)(z,{label:y?"Leave":"Remove",destructive:!0,onClick:ed,disabled:!U})]})})]})}),(0,a.jsx)(R.nA,{children:I?(0,a.jsx)(H.E,{variant:"secondary",children:"Pending"}):(0,a.jsx)(H.E,{variant:"default",children:"Active"})}),(0,a.jsx)(R.nA,{className:"text-right",children:i?(0,a.jsxs)("span",{className:"text-sm",children:[(0,Q.Q)(i)," credits"]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"-"})}),(0,a.jsx)(R.nA,{className:"text-right",children:d?(0,a.jsxs)("span",{className:"text-sm font-medium",children:[(0,Q.Q)(d)," credits"]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"-"})}),(0,a.jsx)(R.nA,{className:"text-right",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:(e=>{if(!e||""===e)return"Not yet joined";try{let t=new Date(e);if(isNaN(t.getTime()))return"Not yet joined";return(0,W.GP)(t,"MMM d, yyyy")}catch(e){return"Not yet joined"}})(p||r.joined_at)})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:G&&eu&&!I&&(0,a.jsxs)(N.m_,{delayDuration:600,children:[(0,a.jsx)(N.k$,{asChild:!0,children:f?(0,a.jsx)("div",{ref:w,className:"relative flex items-center",children:(0,a.jsx)(C.p,{placeholder:"Limit",value:m||"",className:"h-7 w-20 text-xs",onChange:e=>h(parseInt(e.target.value)),onKeyDown:e=>{if("Enter"===e.key)eo(m).then(()=>{v(!1)});else if("Escape"===e.key){var t;h(null!=(t=r.monthly_credit_limit)?t:void 0),v(!1)}},autoFocus:!0})}):(0,a.jsx)(_.$,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>v(!0),children:(null==r?void 0:r.monthly_credit_limit)?"".concat(r.monthly_credit_limit,"/mo"):"No limit"})}),(0,a.jsx)(N.ZI,{className:"max-w-[30ch]",children:"Update credit limits for this member"})]})})})]})},ei={owner:5,admin:4,member:3,viewer:2,collaborator:1},eo=e=>{let{members:t,workspace:r,permissions:s,currentMonthUsage:l,totalUsage:n,isLoading:i}=e,{authUser:o}=(0,B.Z2)(),c=null==o?void 0:o.uid,[d,p]=(0,u.useState)(null),[m,h]=(0,u.useState)("asc"),[g]=(0,u.useState)(()=>new Date().getMonth()+1),[f]=(0,u.useState)(()=>new Date().getFullYear()),v=(0,u.useMemo)(()=>t.map(e=>{let t=null==l?void 0:l.user_usages.find(t=>t.user_id===e.user_id),r=null==n?void 0:n.find(t=>t.user_id===e.user_id);return{...e,currentMonthUsage:(null==t?void 0:t.count)||0,totalUsage:(null==r?void 0:r.count)||0,dateJoined:e.joined_at}}),[t,l,n]),j=(0,u.useMemo)(()=>{let e=d?[...v]:v;if(d&&(e=e.sort((e,t)=>{let r,a;switch(d){case"name":r=e.display_name||e.email,a=t.display_name||t.email;break;case"email":r=e.email,a=t.email;break;case"role":r=ei[e.role]||0,a=ei[t.role]||0;break;case"currentUsage":r=e.currentMonthUsage||0,a=t.currentMonthUsage||0;break;case"totalUsage":r=e.totalUsage||0,a=t.totalUsage||0;break;case"dateJoined":r=e.dateJoined||"",a=t.dateJoined||"";break;default:return 0}return"currentUsage"===d||"totalUsage"===d||"role"===d?"asc"===m?r-a:a-r:r<a?"asc"===m?-1:1:r>a?"asc"===m?1:-1:0})),!d&&c){let t=e.findIndex(e=>e.user_id===c);t>0&&(e=[e[t],...e.slice(0,t),...e.slice(t+1)])}return e},[v,d,m,c]),w=e=>{d===e?h("asc"===m?"desc":"asc"):(p(e),h("asc"))},b=e=>{let{field:t}=e;return d!==t?(0,a.jsx)(x.A,{name:"unfold_more",className:"ml-2 h-4 w-4"}):"asc"===m?(0,a.jsx)(x.A,{name:"chevron_up",className:"ml-2 h-4 w-4"}):(0,a.jsx)(x.A,{name:"chevron_down",className:"ml-2 h-4 w-4"})};return i?(0,a.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:"Loading members..."}):0===t.length?(0,a.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:"No members found"}):(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(R.XI,{children:[(0,a.jsx)(R.A0,{children:(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nd,{className:"w-[250px]",children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("name"),children:["Member",(0,a.jsx)(b,{field:"name"})]})}),(0,a.jsx)(R.nd,{children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("email"),children:["Email",(0,a.jsx)(b,{field:"email"})]})}),(0,a.jsx)(R.nd,{children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("role"),children:["Role",(0,a.jsx)(b,{field:"role"})]})}),(0,a.jsx)(R.nd,{children:"Status"}),(0,a.jsx)(R.nd,{className:"text-right",children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("currentUsage"),children:[(0,W.GP)(new Date(f,g-1),"MMM")," Usage",(0,a.jsx)(b,{field:"currentUsage"})]})}),(0,a.jsx)(R.nd,{className:"text-right",children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("totalUsage"),children:["Total Usage",(0,a.jsx)(b,{field:"totalUsage"})]})}),(0,a.jsx)(R.nd,{className:"text-right",children:(0,a.jsxs)(_.$,{variant:"ghost",className:"h-auto p-0 font-medium hover:bg-transparent",onClick:()=>w("dateJoined"),children:["Date Joined",(0,a.jsx)(b,{field:"dateJoined"})]})}),(0,a.jsx)(R.nd,{className:"text-right",children:"Limits"})]})}),(0,a.jsx)(R.BF,{children:j.map(e=>(0,a.jsx)(en,{currentMembership:e,workspace:r,workspaceId:r.id,permissions:s,currentMonthUsage:e.currentMonthUsage,totalUsage:e.totalUsage,dateJoined:e.dateJoined},"".concat(e.email,"-").concat(e.user_id)))})]})})},ec=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Pending",value:"pending"}],ed=[{label:"Owner",value:"owner"},{label:"Admin",value:"admin"},{label:"Editor",value:"member"},{label:"Viewer",value:"viewer"},{label:"Collaborator",value:"collaborator"}],eu=e=>{let{currentPage:t,totalPages:r,onPreviousPage:s,onNextPage:l,onFirstPage:n,onLastPage:i,totalCount:o,pageSize:c}=e;if(r<=1)return null;let d=Math.min(t*c,o);return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(t-1)*c+1,"-",d," of ",o," members"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.$,{variant:"outline",size:"sm",onClick:n,disabled:1===t,children:(0,a.jsx)(x.A,{name:"first_page",className:"h-4 w-4"})}),(0,a.jsx)(_.$,{variant:"outline",size:"sm",onClick:s,disabled:1===t,children:(0,a.jsx)(x.A,{name:"chevron_left",className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[t," of ",r]}),(0,a.jsx)(_.$,{variant:"outline",size:"sm",onClick:l,disabled:t===r,children:(0,a.jsx)(x.A,{name:"chevron_right",className:"h-4 w-4"})}),(0,a.jsx)(_.$,{variant:"outline",size:"sm",onClick:i,disabled:t===r,children:(0,a.jsx)(x.A,{name:"last_page",className:"h-4 w-4"})})]})]})},ep=e=>{var t;let{memberships:r,workspace:s,searchParams:l,search:n,total:o,isLoading:h,PAGE_SIZE:g}=e,[f,v]=(0,u.useState)(l.status||"all"),[j,w]=(0,u.useState)(l.query||""),[L,T]=(0,u.useState)(l.roles||ed.map(e=>e.value)),[O]=(0,u.useState)(()=>new Date().getMonth()+1),[R]=(0,u.useState)(()=>new Date().getFullYear()),{permissions:M}=(0,m.S)(),K=M.includes(c.eZ.ViewWorkspaceUsage),F=M.includes(c.eZ.ViewWorkspaceMembers)&&K,W=c.ss.some(e=>M.includes(e)),{data:B}=(0,i.I)({...I.y.workspaceUsage({workspaceId:s.id,month:O,year:R}),permission:c.eZ.ViewWorkspaceUsage,enabled:K}),{data:V}=(0,i.I)({...I.y.workspaceUserTotalUsage({workspaceId:s.id}),permission:c.eZ.ViewWorkspaceUsage,enabled:K}),{data:G}=(0,d.I)(I.y.projectAccessRequests(s.id)),q=(0,k.d)(j,250);(0,u.useEffect)(()=>{if(0===L.length)return;let e=q;e.length<3&&(e=""),n({query:e,offset:0,status:f,roles:L.length===ed.length?void 0:L})},[q,f,L,n]);let H="free"===(0,P.m6)(s.plan),Y=(0,E.BK)(),{inviteWorkspaceMember:z,isInvitingMember:Z}=(0,S.s)({workspaceId:s.id}),{exportMembers:$,isExporting:Q}=function(e){let[t,r]=(0,u.useState)(!1);return{exportMembers:async()=>{try{r(!0);let t=await A.tokenManager.getValidToken(),a={};t&&(a.Authorization="Bearer ".concat(t));let s=(0,D.N)(),l=await fetch("".concat(s,"/workspaces/").concat(e,"/memberships/export"),{method:"GET",headers:a,credentials:"include"});if(!l.ok)throw Error("Export failed: ".concat(l.statusText));let n=l.headers.get("Content-Disposition"),i=new Date,o=e=>String(e).padStart(2,"0"),c="workspace_members_".concat(i.getUTCFullYear(),"-").concat(o(i.getUTCMonth()+1),"-").concat(o(i.getUTCDate()),"_").concat(o(i.getUTCHours()),"-").concat(o(i.getUTCMinutes()),".csv");if(n){let e=n.match(/filename="([^"]+)"/i);(null==e?void 0:e[1])&&(c=e[1])}let d=await l.blob(),u=URL.createObjectURL(d),p=document.createElement("a");return p.href=u,p.download=c,p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(u),{success:!0}}catch(e){return console.error("Failed to export members:",e),{success:!1,error:e}}finally{r(!1)}},isExporting:t}}(s.id),J=async()=>{let e=p.toast.loading("Preparing CSV export..."),t=await $();(null==t?void 0:t.success)?p.toast.success("Export ready. Download should begin shortly.",{id:e,duration:4e3}):p.toast.error("Export failed. Please try again.",{id:e})},X=async e=>{let{emails:t,role:r}=e;if(0===t.length)return{success:!1};if("admin"===r&&H)return Y(E.KU.PRO_SEND_ADMIN_INVITE),{success:!1};if("viewer"===r&&H)return Y(E.KU.PRO_SEND_VIEWER_INVITE),{success:!1};let a=0;for(let e of t)await z({email:e,role:r}),a++;return{success:a>0}},ee=e=>{w(e)};return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Invite new members"}),(0,a.jsx)(b,{onInvite:e=>{let{emails:t,role:r}=e;return X({emails:t,role:r})},isInviting:Z,roleOptions:[{value:"admin",label:"Admin"},{value:"member",label:"Editor"},{value:"viewer",label:"Viewer"}],defaultRole:"member",placeholder:"Add emails",completelyDisabled:!W,workspace:s})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Members"}),(j||"all"!==f||L.length<ed.length)&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[o," members found"]})]}),F&&(0,a.jsxs)(N.m_,{children:[(0,a.jsx)(N.k$,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",onClick:J,disabled:Q,"aria-label":"Export members CSV",children:Q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{name:"refresh",className:"mr-1 h-4 w-4 animate-spin"}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{name:"download",className:"mr-1 h-4 w-4"}),"Export"]})})}),(0,a.jsx)(N.ZI,{align:"end",children:"Exports all workspace members as a CSV, including monthly usage and credit limits."})]})]}),G&&G.length>0&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium",children:["Access Requests (",G.length,")"]}),(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsx)(U,{requests:G})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(C.p,{type:"text",placeholder:"Search members by name or email...",value:j,onChange:e=>ee(e.target.value),className:"pl-9"}),j&&(0,a.jsx)(_.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>ee(""),children:(0,a.jsx)(x.A,{name:"x",className:"h-3 w-3"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between",children:[(0,a.jsx)("div",{className:"flex gap-2",children:ec.map(e=>{let{label:t,value:r}=e;return(0,a.jsx)(_.$,{variant:f===r?"default":"outline",size:"sm",onClick:()=>{v(r)},className:"text-xs",children:t},r)})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("h5",{className:"m-2 text-xs font-medium text-muted-foreground",children:"Filter by role"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:ed.map(e=>{let{label:t,value:r}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.S,{id:"role-".concat(r),checked:L.includes(r),onCheckedChange:()=>(e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(r)}),(0,a.jsx)("label",{htmlFor:"role-".concat(r),className:"cursor-pointer select-none text-sm",children:t})]},r)})})]})]}),(0,a.jsx)("div",{className:"rounded-lg border",children:0===L.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)(x.A,{name:"person",className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,a.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"No roles selected"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please select at least one role above to view members"})]}):(0,a.jsx)(eo,{members:r,workspace:s,permissions:M,currentMonthUsage:B,totalUsage:V,isLoading:h})}),L.length>0&&(0,a.jsx)(eu,{currentPage:Math.floor((null!=(t=l.offset)?t:0)/g)+1,totalPages:Math.ceil(o/g),onPreviousPage:()=>{var e;return n({offset:Math.max(0,(null!=(e=l.offset)?e:0)-g)})},onNextPage:()=>{var e;return n({offset:(null!=(e=l.offset)?e:0)+g})},onFirstPage:()=>n({offset:0}),onLastPage:()=>n({offset:Math.floor((o-1)/g)*g}),totalCount:o,pageSize:g})]})]})};var em=r(25080);let eh=20,e_=e=>{let{workspace:t}=e,{maxSeats:r,isLoadingMaxSeats:s,memberCount:d}=function(e){let{data:t,isLoading:r}=(0,i.I)({queryKey:["workspace",e,"maxSeats"],queryFn:async()=>{let t=(0,o.P)();return(await t.get("/workspaces/".concat(e,"/max-seats"))).max_seats},permission:c.eZ.ViewWorkspaceMembers,enabled:!!e}),{builderCount:a}=(0,em.Ft)({workspaceId:e});return{maxSeats:t,isLoadingMaxSeats:r,memberCount:a}}(t.id),u=function(e,t,r,s){return(0,a.jsxs)(a.Fragment,{children:["Inviting people to ",(0,a.jsx)("strong",{children:e.name||"the workspace"})," gives access to workspace shared projects and credits."," ",null!=r?(0,a.jsxs)(a.Fragment,{children:["You're using ",t,"/",s?"...":r," builder",1===t?"":"s",". Need more?"," ",(0,a.jsx)(l(),{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"Contact us"}),"."]}):(0,a.jsxs)(a.Fragment,{children:["You have ",t," builder",1===t?"":"s"," in this workspace."]})]})}(t,d,r,s),{members:p,total:m,isLoading:h,search:_,searchParams:g}=(0,em._A)({workspaceId:t.id});return(0,a.jsx)(n.Pt,{title:"People",value:"people",description:u,docsLink:"https://docs.lovable.dev/user-guides/teams",children:(0,a.jsx)(er.k,{searchParams:g,children:(0,a.jsx)(ep,{memberships:p,workspace:t,searchParams:g,search:_,total:m,isLoading:h,PAGE_SIZE:eh})})})}},63424:(e,t,r)=>{"use strict";r.d(t,{bT:()=>d,bY:()=>m,x_:()=>c});var a=r(77145),s=r(95661),l=r(58295),n=r(87252);let i={GAP_SCALE_FACTOR:.002,MIN_GAP_WIDTH:2,MIN_INDICATOR_WIDTH:7,PROGRESS_BAR_HEIGHT:11,FALLBACK_MIN_WIDTH_PERCENTAGE:2},o=["bg-blue-800","bg-blue-600","bg-blue-400","bg-blue-200","bg-blue-50"],c=(e,t)=>{if(!e)return"bg-muted-foreground";if("granted"===e)return"bg-brand-twilight-primary";let r=t.filter(e=>"granted"!==e.name).findIndex(t=>t.name===e);return -1===r?"bg-muted-foreground":o[Math.min(r,o.length-1)]},d=e=>{switch(e){case"daily":return"Daily credits used first";case"rollover":return"Using rollover credits";case"billing":return"Using monthly credits";case"topup":return"Using topup credits";case"granted":return"Using bonus credits";case null:return"You are out of credits"}},u={granted:"Bonus",billing:"Monthly",rollover:"Rollover",topup:"Top-up",daily:"Daily"},p=e=>u[e],m=e=>{let{progressData:t}=e,r=(0,s.useRef)(null),[o,d]=(0,s.useState)(0);(0,s.useLayoutEffect)(()=>{let e=()=>{r.current&&d(r.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=Math.max(i.MIN_GAP_WIDTH,o*i.GAP_SCALE_FACTOR),m=i.MIN_INDICATOR_WIDTH,h=(0,s.useMemo)(()=>t.hasCredits?t.sources.map((e,r)=>{let a=Math.max(t.totalAllocation>0?e.remaining/t.totalAllocation*100:0,o>0?m/o*100:i.FALLBACK_MIN_WIDTH_PERCENTAGE),s=r===t.sources.length-1,l=c(e.name,t.sources);return{...e,widthPercentage:a,isFirst:0===r,isLast:s,colorClass:l}}):[],[t.hasCredits,t.sources,t.totalAllocation,o,m]),_=(0,s.useMemo)(()=>{if(!t.hasCredits||0===h.length)return[];let e=o>0?u/o*100:.4,r=Math.max(0,h.length-1)*e,a=h.reduce((e,t)=>e+t.widthPercentage,0)+r,s=a>100?100/a:1,l=e*s,n=0;return h.map(e=>{let t=e.widthPercentage*s,r=n;return n+=t+(e.isLast?0:l),{...e,widthPercentage:t,leftOffset:r}})},[t.hasCredits,h,o,u]);return t.hasCredits?(0,a.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,a.jsx)("div",{ref:r,className:"relative flex-1 overflow-hidden rounded-lg bg-muted-active",style:{height:"".concat(i.PROGRESS_BAR_HEIGHT,"px")},children:_.map(e=>(0,a.jsxs)(l.m_,{delayDuration:0,children:[(0,a.jsx)(l.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute h-full cursor-pointer ".concat(e.colorClass," transition-all ").concat(e.isFirst?"rounded-bl-lg rounded-tl-lg":""," ").concat(e.isLast?"rounded-br-lg rounded-tr-lg":""),style:{left:"".concat(e.leftOffset,"%"),width:"".concat(e.widthPercentage,"%")}})}),(0,a.jsx)(l.ZI,{className:"border border-gray-200 bg-white shadow-lg",children:(0,a.jsx)("div",{className:"justify-center text-xs font-normal leading-none text-black",children:["granted","topup"].includes(e.name)?"".concat((0,n.Q)(e.remaining)," ").concat(p(e.name)," credits"):"".concat((0,n.Q)(e.remaining),"/").concat((0,n.Q)(e.limit)," ").concat(p(e.name)," credits")})})]},e.name))})}):(0,a.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,a.jsx)("div",{className:"relative h-2.5 flex-1 overflow-hidden rounded-lg bg-muted-active"})})}},64482:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,f:()=>n});var a=r(95661),s=r(83220),l=r(8904);let n=()=>{let e=(0,s.j4)(e=>e.currentWorkspace);return(0,a.useMemo)(()=>{var t;return!!(null==e||null==(t=e.experimental_features)?void 0:t.lovable_cloud)},[e])},i=e=>{let{supabaseIntegrationData:t}=(0,l.U)(null==e?void 0:e.id);return(0,a.useMemo)(()=>!!e&&!!t&&!!t.is_managed_by_lovable,[t,e])}},69994:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var a=r(43610),s=r(53792),l=r(72632),n=r(87252);let i=e=>e?"string"==typeof e?new Date(e):e.toDate():null,o=e=>{let{billingPeriodCreditLimit:t,billingPeriodCreditsUsed:r,dailyCreditLimit:o,dailyCreditsUsed:c,bonusCredits:d,billingPeriodEndDate:u,totalCreditsUsedInBillingPeriod:p,topUpCredits:m,topUpCreditsExpireDate:h,rolloverCreditsLimit:_,rolloverCreditsUsed:g}=(0,a.$)(e),x=(null==e?void 0:e.plan)==="free"?Math.max(0,Math.min(s.le-(null!=p?p:0),null!=o?o:0)):null!=o?o:0,f={granted:(0,n.V)(d),billing:(0,n.V)(t),rollover:(0,n.V)(_),topup:(0,n.V)(m),daily:(0,n.V)(x)},v={granted:0,topup:0,billing:(0,n.V)(Math.min(r,f.billing)),rollover:(0,n.V)(Math.min(g,f.rollover)),daily:(0,n.V)(Math.min(c,f.daily))},j=(e=>{if(!e)return!1;let{isLegacyPlan:t,isAmbassadorPlan:r,isLitePlan:a}=(0,l.cb)(e.plan);return(t||r||a)&&(0===e.billing_period_credits_limit||void 0===e.billing_period_credits_limit)})(e),w={granted:(0,n.V)(f.granted-v.granted),billing:j?0:(0,n.V)(f.billing-v.billing),rollover:(0,n.V)(f.rollover-v.rollover),topup:(0,n.V)(f.topup-v.topup),daily:(0,n.V)(f.daily-v.daily)},b=(0,n.V)(w.granted+w.billing+w.rollover+w.topup+w.daily),E=(0,n.V)(v.billing+v.rollover+v.topup+v.daily),y=(0,n.V)(j?f.granted+f.rollover+f.topup+f.daily:f.granted+f.billing+f.rollover+f.topup+f.daily),C=[{name:"granted",remaining:w.granted,limit:f.granted},{name:"topup",remaining:w.topup,limit:f.topup},{name:"billing",remaining:w.billing,limit:f.billing},{name:"rollover",remaining:w.rollover,limit:f.rollover},{name:"daily",remaining:w.daily,limit:f.daily}].filter(e=>e.remaining>0);return{totalRemaining:b,totalAllocation:y,totalUsed:E,sources:C,hasCredits:y>0,currentlyConsuming:w.daily>0?"daily":w.rollover>0?"rollover":w.billing>0?"billing":w.topup>0?"topup":w.granted>0?"granted":null,billingPeriodEndDate:u,creditsResetDate:(e=>{if(!e)return null;if("annual"===e.plan_type){let t=i(e.last_rollover_period||e.billing_period_start_date||e.billing_period_end_date);if(t){let e=t.getMonth()+1,r=t.getFullYear(),a=t.getDate(),s=new Date(r,e+1,0).getDate();return new Date(r,e,Math.min(a,s))}return null}return e.billing_period_end_date?i(e.billing_period_end_date):null})(e),totalCreditsUsedInBillingPeriod:null!=p?p:0,topUpCreditsExpireDate:h}}},73726:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var a=r(77145);r(95661);var s=r(69730),l=r(58295);let n=e=>{let{name:t="question_circle",children:r,size:n="small",delay:i,tooltipContentClassName:o,...c}=e;return(0,a.jsxs)(l.m_,{delayDuration:i,children:[(0,a.jsx)(l.k$,{asChild:!0,children:(0,a.jsx)(s.I,{name:t,size:n,...c})}),(0,a.jsx)(l.ZI,{className:o,children:r})]})}},74507:(e,t,r)=>{"use strict";r.d(t,{A5:()=>s,O3:()=>l,eZ:()=>n,j6:()=>a,mk:()=>o,ss:()=>i});let a={OWNER:"owner",ADMIN:"admin",MEMBER:"member",VIEWER:"viewer",COLLABORATOR:"collaborator"},s=["initiated","awaiting_dns","active_provisioning","active","drifted","provisioning_failed","tombstoned"],l=["connect","buy"];var n=function(e){return e.FeatureBadgeVisibility="feature:badge-visibility",e.FeatureCustomDomains="feature:custom-domains",e.FeaturePrivateProjectDeployment="feature:private-project-deployment",e.FeatureEditExternalPublishPermissionLevel="feature:edit-external-publish-permission-level",e.FeatureEditDefaultProjectPublishVisibility="feature:edit-default-project-publish-visibility",e.FeatureDataOptOut="feature:data-opt-out",e.FeatureToggleEditorCanInvite="feature:toggle-editor-can-invite",e.FeatureInviteCollaboratorRole="feature:invite-collaborator-role",e.ViewProject="project:view",e.EditProject="project:edit",e.ManageProjectSettings="project:settings:manage",e.DeleteProject="project:delete",e.TransferProject="project:transfer",e.DownloadProject="project:download",e.ViewProjectUsage="project:usage:view",e.EditProjectVisibility="project:visibility:edit",e.EditProjectBadge="project:badge:edit",e.DeployPrivateProject="project:deploy:private",e.DeployPublicProject="project:deploy:public",e.ViewProjectFiles="project:files:view",e.EditProjectFiles="project:files:edit",e.RemixProject="project:remix",e.ViewProjectCollaborators="project:collaborators:view",e.AddProjectOwners="project:collaborators:add:owner",e.AddProjectAdmins="project:collaborators:add:admin",e.AddProjectEditors="project:collaborators:add:editor",e.AddProjectViewers="project:collaborators:add:viewer",e.RemoveProjectOwners="project:collaborators:remove:owner",e.RemoveProjectAdmins="project:collaborators:remove:admin",e.RemoveProjectEditors="project:collaborators:remove:editor",e.RemoveProjectViewers="project:collaborators:remove:viewer",e.ManageMagicCodes="project:collaborators:magic-codes:manage",e.ManageProjectDomains="project:domains:manage",e.DisconnectProjectSupabase="project:supabase:disconnect",e.ManageProjectGit="project:git:manage",e.ManageProjectIntegrations="project:integrations:manage",e.HireExpert="project:expert:hire",e.SubmitProjectFeedback="project:feedback:submit",e.ManageProjectBookmarks="project:bookmarks:manage",e.UpdateProjectPresence="project:presence:update",e.CreateWorkspaces="workspace:create",e.ViewWorkspace="workspace:view",e.LeaveWorkspace="workspace:leave",e.EditWorkspaceSettings="workspace:settings:edit",e.ViewWorkspaceUsage="workspace:usage:view",e.ManageWorkspacePlan="workspace:plan:manage",e.UpdateWorkspaceCreditLimit="workspace:credit-limit:update",e.ViewWorkspaceMembers="workspace:members:view",e.AddWorkspaceOwners="workspace:roles:add:owner",e.AddWorkspaceAdmins="workspace:roles:add:admin",e.AddWorkspaceEditors="workspace:roles:add:editor",e.AddWorkspaceViewers="workspace:roles:add:viewer",e.AddWorkspaceCollaborators="workspace:roles:add:collaborator",e.RemoveWorkspaceOwners="workspace:roles:remove:owner",e.RemoveWorkspaceAdmins="workspace:roles:remove:admin",e.RemoveWorkspaceEditors="workspace:roles:remove:editor",e.RemoveWorkspaceViewers="workspace:roles:remove:viewer",e.RemoveWorkspaceCollaborators="workspace:roles:remove:collaborator",e.ViewWorkspaceProjects="workspace:projects:view",e.CreateWorkspaceProjects="workspace:projects:create",e.ManageWorkspaceTemplates="workspace:templates:manage",e.EditDefaultProjectPublishVisibility="workspace:default-project-publish-visibility:edit",e.EditExternalPublishPermissionLevel="workspace:external-publish-permission-level:edit",e.EditDataOptOut="workspace:data-opt-out:edit",e.EditRestrictWorkspaceInvitations="workspace:restrict-workspace-invitations:edit",e.ViewWorkspaceLibraries="workspace:libraries:view",e.ManageWorkspaceLibraries="workspace:libraries:manage",e.CreateFolders="workspace:folders:create",e.UpdateFolders="workspace:folders:update",e.DeleteFolders="workspace:folders:delete",e.AddProjectsToFolders="workspace:folders:projects:add",e.RemoveProjectsFromFolders="workspace:folders:projects:remove",e.ManageWorkspaceBilling="workspace:billing:manage",e.ManageWorkspaceGit="workspace:git:manage",e.ManageWorkspaceIntegrations="workspace:integrations:manage",e.ManageWorkspaceSupabase="workspace:supabase:manage",e.ManageWorkspaceIdentity="workspace:identity:manage",e.ManageBenchmarks="workspace:benchmarks:manage",e.ManageEvals="workspace:evals:manage",e.ManageInternalChat="workspace:internal-chat:manage",e.ManageAnalytics="workspace:analytics:manage",e.ManageFeaturedProjects="project:featured:manage",e.RemixProjectSnapshot="project:remix:snapshot",e.ManageProjectAnnotations="project:annotations:manage",e}({});let i=["workspace:roles:add:owner","workspace:roles:add:viewer","workspace:roles:add:editor","workspace:roles:add:admin","workspace:roles:add:collaborator"],o=(e,t,r)=>{if(t)return!1;switch(e){case"owner":return r.includes("workspace:roles:remove:owner");case"admin":return r.includes("workspace:roles:remove:admin");case"member":return r.includes("workspace:roles:remove:editor");case"viewer":return r.includes("workspace:roles:remove:viewer");case"collaborator":return r.includes("workspace:roles:remove:collaborator");default:return!1}}},76449:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var a=r(77145),s=r(29485);r(95661);var l=r(56024),n=r(98324),i=r.n(n);let o=(0,s.F)("",{variants:{variant:{default:i().shimmerText,success:i().shimmerTextSuccess}},defaultVariants:{variant:"default"}}),c=e=>{let{children:t,className:r,isShimmering:s=!1,variant:n,...i}=e;return(0,a.jsx)("span",{className:(0,l.cn)(r,s&&o({variant:n})),...i,children:t})}},82149:(e,t,r)=>{"use strict";r.d(t,{Np:()=>j,vd:()=>y,mb:()=>C,Om:()=>b,Iw:()=>E});var a=r(77145),s=r(6698),l=r(81496),n=r(13410),i=r(95661),o=r(31088),c=r(84510),d=r(40702),u=r(83220),p=r(28717),m=r(87299),h=r(63851),_=r(19620),g=r(69850),x=r(35418),f=r(7204);let v=(0,i.createContext)(null),j=e=>{let{children:t,projectId:r}=e;return(0,a.jsx)(w,{projectId:r,children:t},r)},w=e=>{let{children:t,projectId:r}=e,j=(0,i.useRef)((0,c.vt)(()=>({projectId:r,project:void 0,isLoading:!0,isDeleting:!1,hasPermissionDenied:!1}))),[w,b]=(0,i.useState)(0),E=(0,n.useRouter)(),{isAuthenticated:y}=(0,d.Z2)(),{userData:C}=(0,p.ur)(),N=(0,u.Ic)(),k=(0,u.zC)(),P=(0,u.j4)(e=>e.currentWorkspace);!function(e,t){let r=(0,i.useRef)(!1),a=(0,m.jE)();(0,i.useEffect)(()=>{e&&t&&!r.current&&(async()=>{try{let s=(0,h.P)();await s.post("/projects/".concat(e,"/mark-viewed"),{workspace_id:t}),r.current=!0,a.invalidateQueries({queryKey:[...g.workspaceKeys.detail(t),"recently-viewed-projects"],exact:!1}),a.refetchQueries({queryKey:[...g.workspaceKeys.detail(t),"recently-viewed-projects"],exact:!1,type:"active"})}catch(r){_.logging.error("Failed to mark project viewed",{error:r,projectId:e,workspaceId:t})}})()},[e,t,a])}(r,null==P?void 0:P.id),(0,i.useEffect)(()=>{if(!r)return;let e=(0,l.H9)(x.db,"projects",r),t=(0,l.aQ)(e,e=>{let t=e.data();t&&!t.deleted_at?(j.current.setState({project:t,isLoading:!1,hasPermissionDenied:!1}),t.workspace_id&&N(r,t.workspace_id)):j.current.getState().isDeleting||(_.logging.error("PROJECT NOT FOUND",{projectId:r,docExists:e.exists(),userId:null==C?void 0:C.id}),E.push("/projects/not-found"))},e=>{_.logging.error("PROJECT PERMISSION ERROR",{error:e,projectId:r}),"permission-denied"===e.code?j.current.setState({hasPermissionDenied:!0,isLoading:!1}):(j.current.setState({isLoading:!1}),o.toast.error("Error",{description:"Failed to fetch project."}))});return()=>{t(),k()}},[r,C,y,E,w,k,N]);let I=(0,s.n)({mutationFn:async e=>{let{project:t}=j.current.getState();if(!t)return;let a=(0,h.P)();await a.put("/projects/".concat(r),e)},onMutate:e=>{let t=j.current,{project:r}=t.getState();r&&t.setState({project:{...r,...e}})},throwOnError:!0}),D=(0,s.n)({mutationFn:e=>{let{visibility:t,skipToast:a}=e;return t?(0,h.P)().put("/projects/".concat(r,"/visibility"),{visibility:t}):Promise.resolve()},onSuccess:(e,t)=>{let{visibility:r,skipToast:a}=t;a||("public"===r?o.toast.success("Visibility updated",{description:"Your project is now public."}):"private"===r?o.toast.success("Visibility updated",{description:"Your project is now private."}):"draft"===r?o.toast.success("Visibility updated",{description:"Your project is now personal."}):o.toast.success("Visibility updated"))},onError:()=>{o.toast.error("Error",{description:"Failed to update visibility"})}}),A=(0,s.n)({mutationFn:async e=>{let t=(0,h.P)(),a=await t.post("/projects/".concat(r,"/badge/visibility"),{hide_badge:e});try{await (0,f.o)({projectId:r})}catch(e){_.logging.error("Error updating deployment",{error:e})}return a}});((e,t)=>{let r=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{"pending"===e?r.current=o.toast.loading(t.pending.title,t.pending.options):"success"===e?r.current?(o.toast.success(t.success.title,{id:r.current,...t.success.options,duration:3e3,dismissible:!1}),r.current=void 0):o.toast.success(t.success.title,t.success.options):"error"===e&&(r.current?(o.toast.error(t.error.title,{id:r.current,...t.error.options,duration:3e3,dismissible:!1}),r.current=void 0):o.toast.error(t.error.title,t.error.options))},[e])})(A.status,{pending:{title:"Updating badge visibility..."},success:{title:"Badge visibility updated"},error:{title:"Failed to update badge visibility",options:{duration:3,description:"We couldn't update the badge visibility right now. Please try again in a few minutes."}}});let S=(0,i.useCallback)(()=>{b(e=>e+1)},[]),L=(0,s.n)({mutationFn:e=>(0,h.P)().put("/projects/".concat(r),{publish_visibility:e}),onError:e=>{o.toast.error("Error",{description:e.message||"Failed to update website access"})}}),T={store:j.current,updateProject:(e,t)=>{I.mutate(e,{onSuccess:()=>{(null==t?void 0:t.onSuccess)&&t.onSuccess()},onError:e=>{(null==t?void 0:t.onError)&&t.onError(e)}})},setVisibilityMutation:D,setBadgeVisibility:A.mutateAsync,setPublishVisibility:L,refetchProject:S};return(0,a.jsx)(v.Provider,{value:T,children:t})};function b(){let e=(0,i.useContext)(v);if(!e)throw Error("useProjectContext must be used within a ProjectProvider");return e}function E(e){let{store:t}=b();return t(e)}function y(){let e=(0,i.useContext)(v);if(e)return e}function C(e){let t=y();return null==t?void 0:t.store(e)}},83022:(e,t,r)=>{"use strict";r.d(t,{O:()=>c});var a=r(77145),s=r(46753),l=r.n(s),n=r(95290),i=r(52811),o=r(19695);let c=e=>{let{type:t,variant:r,onClick:s,href:c,isExternal:d,text:u,showTooltip:p,tooltipContent:m,disabled:h,loading:_,testId:g}=e;return"link"===t?(0,a.jsx)(i.$,{variant:r,asChild:!0,onClick:s,className:d?"h-9 w-full whitespace-nowrap":"h-9",children:(0,a.jsx)(l(),{href:c,passHref:!0,target:d?"_blank":void 0,children:u})}):(0,a.jsx)(o.Q,{showTooltip:p||!1,tooltipContent:m||"",delayDuration:300,children:(0,a.jsx)(n.oO,{onClick:s,variant:r,disabled:h,loading:_,className:"h-9","data-testid":g,children:u})})}},83220:(e,t,r)=>{"use strict";r.d(t,{cA:()=>C,zC:()=>S,Dx:()=>N,j4:()=>P,QY:()=>D,nu:()=>I,Ic:()=>A});var a=r(77145),s=r(18502),l=r(13410),n=r(95661),i=r(31088),o=r(84510),c=r(40702),d=r(28717),u=r(92034),p=r(56455),m=r(19620),h=r(99989),_=r(49493),g=r(87299),x=r(6698),f=r(83473),v=r(63851),j=r(69850),w=r(49974),b=r(91169),E=r(45756);let y=(0,n.createContext)(null);function C(e){var t,r,C,N;let k,{children:P,initialWorkspaceId:I}=e,{allWorkspaces:D,isLoading:A}=(0,_.Mu)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading})),S=null!=(t=null==D?void 0:D[0])?t:null,L=(0,n.useRef)((0,o.vt)(e=>({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1,projectId:null,projectWorkspaceId:null,currentUserSelectedWorkspaceId:null,setProjectWorkspaceOverride:(t,r)=>e({projectId:t,projectWorkspaceId:r}),clearProjectWorkspaceOverride:()=>e({projectId:null,projectWorkspaceId:null}),setCurrentUserSelectedWorkspaceId:t=>e({currentUserSelectedWorkspaceId:t})}))),T=L.current,O=T(e=>e.projectId),R=T(e=>e.projectWorkspaceId),M=!!O&&!!R,K=T(e=>e.currentUserSelectedWorkspaceId),F=(0,p.dA)(e=>e.active),{authUser:U}=(0,c.Z2)(),{userData:W}=(0,d.ur)(),B=(0,l.useRouter)(),V=(0,l.usePathname)(),G=(0,l.useSearchParams)(),q=G.get("workspaceId"),H=(k=null!=(r=null==U?void 0:U.uid)?r:"","".concat("lovable-current-workspace-id","-").concat(k)),[Y,z]=(0,n.useState)(I),Z=M?R:Y,$=(0,n.useCallback)(e=>{if(M)return void m.logging.debug("Cannot change workspace in project context",{newId:e});z(e),T.getState().setCurrentUserSelectedWorkspaceId(e);try{e?window.localStorage.setItem(H,e):window.localStorage.removeItem(H)}catch(t){m.logging.debug("Error setting current workspace id to localstorage",{error:t,newId:e})}},[H,M,T]),Q=(0,n.useCallback)(()=>{let e=new URLSearchParams(G);e.delete("workspace");let t=e.toString(),r=window.location.hash,a="".concat(V).concat(t?"?".concat(t):"").concat(r);B.replace(a,{scroll:!1})},[B,V,G]),J=(0,n.useRef)(!1);(0,n.useEffect)(()=>{M||U&&!A&&(()=>{if(J.current){!Y&&(null==S?void 0:S.id)&&$(S.id);return}if(I&&D){if(D.some(e=>e.id===I)){$(I),Q(),J.current=!0;return}i.toast.error("The workspace you're trying to access is not available"),Q()}try{let e=window.localStorage.getItem(H);if(e&&D&&D.some(t=>t.id===e)){$(e),J.current=!0;return}}catch(e){m.logging.debug("Error getting current workspace id from localstorage",{error:e})}if(null==S?void 0:S.id){$(S.id),J.current=!0;return}$(null),J.current=!0})()},[U,D,A,I,null==S?void 0:S.id,Y,H,$,Q,M]);let{data:X,isLoading:ee,isError:et}=(0,s.I)({...h.y.detail({workspaceId:null!=Z?Z:"",projectId:M?O:void 0}),enabled:!!Z&&!F});!et||F||M||$(null!=(C=null==S?void 0:S.id)?C:null);let{data:er}=(0,s.I)({...h.y.detail({workspaceId:null!=q?q:"",projectId:void 0}),enabled:!M&&!!q});!function(e){let{authUser:t,currentWorkspaceId:r,userData:a,isLoadingAllWorkspaces:s,currentWorkspace:l,isProjectScoped:i}=e,[o,c]=(0,n.useState)(!1),{toCheckout:d}=(0,b.R)(),u=(0,n.useCallback)(async()=>{if((null==t?void 0:t.uid)&&r&&!o)try{let e=localStorage.getItem(w.LS);if(!e)return;let t=JSON.parse(e),a=Date.now()-t.timestamp;if(localStorage.removeItem(w.LS),a>36e5)return;c(!0),await d({plan:t.planId,workspaceId:r})}catch(e){m.logging.error("Error processing pending plan selection",{error:e,userId:null==t?void 0:t.uid,workspaceId:r}),localStorage.removeItem(w.LS)}},[null==t?void 0:t.uid,r,o,d]);(0,n.useEffect)(()=>{i||!t||!r||s||o||(null==a?void 0:a.segmentation_form_status)!==E.C.SUBMITTED||(null==l?void 0:l.plan)==="free"&&u()},[i,t,null==l?void 0:l.plan,r,s,o,u,null==a?void 0:a.segmentation_form_status])}({authUser:U,currentWorkspaceId:Y,userData:null!=W?W:null,isLoadingAllWorkspaces:A,currentWorkspace:null!=(N=null==X?void 0:X.workspace)?N:null,isProjectScoped:M}),function(e){let{allWorkspaces:t,isLoadingAllWorkspaces:r,workspaceDataForUnacceptedInvites:a,setCurrentWorkspaceId:s,authUser:o,isProjectScoped:c}=e,d=(0,l.useRouter)(),u=(0,l.usePathname)(),p=(0,l.useSearchParams)(),m=(0,n.useRef)(new Set),h=p.get("workspaceId"),{store:w}=(0,_.k9)(),b=(0,g.jE)(),E=(0,n.useCallback)(()=>{let e=new URLSearchParams(p);e.delete("workspaceId"),d.replace("".concat(u,"?").concat(e.toString()),{scroll:!1})},[d,u,p]),{mutate:y}=(0,x.n)({mutationFn:async e=>{let t=(0,v.P)();return await t.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{s(e.id),E(),m.current.has(e.id)||(i.toast.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==w||w.setState({workspaces:[...t,e]})),m.current.add(e.id)},onError:(e,t)=>{m.current.has(t.id)||(E(),m.current.add(t.id),(0,f.Ni)(e))},onSettled:()=>{b.invalidateQueries({queryKey:j.workspaceKeys.all})},retry:!1});(0,n.useEffect)(()=>{if(!c){if(h&&!o&&!r)return void d.replace("/login");h&&!r&&(null==a?void 0:a.workspace)&&!m.current.has(a.workspace.id)&&y(a.workspace)}},[c,y,r,null==a?void 0:a.workspace,h,o,d,u,p])}({allWorkspaces:D,isLoadingAllWorkspaces:A,authUser:U,workspaceDataForUnacceptedInvites:null!=er?er:{workspace:null},setCurrentWorkspaceId:$,isProjectScoped:M}),(0,n.useEffect)(()=>{var e,t;L.current.setState({currentWorkspace:null!=(e=null==X?void 0:X.workspace)?e:null,membership:null!=(t=null==X?void 0:X.current_member)?t:null})},[null==X?void 0:X.workspace,null==X?void 0:X.current_member]),(0,n.useEffect)(()=>{L.current.setState({hasFetchedCurrentWorkspace:!ee})},[ee]),(0,n.useEffect)(()=>{U||(L.current.setState({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1}),J.current=!1)},[U]);let ea=(0,u.O)();(0,n.useEffect)(()=>(M?null==ea||ea.setProjectWorkspaceId(null!=Z?Z:null):null==ea||ea.setCurrentWorkspaceId(null!=Y?Y:null),()=>{M?null==ea||ea.setProjectWorkspaceId(null):null==ea||ea.setCurrentWorkspaceId(null)}),[Y,Z,ea,M]);let es=(0,n.useMemo)(()=>({store:L.current,setCurrentWorkspaceId:M?()=>{}:$,currentWorkspaceId:M?R:Y,currentUserSelectedWorkspaceId:K,isProjectScoped:M}),[L.current,M,Y,K,$]);return(0,a.jsx)(y.Provider,{value:es,children:P})}function N(){let e=(0,n.useContext)(y);if(!e)throw Error("useCurrentWorkspaceContext must be used within a CurrentWorkspaceProvider");return e}function k(){return(0,n.useContext)(y)}function P(e){let{store:t}=N();if(!t)throw Error("useCurrentWorkspaceStore must be used within a CurrentWorkspaceProvider");return t(e)}function I(e){let t=k(),r=null==t?void 0:t.store;return r?r(e):null}function D(){var e;let t=k();return null!=(e=null==t?void 0:t.isProjectScoped)&&e}function A(){let{store:e}=N();if(!e)throw Error("useSetProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().setProjectWorkspaceOverride}function S(){let{store:e}=N();if(!e)throw Error("useClearProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().clearProjectWorkspaceOverride}},85062:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});var a=r(77145),s=r(52873),l=r(47226),n=r(56024);let i=e=>{let{showEnterpriseCard:t=!1,className:r}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4",r),children:[(0,a.jsxs)("div",{className:"grid w-full grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsxs)(s.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]})})]})]}),(0,a.jsxs)(s.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]}),(0,a.jsxs)(s.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]})]}),t&&(0,a.jsxs)(s.Zp,{className:"flex w-full flex-col items-center justify-between gap-4 px-4 py-6 md:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-shrink flex-col gap-2",children:[(0,a.jsx)(l.E,{className:"h-6 w-32"}),(0,a.jsx)(l.E,{className:"h-4 w-64"})]}),(0,a.jsx)(l.E,{className:"h-9 w-36"})]})]})}},87252:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o,V:()=>i});let a={MAX_DISPLAY_DECIMAL_PLACES:1},s=a.MAX_DISPLAY_DECIMAL_PLACES+1,l=Math.pow(10,a.MAX_DISPLAY_DECIMAL_PLACES),n=Math.pow(10,s),i=e=>Number.isFinite(e)?Math.round(e*n)/n:0,o=e=>{if(!Number.isFinite(e)||e<0)return"0";let t=Math.round(e*l)/l;return t===Math.floor(t)?t.toLocaleString():t.toLocaleString(void 0,{minimumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES,maximumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES})}},90249:(e,t,r)=>{"use strict";r.d(t,{Q:()=>l});var a=r(95661);let s=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"];function l(e){return(0,a.useMemo)(()=>{e||(e="fake-user");let t=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)}(e)%s.length;return s[t]},[e])}},91169:(e,t,r)=>{"use strict";r.d(t,{R:()=>P,d:()=>I});var a=r(77145),s=r(6698),l=r(13410),n=r(92912),i=r(95661),o=r(31088),c=r(83220),d=r(92918),u=r(28717),p=r(49493),m=r(24500),h=r(83473),_=r(63851),g=r(19620),x=r(39528),f=r(680),v=r(72632),j=r(76058),w=r(21227),b=r(27835);let E="settings",y="billing",C="plan_type",N="redirect",k=(0,i.createContext)(void 0),P=()=>{let e=(0,i.useContext)(k);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},I=e=>{let{children:t}=e,[r,P]=(0,i.useState)(!1),[I,D]=(0,i.useState)(!1),[A,S]=(0,i.useState)(!1),[L,T]=(0,i.useState)(!1),O=(0,l.useSearchParams)(),{userData:R}=(0,u.ur)(),M=(0,c.nu)(e=>e.currentWorkspace),K=(0,p.Mu)(e=>e.workspaces),F=(0,d._C)(f.G.LitePricing),U=O.get("checkoutCode"),W=null==R?void 0:R.pending_promotion_code,B=U||W||void 0,V=(0,s.n)({mutationFn:async e=>{var t;let{plan:r,workspaceId:a,grandfatheredDiscount:s=!1,planType:l="monthly",changeType:n,useStudentDiscount:i=!1}=e;P(r);let o=new URL(window.location.href),c=(e=>{let{currentUrl:t,planId:r,changeType:a}=e,s=new URL(t);return s.searchParams.set("payment_status",b.Yv),s.searchParams.set(b.a_,r),a&&s.searchParams.set(b.wB,a),s.toString()})({currentUrl:o,planId:r,changeType:n}),d=(e=>{let{currentUrl:t,planId:r,planType:a,changeType:s}=e,l=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)l.searchParams.set(N,window.location.origin);else{let e=new URL(t);t.searchParams.has(E)&&t.searchParams.get(E)===y&&e.searchParams.set(E,y),s&&e.searchParams.set(b.wB,s),e.searchParams.set(C,a),l.searchParams.set(N,e.toString())}return l.searchParams.set(b.a_,r),l.searchParams.set(C,a),l.toString()})({currentUrl:o,planId:r,planType:l,changeType:n}),u=a===(null==M?void 0:M.id)?M:K.find(e=>e.id===a),p=(0,v.h5)(r,l,u);if(p===j.Sf.KTLO&&F)switch(F){case"variant1":p=j.Q3.KTLO_1;break;case"variant2":p=j.Q3.KTLO_2}let m=(0,w.D)(),h={price_lookup_key:p,quantity:1,cancel_url:c,success_url:d,client_reference_id:null==(t=window.Rewardful)?void 0:t.referral,workspace_id:a,with_discount:s,coupon_code:B,use_student_discount:i,tracking_data:m};return(0,_.P)().post("/workspaces/".concat(a,"/stripe/checkout"),h)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:t}=e;P(t),n.Ay.capture(x.nA.CREDIT_PLAN_CHECKOUT_CLICKED,{coupon_code:B,new_plan:t})},onError:e=>{g.logging.error("error_creating_checkout_session",{error:e}),(0,h.Ni)(e)},onSettled:()=>{P(!1)}}),G=async e=>{let{plan:t,workspaceId:r,grandfatheredDiscount:a=!1,planType:s="monthly",changeType:l,useStudentDiscount:n=!1}=e;try{await V.mutateAsync({plan:t,workspaceId:r,grandfatheredDiscount:a,planType:s,changeType:l,useStudentDiscount:n})}catch(e){}},q=async e=>{let{workspaceId:t}=e;try{D(!0);let e=(0,_.P)(),r=await e.post("/workspaces/".concat(t,"/stripe/portal-session"),{return_url:window.location.href});window.location.assign(r.url)}catch(e){e instanceof m.L&&"network_error"===e.type&&o.toast.error("Network error: Please check your internet connection and try again."),g.logging.error("error_creating_portal_session",{error:e})}finally{D(!1)}},H=async e=>{let{workspaceId:t}=e;try{S(!0);let e=(0,_.P)();await e.post("/workspaces/".concat(t,"/stripe/cancel-subscription")),o.toast.success("Subscription canceled successfully",{description:"Your subscription will remain active until the end of your current billing period."})}catch(e){(0,h.Ni)(e)}finally{S(!1)}},Y=async e=>{let{workspaceId:t}=e;try{T(!0);let e=(0,_.P)();await e.post("/workspaces/".concat(t,"/stripe/cancel-changes")),o.toast.success("Subscription changes canceled successfully",{description:"Any pending subscription changes have been canceled."})}catch(e){(0,h.Ni)(e)}finally{T(!1)}};return(0,a.jsx)(k.Provider,{value:{checkoutLoading:r,isCreatePortalSessionLoading:I,isCancelSubscriptionLoading:A,isCancelSubscriptionChangesLoading:L,toCheckout:G,createPortalSession:q,cancelSubscription:H,cancelSubscriptionChanges:Y},children:t})}},92034:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,O:()=>c});var a=r(77145),s=r(92912),l=r(95661),n=r(84510);let i=(0,l.createContext)(null),o=e=>{let{children:t}=e,r=(0,l.useRef)((0,n.vt)(()=>({projectWorkspaceId:null,currentWorkspaceId:null}))),o=(0,l.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:t}=r.current.getState();s.Ay.group("workspace",e||t||"none"),s.Ay.reloadFeatureFlags()},[]),c=(0,l.useCallback)(e=>{r.current.setState({projectWorkspaceId:e}),o()},[o]),d=(0,l.useCallback)(e=>{r.current.setState({currentWorkspaceId:e}),o()},[o]),u={store:r.current,setProjectWorkspaceId:c,setCurrentWorkspaceId:d};return(0,a.jsx)(i.Provider,{value:u,children:t})};function c(){let e=(0,l.useContext)(i);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},92763:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var a=r(69994),s=r(680),l=r(72632),n=r(94087);let i=e=>{let t=(0,a.D)(null!=e?e:null),r=(0,n.Q)(s.G.BuildCreditTopUps,{control:!1,test:!0});if(!e)return{canTopUpCredits:!1,isLowOnCredits:!1};let{isProPlan:i,isBizPlan:o}=(0,l.cb)(e.plan);return{canTopUpCredits:r&&(i||o),isLowOnCredits:t.totalRemaining<5}}},92918:(e,t,r)=>{"use strict";r.d(t,{Jp:()=>g,Tp:()=>f,_C:()=>v,ct:()=>E,jD:()=>j});var a=r(77145),s=r(13410),l=r(92912),n=r(24072),i=r(95661),o=r(55966),c=r(15365),d=r(19620),u=r(680),p=r(40702),m=r(40074);let h=(0,i.lazy)(()=>Promise.all([r.e(6415),r.e(1131),r.e(6975)]).then(r.bind(r,46975)).then(e=>({default:e.FeatureFlagDebugDialog}))),_=(0,i.createContext)(void 0),g=()=>{let e=(0,i.useContext)(_);if(!e)throw Error("useFeatureFlagContext must be used within a PostHogFlagsContext in the PosthogProvider");return e},x={},f=e=>{let{featureFlags:t,featureFlagOverrides:r}=g();return void 0!==r[e]?r[e]:!!(null==t?void 0:t[e])},v=e=>{let{featureFlags:t}=g();return null==t?void 0:t[e]},j=()=>({openFeatureFlagDebugDialog:g().openFeatureFlagDebugDialog}),w="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",b=w&&!0;function E(e){let{children:t,bootstrapData:r}=e,{authUser:d}=(0,p.Z2)(),g=(0,p.Nm)(),f=(0,i.useMemo)(()=>null==d?void 0:d.uid,[null==d?void 0:d.uid]),v=(0,i.useMemo)(()=>null==d?void 0:d.displayName,[null==d?void 0:d.displayName]),j=(0,c.E$)(),[E,y]=(0,i.useState)(!1),[C,N]=(0,i.useState)(x);(0,o.vC)("ctrl+shift+f",e=>{e.preventDefault(),y(e=>!e)},{enabled:!!j},[j]);let k=(0,i.useMemo)(()=>({featureFlags:null==r?void 0:r.featureFlags,featureFlagOverrides:C,openFeatureFlagDebugDialog:j?()=>y(!0):void 0}),[null==r?void 0:r.featureFlags,C,j]),P=(0,i.useCallback)(e=>{let{target:t,action:r}=e;if("bulk"===t){let e=Object.values(u.x);switch(r){case"enable_all":N(Object.fromEntries(e.map(e=>[e,!0])));break;case"disable_all":N(Object.fromEntries(e.map(e=>[e,!1])));break;case"clear_all":N(x)}}else N(e=>({...e,[t]:r}))},[]);(0,i.useEffect)(()=>{f&&o11y.setUser({id:f})},[f]),(0,i.useEffect)(()=>{b&&f&&(l.Ay.identify(f,{email:g,name:v}),l.Ay.capture("github_branch",{branch:m.env.BRANCH||null}))},[f,g,v]),(0,i.useEffect)(()=>{b&&l.Ay.init(w,{api_host:"https://lovable.dev/app-data",ui_host:"https://us.posthog.com",bootstrap:r,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:!1})},[r]);let I=(0,s.usePathname)();return(0,i.useEffect)(()=>{l.Ay.capture("$pageview")},[I]),(0,a.jsx)(_.Provider,{value:k,children:(0,a.jsxs)(n.so,{client:l.Ay,children:[t,j&&E&&(0,a.jsx)(i.Suspense,{fallback:null,children:(0,a.jsx)(h,{open:E,onOpenChange:y,featureFlagOverrides:C,onFeatureFlagOverrideChange:P,originalFlags:(null==r?void 0:r.featureFlags)||{}})})]})})}w||d.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable")},94087:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var a=r(92912),s=r(95661),l=r(92918);function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"control",n=(0,l._C)(e),i=t[r];return((0,s.useEffect)(()=>{a.Ay.capture("$feature_flag_called",{$feature_flag_response:n,$feature_flag:e})},[n,e]),"boolean"!=typeof n&&n&&n in t)?t[n]:i}},95290:(e,t,r)=>{"use strict";r.d(t,{Mt:()=>u,kp:()=>h,oO:()=>p,vi:()=>m});var a=r(77145),s=r(95661),l=r(49974),n=r(76449),i=r(67844),o=r(52811),c=r(69730),d=r(56024);let u=e=>{let{name:t,title:r,plan:s,planType:o,description:c,discountedPrice:u,children:p,savingsAmount:m,showSavingsAsPercentage:h=!1,hidePrice:_=!1,isPopular:g=!1,customPriceLabel:x,priceSuffix:f,isScheduled:v,className:j,highlighted:w,priceSubtitle:b}=e,{getDisplayPrice:E,getCurrencySymbol:y}=(0,l.et)(),C=E(s),N=y();return(0,a.jsxs)("div",{className:(0,d.cn)("flex h-full w-full max-w-[360px] flex-col gap-4 rounded-xl border border-muted-border p-4 pb-6 sm:max-w-none lg:max-w-[280px]",{"bg-muted":g},{"border-brand-twilight-primary bg-brand-twilight-primary/10":w},j),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,a.jsx)("p",{className:"text-xl font-medium",children:t}),(0,a.jsx)("div",{className:"min-h-11 text-sm text-foreground lg:min-h-16",children:r})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:(0,d.cn)("flex items-baseline",{invisible:_}),children:x?(0,a.jsx)("span",{className:"flex min-h-11 items-center text-base tabular-nums text-muted-foreground",children:x}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex min-h-11 items-center gap-2",children:[(0,a.jsxs)("p",{className:(0,d.cn)("text-3xl font-medium tabular-nums",u&&"text-muted-foreground line-through"),children:[N,C]}),u&&(0,a.jsxs)("p",{className:"px-1 text-3xl font-medium tabular-nums",children:[N,u]}),(0,a.jsx)("p",{className:"text-base text-muted-foreground",children:null!=f?f:"per month"})]})})}),b&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:b})]}),(0,a.jsx)("div",{className:"-mx-4 flex h-16 items-center border-y border-muted-border px-4 py-2",children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:["string"==typeof c?(0,a.jsx)("p",{className:"flex-1 text-sm text-muted-foreground",children:c}):(0,a.jsx)("div",{className:"flex-1",children:c}),m&&"Coming soon"!==c&&!v&&m>0&&(0,a.jsx)(i.E,{variant:"success",className:"rounded-full bg-success",children:(0,a.jsx)(n.F,{isShimmering:!0,variant:"success",className:(0,d.cn)("flex min-h-8 flex-col justify-center text-base font-normal text-success-foreground","md:text-sm xl:text-base",{"md:text-xs":m>=100}),children:(0,a.jsx)("div",{className:"text-center",children:h?"Save ".concat(m,"%"):"Save ".concat(N).concat(m.toLocaleString())})})})]})}),p]})},p=e=>{let{children:t,onClick:r,className:l,...n}=e,[i,c]=(0,s.useState)(!1),u=async()=>{c(!0),await (null==r?void 0:r()),c(!1)};return(0,a.jsx)(o.$,{onClick:u,...n,loading:i,className:(0,d.cn)("w-full",l),children:t})},m=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col justify-start gap-2",r),children:t})},h=e=>{let{label:t,features:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-4 text-base md:text-sm",children:r.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(c.A,{name:"check",size:"small",className:"relative top-[2px]"}),(0,a.jsx)("span",{className:"text-foreground",children:e})]},t))})]})}},98324:e=>{e.exports={shimmerText:"ShimmeringText_shimmerText__SMwG_",shimmer:"ShimmeringText_shimmer__1AZHS",shimmerTextSuccess:"ShimmeringText_shimmerTextSuccess__itzB9"}},99989:(e,t,r)=>{"use strict";r.d(t,{y:()=>p});var a=r(53789),s=r(81496),l=r(63851),n=r(19620),i=r(69850),o=r(35418),c=r(51573);function d(e){return"string"==typeof e&&Object.values(c.VL).includes(e)}function u(e){d(e.plan)||(null==e?void 0:e.reauth)||(n.logging.error("Workspace contains invalid/outdated plan ID. Defaulting to FREE. Please contact support to update your plan.",{workspace_id:e.id,received_plan:e.plan}),e.plan=c.VL.FREE),e.plan_scheduled&&!d(e.plan_scheduled)&&(n.logging.error("Workspace contains invalid/outdated scheduled plan ID. Removing scheduled plan. Please contact support to update your plan.",{workspace_id:e.id,received_scheduled_plan:e.plan_scheduled}),e.plan_scheduled=void 0)}let p={detail:e=>{let{workspaceId:t,projectId:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.detail(null!=t?t:""),queryFn:async()=>{if(!t)return{workspace:null,is_member:!1,current_member:null};let e=(0,l.P)(),a=await e.get(r?"/projects/".concat(r,"/workspace"):"/workspaces/".concat(t));return a.workspace&&u(a.workspace),a}})},totalProjects:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.totalProjects(t),queryFn:async()=>{let e=(0,s.P)((0,s.rJ)(o.db,"projects"),(0,s._M)("workspace_id","==",t));return(await (0,s.d_)(e)).data().count},enabled:!!t})},projects:e=>{let{workspaceId:t,userId:r,limit:s,isDraft:n=!1,visibility:o}=e;return(0,a.j)({queryKey:[...i.workspaceKeys.projects({workspaceId:null!=t?t:"",userId:r,limit:s,isDraft:n,visibility:o}),"starred-projects"],queryFn:async()=>{let e=(0,l.P)(),a=new URLSearchParams;r&&"all"!==r&&a.set("user_id",r),s&&a.set("limit",s.toString()),o&&a.set("visibility",o);let i=n?"/workspaces/".concat(t,"/projects/draft"):"/workspaces/".concat(t,"/projects"),c=a.toString()?"".concat(i,"?").concat(a.toString()):i;return await e.get(c)},staleTime:3e5,enabled:!!t})},starredProjects:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:[...i.workspaceKeys.detail(null!=t?t:""),"starred-projects"],queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/starred-projects"))},staleTime:3e5,enabled:!!t})},projectCounts:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:[...i.workspaceKeys.detail(null!=t?t:""),"project-counts"],queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/projects/counts"))},staleTime:3e5,enabled:!!t})},recentlyViewedProjects:e=>{let{workspaceId:t,limit:r}=e;return(0,a.j)({queryKey:[...i.workspaceKeys.detail(null!=t?t:""),"recently-viewed-projects",r],queryFn:async()=>{let e=(0,l.P)(),a=new URLSearchParams;r&&a.set("limit",r.toString());let s=a.toString()?"/workspaces/".concat(t,"/projects/recently-viewed?").concat(a.toString()):"/workspaces/".concat(t,"/projects/recently-viewed");return await e.get(s)},staleTime:12e4,enabled:!!t})},workspaces:e=>{let{userId:t,disabled:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.workspaces({userId:null!=t?t:""}),queryFn:async()=>{let e=(0,l.P)(),t=await e.get("/user/workspaces");return t.workspaces&&t.workspaces.forEach(u),t},enabled:!!t&&!r})},workspaceUsage:e=>{let{workspaceId:t,month:r,year:s}=e;return(0,a.j)({queryKey:i.workspaceKeys.workspaceUsage(t,r,s),queryFn:async()=>{let e=(0,l.P)();return await e.post("/workspaces/".concat(t,"/usage"),{month:r,year:s})}})},workspaceUserTotalUsage:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.workspaceUserTotalUsage(t),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/workspaces/".concat(t,"/user-total-usage"))).user_usages},enabled:!!t})},workspaceGithubInstallations:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.workspaceGithubInstallations(t),queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/github-installations"))},enabled:!!t})},pendingWorkspaceInvites:()=>(0,a.j)({queryKey:i.workspaceKeys.pendingWorkspaceInvites(),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/user/workspace-invitations")).invitations}}),projectAccessRequests:e=>(0,a.j)({queryKey:i.workspaceKeys.projectAccessRequests(null!=e?e:""),queryFn:async()=>{let t=(0,l.P)();return await t.get("/workspaces/".concat(e,"/project-access-requests"))},enabled:!!e}),referralCode:e=>{let{referralCode:t,workspaceId:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.referralCode(r,t),queryFn:async()=>{if(t)return{referral_code:t};let e=(0,l.P)();return await e.post("/workspaces/".concat(r,"/referral-code"))}})},referralCreditsConfig:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:[...i.workspaceKeys.detail(null!=t?t:""),"referral-credits-config"],queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/referral-credits-config"))},staleTime:3e5,enabled:!!t})},referralCodeUsage:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.referralCodeUsage(t),queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/referral-code-usage"))}})},templates:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.templates(t),queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/projects/templates"))},enabled:!!t})},workspaceMemberships:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.memberships(null!=t?t:""),refetchInterval:3e5,queryFn:async()=>(0,l.P)().get("/workspaces/".concat(t,"/memberships/search?limit=").concat(20)),enabled:!!t})},searchWorkspaceMemberships:e=>{let{workspaceId:t,params:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.memberships(t,r),staleTime:3e5,queryFn:async()=>{let e=(0,l.P)(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"q",r=new URLSearchParams;return e.query&&r.set(t,e.query),e.status&&"all"!==e.status&&r.set("status",e.status),e.roles&&e.roles.length>0&&r.set("roles",e.roles.join(",")),e.limit&&r.set("limit",e.limit.toString()),e.offset&&r.set("offset",e.offset.toString()),r}(r),s="/workspaces/".concat(t,"/memberships/search?").concat(a.toString());return await e.get(s)},enabled:!!t})},connectorsOAuthStatus:e=>{let{workspaceId:t,integrations:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.connectorsOAuthStatus(t,r),queryFn:async()=>{let e=(0,l.P)(),a=r.join(","),s="/workspaces/".concat(t,"/connectors/mcp/oauth-status?connectors=").concat(a);return await e.get(s)}})},integrationOAuthStatus:e=>{let{workspaceId:t,integrationId:r}=e;return(0,a.j)({queryKey:i.workspaceKeys.integrationOAuthStatus(t,r),queryFn:async()=>{let e=(0,l.P)(),a="/workspaces/".concat(t,"/integrations/").concat(r,"/oauth");return await e.get(a)}})},workspaceLovableCloudUsage:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.workspaceLovableCloudUsage(t),queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/lovable-cloud-monthly-usage"))},enabled:!!t})},lovableCloudProjectUsageBreakdown:e=>{let{workspaceId:t,limit:r,startAfter:s}=e;return(0,a.j)({queryKey:i.workspaceKeys.lovableCloudProjectUsageBreakdown(t,r,s),queryFn:async()=>{let e=(0,l.P)(),a=new URLSearchParams;r&&a.set("limit",r.toString()),s&&a.set("start_after",s);let n=a.toString()?"?".concat(a.toString()):"";return await e.get("/workspaces/".concat(t,"/lovable-cloud-project-usage-breakdown").concat(n))},enabled:!!t})},builderCount:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.builderCount(t),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/workspaces/".concat(t,"/builder-count"))).builder_count},enabled:!!t})},autoTopup:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.autoTopup(t),queryFn:async()=>{let e=(0,l.P)();return await e.get("/workspaces/".concat(t,"/balance/auto-topup"))},enabled:!!t})},cloudGrantStatus:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.cloudGrantStatus(t),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/workspaces/".concat(t,"/cloud-grant-status"))).status},enabled:!!t})},aiGrantStatus:e=>{let{workspaceId:t}=e;return(0,a.j)({queryKey:i.workspaceKeys.aiGrantStatus(t),queryFn:async()=>{let e=(0,l.P)();return(await e.get("/workspaces/".concat(t,"/ai-grant-status"))).status},enabled:!!t})},deleteConnection:e=>{let{workspaceId:t}=e;return{mutationFn:async e=>{let r=(0,l.P)();await r.delete("/workspaces/".concat(t,"/connections/mcp/").concat(e))}}},updateMcpEnabled:e=>{let{workspaceId:t}=e;return{mutationFn:async e=>{let r=(0,l.P)();await r.put("/user/workspaces/".concat(t),{mcp_enabled:e})}}},addMcpServerWithToken:e=>{let{workspaceId:t}=e;return{mutationFn:async e=>{let{name:r,url:a,token:s,connectorId:n}=e,i=(0,l.P)();await i.post("/workspaces/".concat(t,"/connections/mcp/").concat(n,"/bearer_token"),{name:r,url:a,token:s})}}}}}}]);